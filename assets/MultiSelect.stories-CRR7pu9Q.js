import{j as l}from"./jsx-runtime-u17CrQMm.js";import{r as p}from"./iframe-CBZZsDyq.js";import{P as s}from"./index-B0SiIz-z.js";import{I as j}from"./Icon-DrVTT-Ou.js";import{C as k}from"./Chip-BuKi6sLz.js";const y=({options:h=[],value:w,onChange:c,placeholder:O="Select options...",label:S,className:V="",disabled:t=!1,defaultValue:T=[],...N})=>{const[d,x]=p.useState(!1),[C,q]=p.useState(T),f=p.useRef(null),b=w!==void 0,r=b?w:C;p.useEffect(()=>{const e=a=>{f.current&&!f.current.contains(a.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const D=e=>{t||e.target.closest(".wim-multiselect-badge-remove")||x(!d)},M=e=>{if(t)return;let a;r?.includes(e)?a=r.filter(m=>m!==e):a=[...r||[],e],b||q(a),c&&c(a)},I=(e,a)=>{if(e.stopPropagation(),t)return;const m=(r||[]).filter(_=>_!==a);b||q(m),c&&c(m)},v=h.filter(e=>r?.includes(e.value));return l.jsxs("div",{className:`wim-multiselect ${V}`,ref:f,...N,children:[S&&l.jsx("label",{className:"wim-label",children:S}),l.jsxs("div",{className:`wim-multiselect-trigger ${d?"wim-multiselect-trigger--open":""} ${t?"wim-multiselect-trigger--disabled":""}`,onClick:D,tabIndex:t?-1:0,role:"combobox","aria-expanded":d,"aria-haspopup":"listbox","aria-disabled":t,children:[l.jsx("div",{className:`wim-multiselect-value ${v.length===0?"wim-multiselect-value--placeholder":""}`,children:v.length>0?v.map(e=>l.jsx(k,{label:e.label,size:"small",color:"neutral",variant:"solid",onDelete:t?void 0:a=>I(a,e.value),className:"wim-multiselect-badge"},e.value)):O}),l.jsx("div",{className:"wim-multiselect-icon",children:l.jsx(j,{name:"ChevronDownIcon",size:"small"})})]}),d&&!t&&l.jsx("ul",{className:"wim-multiselect-list",role:"listbox","aria-multiselectable":"true",children:h.map(e=>{const a=r?.includes(e.value);return l.jsxs("li",{className:`wim-multiselect-option ${a?"wim-multiselect-option--selected":""} ${e.disabled?"wim-multiselect-option--disabled":""}`,onClick:()=>!e.disabled&&M(e.value),role:"option","aria-selected":a,"aria-disabled":e.disabled,children:[l.jsx("span",{children:e.label}),a&&l.jsx(j,{name:"CheckIcon",size:"small"})]},e.value)})})]})};y.propTypes={options:s.arrayOf(s.shape({label:s.string.isRequired,value:s.string.isRequired,disabled:s.bool})).isRequired,value:s.arrayOf(s.string),onChange:s.func,placeholder:s.string,label:s.string,className:s.string,disabled:s.bool,defaultValue:s.arrayOf(s.string)};y.__docgenInfo={description:"ユーザーが定義済みの選択肢から複数を選択するためのドロップダウンメニュー。",methods:[],displayName:"MultiSelect",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
    label: string;\r
    value: string;\r
    disabled?: boolean;\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"MultiSelectOption[]"},description:"選択肢の配列。",defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},value:{name:"string",required:!0},disabled:{name:"bool",required:!1}}}}},value:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"現在の選択された値の配列 (制御されたコンポーネントの場合)。",type:{name:"arrayOf",value:{name:"string"}}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"}],return:{name:"void"}}},description:"値が変更された時のコールバック。",type:{name:"func"}},placeholder:{required:!1,tsType:{name:"string"},description:"プレースホルダー。",defaultValue:{value:'"Select options..."',computed:!1},type:{name:"string"}},label:{required:!1,tsType:{name:"string"},description:"ラベル。",type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"追加のクラス名。",defaultValue:{value:'""',computed:!1},type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"無効化。",defaultValue:{value:"false",computed:!1},type:{name:"bool"}},defaultValue:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"初期値 (非制御コンポーネントの場合)。",defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"string"}}}}};const E={title:"Component/Data Entry/MultiSelect",component:y,parameters:{layout:"centered",docs:{description:{component:"ユーザーが定義済みの選択肢から複数を選択するためのドロップダウンメニュー。"}}},tags:[],argTypes:{onChange:{action:"changed"}}},g=[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"},{label:"Orange",value:"orange"},{label:"Grape",value:"grape"},{label:"Disabled Option",value:"disabled",disabled:!0}],n={args:{options:g,placeholder:"Select fruits..."}},i={args:{label:"Favorites",options:g,placeholder:"Select..."}},o={args:{options:g,defaultValue:["apple","orange"]}},u={args:{options:g,disabled:!0,defaultValue:["banana"]}};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    placeholder: "Select fruits..."
  }
}`,...n.parameters?.docs?.source}}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    label: "Favorites",
    options: options,
    placeholder: "Select..."
  }
}`,...i.parameters?.docs?.source}}};o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    defaultValue: ["apple", "orange"]
  }
}`,...o.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    disabled: true,
    defaultValue: ["banana"]
  }
}`,...u.parameters?.docs?.source}}};const R=["Default","WithLabel","MultipleSelected","Disabled"],W=Object.freeze(Object.defineProperty({__proto__:null,Default:n,Disabled:u,MultipleSelected:o,WithLabel:i,__namedExportsOrder:R,default:E},Symbol.toStringTag,{value:"Module"}));export{n as D,W as M,i as W,o as a,u as b};
