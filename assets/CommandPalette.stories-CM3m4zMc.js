import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as i,R as N}from"./iframe-BRQWL27F.js";import{r as O}from"./index-CYjtzbAX.js";import{c as j}from"./index-DWoaxWMs.js";import{I as f}from"./Icon-CpAaWSX6.js";import{F as L}from"./FocusTrap-BbC6hzsF.js";const _=i.createContext(void 0),w=()=>{const t=i.useContext(_);if(!t)throw new Error("CommandPalette sub-components must be used within a CommandPalette");return t},b=({children:t,open:n,onOpenChange:r})=>{const[c,s]=i.useState(!1),[a,o]=i.useState(""),[m,p]=i.useState(0),l=i.useRef(0),u=n!==void 0,d=u?n:c,x=i.useCallback(h=>{u||s(h),r?.(h),h||(o(""),p(0))},[u,r]),P=i.useCallback(()=>{const h=l.current;return l.current+=1,h},[]),T=i.useCallback(()=>{l.current-=1},[]);l.current=0,i.useEffect(()=>{const h=g=>{(g.metaKey||g.ctrlKey)&&g.key==="k"&&(g.preventDefault(),x(!d)),g.key==="Escape"&&d&&x(!1)};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[d,x]);const D=N.useMemo(()=>({open:d,onOpenChange:x,search:a,setSearch:o,activeIndex:m,setActiveIndex:p,itemCount:l.current,registerItem:P,unregisterItem:T}),[d,x,a,m,P,T]);return e.jsx(_.Provider,{value:D,children:t})},q=({children:t,asChild:n,className:r})=>{const{onOpenChange:c}=w(),s=a=>{c(!0)};return n&&N.isValidElement(t)?N.cloneElement(t,{onClick:a=>{t.props.onClick?.(a),s()},className:j(r,t.props.className)}):e.jsx("button",{className:j("wim-command-palette-trigger",r),onClick:s,children:t})},E=({children:t,className:n})=>{const{open:r,onOpenChange:c,setActiveIndex:s,itemCount:a}=w();return r?O.createPortal(e.jsx("div",{className:"wim-command-palette-overlay",onClick:()=>c(!1),children:e.jsx(L,{active:r,autoFocus:!0,children:e.jsx("div",{className:j("wim-command-palette-content",n),onClick:o=>o.stopPropagation(),onKeyDown:o=>{o.key==="ArrowDown"?(o.preventDefault(),s(m=>(m+1)%a)):o.key==="ArrowUp"&&(o.preventDefault(),s(m=>(m-1+a)%a))},children:t})})}),document.body):null},k=({placeholder:t="Search commands...",value:n,onChange:r})=>{const{search:c,setSearch:s,setActiveIndex:a,activeIndex:o}=w(),m=p=>{const l=p.target.value;s(l),a(0),r?.(l)};return e.jsxs("div",{className:"wim-command-palette-input-wrapper",children:[e.jsx(f,{name:"SearchIcon",size:"small"}),e.jsx("input",{className:"wim-command-palette-input",placeholder:t,value:n??c,onChange:m,autoFocus:!0,role:"combobox","aria-autocomplete":"list","aria-expanded":!0,"aria-controls":"wim-command-palette-listbox","aria-activedescendant":`wim-command-palette-item-${o}`})]})},I=({children:t})=>e.jsx("div",{className:"wim-command-palette-list",role:"listbox",id:"wim-command-palette-listbox",children:t}),S=({children:t,heading:n})=>e.jsxs("div",{className:"wim-command-palette-group",children:[n&&e.jsx("div",{className:"wim-command-palette-group-heading",children:n}),t]}),v=({children:t,onSelect:n,icon:r,shortcut:c,disabled:s})=>{const{activeIndex:a,setActiveIndex:o,registerItem:m,onOpenChange:p}=w(),[l]=i.useState(()=>m()),u=a===l;return i.useEffect(()=>{if(u&&!s){const d=x=>{x.key==="Enter"&&(n?.(),p(!1))};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)}},[u,s,n,p]),e.jsxs("div",{role:"option",id:`wim-command-palette-item-${l}`,"aria-selected":u,className:j("wim-command-palette-item",{"wim-command-palette-item--active":u,"wim-command-palette-item--disabled":s}),onMouseEnter:()=>!s&&o(l),onClick:()=>{s||(n?.(),p(!1))},children:[r&&e.jsx("div",{className:"wim-command-palette-item-icon",children:r}),e.jsx("div",{className:"wim-command-palette-item-label",children:t}),c&&e.jsx("div",{className:"wim-command-palette-item-shortcut",children:c.map(d=>e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:d},d))})]})},A=({children:t="No results found."})=>{const{itemCount:n}=w();return n>0?null:e.jsx("div",{className:"wim-command-palette-empty",children:t})},R=({children:t})=>e.jsx("div",{className:"wim-command-palette-footer",children:t});b.__docgenInfo={description:"",methods:[],displayName:"CommandPalette",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};q.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteTrigger",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},asChild:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};k.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteInput",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Search commands..."',computed:!1}},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};I.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteList",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};S.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteGroup",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},heading:{required:!1,tsType:{name:"string"},description:""}}};v.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteItem",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},shortcut:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};A.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteEmpty",props:{children:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'"No results found."',computed:!1}}}};R.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteFooter",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const z={title:"Component/Overlays/CommandPalette",component:b,parameters:{layout:"fullscreen"}},F=()=>{const[t,n]=i.useState(""),c=[{id:"1",label:"New Project",icon:"CheckIcon",group:"Actions",shortcut:["⌘","N"]},{id:"2",label:"Open Project",icon:"ChevronRightIcon",group:"Actions",shortcut:["⌘","O"]},{id:"3",label:"Save File",icon:"UploadIcon",group:"Actions",shortcut:["⌘","S"]},{id:"4",label:"Settings",icon:"SquareIcon",group:"Settings",shortcut:["⌘",","]},{id:"5",label:"Profile",icon:"CircleIcon",group:"Settings"},{id:"6",label:"Theme: Dark",icon:"EyeOffIcon",group:"Preferences"},{id:"7",label:"Theme: Light",icon:"EyeIcon",group:"Preferences"}].filter(a=>a.label.toLowerCase().includes(t.toLowerCase())),s=Array.from(new Set(c.map(a=>a.group)));return e.jsx("div",{style:{padding:"100px",textAlign:"center"},children:e.jsxs(b,{children:[e.jsxs(q,{children:[e.jsx(f,{name:"SearchIcon",size:"small"}),e.jsx("span",{children:"Search Commands..."}),e.jsx("kbd",{style:{marginLeft:"12px",fontSize:"0.8em",opacity:.6},children:"⌘K"})]}),e.jsxs(E,{children:[e.jsx(k,{placeholder:"Type a command or search...",onChange:n}),e.jsxs(I,{children:[e.jsx(A,{}),s.map(a=>e.jsx(S,{heading:a,children:c.filter(o=>o.group===a).map(o=>e.jsx(v,{onSelect:()=>console.log(`Selected: ${o.label}`),shortcut:o.shortcut,icon:e.jsx(f,{name:o.icon,size:"small"}),children:o.label},o.id))},a))]}),e.jsxs(R,{children:[e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↵"})," to select"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↑"}),e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↓"})," to navigate"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"esc"})," to close"]})]})]})]})})},C={render:()=>e.jsx(F,{})},K=()=>{const[t,n]=i.useState(!1);return e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>n(!0),style:{padding:"10px 20px",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Open Controlled Palette"}),e.jsx(b,{open:t,onOpenChange:n,children:e.jsxs(E,{children:[e.jsx(k,{placeholder:"Search..."}),e.jsx(I,{children:e.jsxs(S,{heading:"Quick Links",children:[e.jsx(v,{onSelect:()=>{},icon:e.jsx(f,{name:"SearchIcon",size:"small"}),children:"Search Docs"}),e.jsx(v,{onSelect:()=>{},icon:e.jsx(f,{name:"CopyIcon",size:"small"}),children:"Copy Link"}),e.jsx(v,{onSelect:()=>{},icon:e.jsx(f,{name:"StarIcon",size:"small"}),children:"Add to Favorites"})]})})]})})]})},y={render:()=>e.jsx(K,{})};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultTemplate />
}`,...C.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  render: () => <ControlledTemplate />
}`,...y.parameters?.docs?.source}}};const V=["Default","Controlled"],H=Object.freeze(Object.defineProperty({__proto__:null,Controlled:y,Default:C,__namedExportsOrder:V,default:z},Symbol.toStringTag,{value:"Module"}));export{H as C};
