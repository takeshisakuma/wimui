import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as i,R as N}from"./iframe-DaIVb5M8.js";import{c as j}from"./index-Dgw6-tPc.js";import{P as F}from"./Portal-B5LQWwUw.js";import{T as q}from"./Transition-C5g807tS.js";import{I as x}from"./Icon-D9TceFkm.js";import{F as L}from"./FocusTrap-BJHdm3Pi.js";const E=i.createContext(void 0),w=()=>{const t=i.useContext(E);if(!t)throw new Error("CommandPalette sub-components must be used within a CommandPalette");return t},b=({children:t,open:a,onOpenChange:r})=>{const[c,s]=i.useState(!1),[o,n]=i.useState(""),[m,p]=i.useState(0),l=i.useRef(0),u=a!==void 0,d=u?a:c,f=i.useCallback(h=>{u||s(h),r?.(h),h||(n(""),p(0))},[u,r]),S=i.useCallback(()=>{const h=l.current;return l.current+=1,h},[]),_=i.useCallback(()=>{l.current-=1},[]);l.current=0,i.useEffect(()=>{const h=g=>{(g.metaKey||g.ctrlKey)&&g.key==="k"&&(g.preventDefault(),f(!d)),g.key==="Escape"&&d&&f(!1)};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[d,f]);const D=N.useMemo(()=>({open:d,onOpenChange:f,search:o,setSearch:n,activeIndex:m,setActiveIndex:p,itemCount:l.current,registerItem:S,unregisterItem:_}),[d,f,o,m,S,_]);return e.jsx(E.Provider,{value:D,children:t})},R=({children:t,asChild:a,className:r})=>{const{onOpenChange:c}=w(),s=()=>{c(!0)};return a&&N.isValidElement(t)?N.cloneElement(t,{onClick:o=>{t.props.onClick?.(o),s()},className:j(r,t.props.className)}):e.jsx("button",{className:j("wim-command-palette-trigger",r),onClick:s,children:t})},k=({children:t,className:a})=>{const{open:r,onOpenChange:c,setActiveIndex:s,itemCount:o}=w();return e.jsx(F,{children:e.jsx(q,{show:r,enter:"fade-enter",enterFrom:"fade-enter-from",enterTo:"fade-enter-to",leave:"fade-leave",leaveFrom:"fade-leave-from",leaveTo:"fade-leave-to",children:e.jsx("div",{className:"wim-command-palette-overlay",onClick:n=>{n.target===n.currentTarget&&c(!1)},children:e.jsx(q,{show:r,enter:"scale-enter",enterFrom:"scale-enter-from",enterTo:"scale-enter-to",leave:"scale-leave",leaveFrom:"scale-leave-from",leaveTo:"scale-leave-to",children:e.jsx(L,{active:r,autoFocus:!0,children:e.jsx("div",{className:j("wim-command-palette-content",a),onClick:n=>n.stopPropagation(),onKeyDown:n=>{n.key==="ArrowDown"?(n.preventDefault(),s(m=>(m+1)%o)):n.key==="ArrowUp"&&(n.preventDefault(),s(m=>(m-1+o)%o))},children:t})})})})})})},T=({placeholder:t="Search commands...",value:a,onChange:r})=>{const{search:c,setSearch:s,setActiveIndex:o,activeIndex:n}=w(),m=p=>{const l=p.target.value;s(l),o(0),r?.(l)};return e.jsxs("div",{className:"wim-command-palette-input-wrapper",children:[e.jsx(x,{name:"SearchIcon",size:"small"}),e.jsx("input",{className:"wim-command-palette-input",placeholder:t,value:a??c,onChange:m,autoFocus:!0,role:"combobox","aria-autocomplete":"list","aria-expanded":!0,"aria-controls":"wim-command-palette-listbox","aria-activedescendant":`wim-command-palette-item-${n}`})]})},I=({children:t})=>e.jsx("div",{className:"wim-command-palette-list",role:"listbox",id:"wim-command-palette-listbox",children:t}),P=({children:t,heading:a})=>e.jsxs("div",{className:"wim-command-palette-group",children:[a&&e.jsx("div",{className:"wim-command-palette-group-heading",children:a}),t]}),y=({children:t,onSelect:a,icon:r,shortcut:c,disabled:s})=>{const{activeIndex:o,setActiveIndex:n,registerItem:m,onOpenChange:p}=w(),[l]=i.useState(()=>m()),u=o===l;return i.useEffect(()=>{if(u&&!s){const d=f=>{f.key==="Enter"&&(a?.(),p(!1))};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)}},[u,s,a,p]),e.jsxs("div",{role:"option",id:`wim-command-palette-item-${l}`,"aria-selected":u,className:j("wim-command-palette-item",{"wim-command-palette-item--active":u,"wim-command-palette-item--disabled":s}),onMouseEnter:()=>!s&&n(l),onClick:()=>{s||(a?.(),p(!1))},children:[r&&e.jsx("div",{className:"wim-command-palette-item-icon",children:r}),e.jsx("div",{className:"wim-command-palette-item-label",children:t}),c&&e.jsx("div",{className:"wim-command-palette-item-shortcut",children:c.map(d=>e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:d},d))})]})},A=({children:t="No results found."})=>{const{itemCount:a}=w();return a>0?null:e.jsx("div",{className:"wim-command-palette-empty",children:t})},O=({children:t})=>e.jsx("div",{className:"wim-command-palette-footer",children:t});b.__docgenInfo={description:"",methods:[],displayName:"CommandPalette",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};R.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteTrigger",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},asChild:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};k.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteContent",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};T.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteInput",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Search commands..."',computed:!1}},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};I.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteList",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};P.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteGroup",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},heading:{required:!1,tsType:{name:"string"},description:""}}};y.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteItem",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},shortcut:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};A.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteEmpty",props:{children:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'"No results found."',computed:!1}}}};O.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteFooter",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const z={title:"Component/Overlays/CommandPalette",component:b,parameters:{layout:"fullscreen"}},K=()=>{const[t,a]=i.useState(""),c=[{id:"1",label:"New Project",icon:"CheckIcon",group:"Actions",shortcut:["⌘","N"]},{id:"2",label:"Open Project",icon:"ChevronRightIcon",group:"Actions",shortcut:["⌘","O"]},{id:"3",label:"Save File",icon:"UploadIcon",group:"Actions",shortcut:["⌘","S"]},{id:"4",label:"Settings",icon:"SquareIcon",group:"Settings",shortcut:["⌘",","]},{id:"5",label:"Profile",icon:"CircleIcon",group:"Settings"},{id:"6",label:"Theme: Dark",icon:"EyeOffIcon",group:"Preferences"},{id:"7",label:"Theme: Light",icon:"EyeIcon",group:"Preferences"}].filter(o=>o.label.toLowerCase().includes(t.toLowerCase())),s=Array.from(new Set(c.map(o=>o.group)));return e.jsx("div",{style:{padding:"100px 20px",textAlign:"center"},children:e.jsxs(b,{children:[e.jsxs(R,{children:[e.jsx(x,{name:"SearchIcon",size:"small"}),e.jsx("span",{children:"Search Commands..."}),e.jsx("kbd",{style:{marginLeft:"12px",fontSize:"0.8em",opacity:.6},children:"⌘K"})]}),e.jsxs(k,{children:[e.jsx(T,{placeholder:"Type a command or search...",onChange:a}),e.jsxs(I,{children:[e.jsx(A,{}),s.map(o=>e.jsx(P,{heading:o,children:c.filter(n=>n.group===o).map(n=>e.jsx(y,{onSelect:()=>console.log(`Selected: ${n.label}`),shortcut:n.shortcut,icon:e.jsx(x,{name:n.icon,size:"small"}),children:n.label},n.id))},o))]}),e.jsxs(O,{children:[e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↵"})," to select"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↑"}),e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↓"})," to navigate"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"esc"})," to close"]})]})]})]})})},v={render:()=>e.jsx(K,{})},V=()=>{const[t,a]=i.useState(!1);return e.jsxs("div",{style:{padding:"100px 20px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>a(!0),style:{padding:"10px 20px",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Open Controlled Palette"}),e.jsx(b,{open:t,onOpenChange:a,children:e.jsxs(k,{children:[e.jsx(T,{placeholder:"Search..."}),e.jsx(I,{children:e.jsxs(P,{heading:"Quick Links",children:[e.jsx(y,{onSelect:()=>{},icon:e.jsx(x,{name:"SearchIcon",size:"small"}),children:"Search Docs"}),e.jsx(y,{onSelect:()=>{},icon:e.jsx(x,{name:"CopyIcon",size:"small"}),children:"Copy Link"}),e.jsx(y,{onSelect:()=>{},icon:e.jsx(x,{name:"StarIcon",size:"small"}),children:"Add to Favorites"})]})})]})})]})},C={render:()=>e.jsx(V,{})};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultTemplate />
}`,...v.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  render: () => <ControlledTemplate />
}`,...C.parameters?.docs?.source}}};const M=["Default","Controlled"],W=Object.freeze(Object.defineProperty({__proto__:null,Controlled:C,Default:v,__namedExportsOrder:M,default:z},Symbol.toStringTag,{value:"Module"}));export{W as C};
