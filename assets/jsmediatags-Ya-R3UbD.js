import{n as nt,g as it}from"./iframe-CMENnxJG.js";import at from"react-native-fs";function ot(E,F){for(var k=0;k<F.length;k++){const I=F[k];if(typeof I!="string"&&!Array.isArray(I)){for(const C in I)if(C!=="default"&&!(C in E)){const x=Object.getOwnPropertyDescriptor(I,C);x&&Object.defineProperty(E,C,x.get?x:{enumerable:!0,get:()=>I[C]})}}}return Object.freeze(Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}))}var ve,De;function et(){if(De)return ve;De=1;function E(R,i){if(!(R instanceof i))throw new TypeError("Cannot call a class as a function")}function F(R,i){for(var p=0;p<i.length;p++){var S=i[p];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(R,S.key,S)}}function k(R,i,p){return i&&F(R.prototype,i),R}function I(R,i,p){return i in R?Object.defineProperty(R,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):R[i]=p,R}var C=(function(){function R(i,p){E(this,R),I(this,"_value",void 0),I(this,"bytesReadCount",void 0),I(this,"length",void 0),this._value=i,this.bytesReadCount=p,this.length=i.length}return k(R,[{key:"toString",value:function(){return this._value}}]),R})(),x={readUTF16String:function(i,p,S){var _=0,m=1,h=0;S=Math.min(S||i.length,i.length),i[0]==254&&i[1]==255?(p=!0,_=2):i[0]==255&&i[1]==254&&(p=!1,_=2),p&&(m=0,h=1);for(var g=[],s=0;_<S;s++){var v=i[_+m],o=i[_+h],f=(v<<8)+o;if(_+=2,f==0)break;if(v<216||v>=224)g[s]=String.fromCharCode(f);else{var n=i[_+m],u=i[_+h],r=(n<<8)+u;_+=2,g[s]=String.fromCharCode(f,r)}}return new C(g.join(""),_)},readUTF8String:function(i,p){var S=0;p=Math.min(p||i.length,i.length),i[0]==239&&i[1]==187&&i[2]==191&&(S=3);for(var _=[],m=0;S<p;m++){var h=i[S++];if(h==0)break;if(h<128)_[m]=String.fromCharCode(h);else if(h>=194&&h<224){var g=i[S++];_[m]=String.fromCharCode(((h&31)<<6)+(g&63))}else if(h>=224&&h<240){var g=i[S++],s=i[S++];_[m]=String.fromCharCode(((h&255)<<12)+((g&63)<<6)+(s&63))}else if(h>=240&&h<245){var g=i[S++],s=i[S++],v=i[S++],o=((h&7)<<18)+((g&63)<<12)+((s&63)<<6)+(v&63)-65536;_[m]=String.fromCharCode((o>>10)+55296,(o&1023)+56320)}}return new C(_.join(""),S)},readNullTerminatedString:function(i,p){var S=[];p=p||i.length;for(var _=0;_<p;){var m=i[_++];if(m==0)break;S[_-1]=String.fromCharCode(m)}return new C(S.join(""),_)}};return ve=x,ve}var de,Me;function K(){if(Me)return de;Me=1;function E(R,i){if(!(R instanceof i))throw new TypeError("Cannot call a class as a function")}function F(R,i){for(var p=0;p<i.length;p++){var S=i[p];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(R,S.key,S)}}function k(R,i,p){return i&&F(R.prototype,i),p&&F(R,p),R}function I(R,i,p){return i in R?Object.defineProperty(R,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):R[i]=p,R}var C=et(),x=(function(){function R(i){E(this,R),I(this,"_isInitialized",void 0),I(this,"_size",void 0),this._isInitialized=!1,this._size=0}return k(R,[{key:"init",value:function(p){var S=this;if(this._isInitialized)setTimeout(p.onSuccess,1);else return this._init({onSuccess:function(){S._isInitialized=!0,p.onSuccess()},onError:p.onError})}},{key:"_init",value:function(p){throw new Error("Must implement init function")}},{key:"loadRange",value:function(p,S){throw new Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw new Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(p){throw new Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(p,S){for(var _=new Array(S),m=0;m<S;m++)_[m]=this.getByteAt(p+m);return _}},{key:"isBitSetAt",value:function(p,S){var _=this.getByteAt(p);return(_&1<<S)!=0}},{key:"getSByteAt",value:function(p){var S=this.getByteAt(p);return S>127?S-256:S}},{key:"getShortAt",value:function(p,S){var _=S?(this.getByteAt(p)<<8)+this.getByteAt(p+1):(this.getByteAt(p+1)<<8)+this.getByteAt(p);return _<0&&(_+=65536),_}},{key:"getSShortAt",value:function(p,S){var _=this.getShortAt(p,S);return _>32767?_-65536:_}},{key:"getLongAt",value:function(p,S){var _=this.getByteAt(p),m=this.getByteAt(p+1),h=this.getByteAt(p+2),g=this.getByteAt(p+3),s=S?(((_<<8)+m<<8)+h<<8)+g:(((g<<8)+h<<8)+m<<8)+_;return s<0&&(s+=4294967296),s}},{key:"getSLongAt",value:function(p,S){var _=this.getLongAt(p,S);return _>2147483647?_-4294967296:_}},{key:"getInteger24At",value:function(p,S){var _=this.getByteAt(p),m=this.getByteAt(p+1),h=this.getByteAt(p+2),g=S?((_<<8)+m<<8)+h:((h<<8)+m<<8)+_;return g<0&&(g+=16777216),g}},{key:"getStringAt",value:function(p,S){for(var _=[],m=p,h=0;m<p+S;m++,h++)_[h]=String.fromCharCode(this.getByteAt(m));return _.join("")}},{key:"getStringWithCharsetAt",value:function(p,S,_){var m=this.getBytesAt(p,S),h;switch((_||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":h=C.readUTF16String(m,_==="utf-16be");break;case"utf-8":h=C.readUTF8String(m);break;default:h=C.readNullTerminatedString(m);break}return h}},{key:"getCharAt",value:function(p){return String.fromCharCode(this.getByteAt(p))}},{key:"getSynchsafeInteger32At",value:function(p){var S=this.getByteAt(p),_=this.getByteAt(p+1),m=this.getByteAt(p+2),h=this.getByteAt(p+3),g=h&127|(m&127)<<7|(_&127)<<14|(S&127)<<21;return g}}],[{key:"canReadFile",value:function(p){throw new Error("Must implement canReadFile function")}}]),R})();return de=x,de}var _e,Le;function pe(){if(Le)return _e;Le=1;function E(R,i){if(!(R instanceof i))throw new TypeError("Cannot call a class as a function")}function F(R,i){for(var p=0;p<i.length;p++){var S=i[p];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(R,S.key,S)}}function k(R,i,p){return i&&F(R.prototype,i),p&&F(R,p),R}function I(R,i,p){return i in R?Object.defineProperty(R,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):R[i]=p,R}var C=-1,x=(function(){function R(){E(this,R),I(this,"_fileData",void 0),this._fileData=[]}return k(R,[{key:"addData",value:function(p,S){var _=p+S.length-1,m=this._getChunkRange(p,_);if(m.startIx===C)this._fileData.splice(m.insertIx||0,0,{offset:p,data:S});else{var h=this._fileData[m.startIx],g=this._fileData[m.endIx],s=p>h.offset,v=_<g.offset+g.data.length-1,o={offset:Math.min(p,h.offset),data:S};if(s){var f=this._sliceData(h.data,0,p-h.offset);o.data=this._concatData(f,S)}if(v){var f=this._sliceData(o.data,0,g.offset-o.offset);o.data=this._concatData(f,g.data)}this._fileData.splice(m.startIx,m.endIx-m.startIx+1,o)}}},{key:"_concatData",value:function(p,S){if(typeof ArrayBuffer<"u"&&ArrayBuffer.isView&&ArrayBuffer.isView(p)){var _=new p.constructor(p.length+S.length);return _.set(p,0),_.set(S,p.length),_}else return p.concat(S)}},{key:"_sliceData",value:function(p,S,_){return p.slice?p.slice(S,_):p.subarray(S,_)}},{key:"_getChunkRange",value:function(p,S){for(var _=C,m=C,h=0,g=0;g<this._fileData.length;g++,h=g){var s=this._fileData[g].offset,v=s+this._fileData[g].data.length;if(S<s-1)break;if(p<=v+1&&S>=s-1){_=g;break}}if(_===C)return{startIx:C,endIx:C,insertIx:h};for(var g=_;g<this._fileData.length;g++){var s=this._fileData[g].offset,v=s+this._fileData[g].data.length;if(S>=s-1&&(m=g),S<=v+1)break}return m===C&&(m=_),{startIx:_,endIx:m}}},{key:"hasDataRange",value:function(p,S){for(var _=0;_<this._fileData.length;_++){var m=this._fileData[_];if(S<m.offset)return!1;if(p>=m.offset&&S<m.offset+m.data.length)return!0}return!1}},{key:"getByteAt",value:function(p){for(var S,_=0;_<this._fileData.length;_++){var m=this._fileData[_].offset,h=m+this._fileData[_].data.length-1;if(p>=m&&p<=h){S=this._fileData[_];break}}if(S)return S.data[p-S.offset];throw new Error("Offset "+p+" hasn't been loaded yet.")}}],[{key:"NOT_FOUND",get:function(){return C}}]),R})();return _e=x,_e}var me,Ue;function ut(){return Ue||(Ue=1,me=XMLHttpRequest),me}var Re,Ne;function ft(){if(Ne)return Re;Ne=1;function E(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(n){return typeof n}:E=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},E(o)}function F(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}function k(o,f){for(var n=0;n<f.length;n++){var u=f[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}function I(o,f,n){return f&&k(o.prototype,f),n&&k(o,n),o}function C(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),f&&x(o,f)}function x(o,f){return x=Object.setPrototypeOf||function(u,r){return u.__proto__=r,u},x(o,f)}function R(o){var f=S();return function(){var u=_(o),r;if(f){var c=_(this).constructor;r=Reflect.construct(u,arguments,c)}else r=u.apply(this,arguments);return i(this,r)}}function i(o,f){return f&&(E(f)==="object"||typeof f=="function")?f:p(o)}function p(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(o){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_(o)}function m(o,f,n){return f in o?Object.defineProperty(o,f,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[f]=n,o}var h=pe(),g=K(),s=1024,v=(function(o){C(n,o);var f=R(n);function n(u){var r;return F(this,n),r=f.call(this),m(p(r),"_url",void 0),m(p(r),"_fileData",void 0),r._url=u,r._fileData=new h,r}return I(n,[{key:"_init",value:function(r){n._config.avoidHeadRequests?this._fetchSizeWithGetRequest(r):this._fetchSizeWithHeadRequest(r)}},{key:"_fetchSizeWithHeadRequest",value:function(r){var c=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(w){var A=c._parseContentLength(w);A?(c._size=A,r.onSuccess()):c._fetchSizeWithGetRequest(r)},onError:r.onError})}},{key:"_fetchSizeWithGetRequest",value:function(r){var c=this,y=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",y,{onSuccess:function(A){var B=c._parseContentRange(A),O=c._getXhrResponseContent(A);if(B){if(B.instanceLength==null){c._fetchEntireFile(r);return}c._size=B.instanceLength}else c._size=O.length;c._fileData.addData(0,O),r.onSuccess()},onError:r.onError})}},{key:"_fetchEntireFile",value:function(r){var c=this;this._makeXHRRequest("GET",null,{onSuccess:function(w){var A=c._getXhrResponseContent(w);c._size=A.length,c._fileData.addData(0,A),r.onSuccess()},onError:r.onError})}},{key:"_getXhrResponseContent",value:function(r){return r.responseBody||r.responseText||""}},{key:"_parseContentLength",value:function(r){var c=this._getResponseHeader(r,"Content-Length");return c==null?c:parseInt(c,10)}},{key:"_parseContentRange",value:function(r){var c=this._getResponseHeader(r,"Content-Range");if(c){var y=c.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!y)throw new Error("FIXME: Unknown Content-Range syntax: "+c);return{firstBytePosition:parseInt(y[1],10),lastBytePosition:parseInt(y[2],10),instanceLength:y[3]?parseInt(y[3],10):null}}else return null}},{key:"loadRange",value:function(r,c){var y=this;if(y._fileData.hasDataRange(r[0],Math.min(y._size,r[1]))){setTimeout(c.onSuccess,1);return}r=this._roundRangeToChunkMultiple(r),r[1]=Math.min(y._size,r[1]),this._makeXHRRequest("GET",r,{onSuccess:function(A){var B=y._getXhrResponseContent(A);y._fileData.addData(r[0],B),c.onSuccess()},onError:c.onError})}},{key:"_roundRangeToChunkMultiple",value:function(r){var c=r[1]-r[0]+1,y=Math.ceil(c/s)*s;return[r[0],r[0]+y-1]}},{key:"_makeXHRRequest",value:function(r,c,y){var w=this._createXHRObject();w.open(r,this._url);var A=function(){w.status===200||w.status===206?y.onSuccess(w):y.onError&&y.onError({type:"xhr",info:"Unexpected HTTP status "+w.status+".",xhr:w}),w=null};typeof w.onload<"u"?(w.onload=A,w.onerror=function(){y.onError&&y.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:w})}):w.onreadystatechange=function(){w.readyState===4&&A()},n._config.timeoutInSec&&(w.timeout=n._config.timeoutInSec*1e3,w.ontimeout=function(){y.onError&&y.onError({type:"xhr",info:"Timeout after "+w.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:w})}),w.overrideMimeType("text/plain; charset=x-user-defined"),c&&this._setRequestHeader(w,"Range","bytes="+c[0]+"-"+c[1]),this._setRequestHeader(w,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),w.send(null)}},{key:"_setRequestHeader",value:function(r,c,y){n._config.disallowedXhrHeaders.indexOf(c.toLowerCase())<0&&r.setRequestHeader(c,y)}},{key:"_hasResponseHeader",value:function(r,c){var y=r.getAllResponseHeaders();if(!y)return!1;for(var w=y.split(`\r
`),A=[],B=0;B<w.length;B++)A[B]=w[B].split(":")[0].toLowerCase();return A.indexOf(c.toLowerCase())>=0}},{key:"_getResponseHeader",value:function(r,c){return this._hasResponseHeader(r,c)?r.getResponseHeader(c):null}},{key:"getByteAt",value:function(r){var c=this._fileData.getByteAt(r);return c.charCodeAt(0)&255}},{key:"_isWebWorker",value:function(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if(typeof window>"u"&&!this._isWebWorker())return new(ut()).XMLHttpRequest;if(typeof XMLHttpRequest<"u")return new XMLHttpRequest;throw new Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(r){return typeof r=="string"&&/^[a-z]+:\/\//i.test(r)}},{key:"setConfig",value:function(r){for(var c in r)r.hasOwnProperty(c)&&(this._config[c]=r[c]);for(var y=this._config.disallowedXhrHeaders,w=0;w<y.length;w++)y[w]=y[w].toLowerCase()}}]),n})(g);return m(v,"_config",void 0),v._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},Re=v,Re}var Se,ze;function ct(){if(ze)return Se;ze=1;function E(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(f){return typeof f}:E=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},E(v)}function F(v,o){if(!(v instanceof o))throw new TypeError("Cannot call a class as a function")}function k(v,o){for(var f=0;f<o.length;f++){var n=o[f];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(v,n.key,n)}}function I(v,o,f){return o&&k(v.prototype,o),f&&k(v,f),v}function C(v,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(o&&o.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),o&&x(v,o)}function x(v,o){return x=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},x(v,o)}function R(v){var o=S();return function(){var n=_(v),u;if(o){var r=_(this).constructor;u=Reflect.construct(n,arguments,r)}else u=n.apply(this,arguments);return i(this,u)}}function i(v,o){return o&&(E(o)==="object"||typeof o=="function")?o:p(v)}function p(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(v){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},_(v)}function m(v,o,f){return o in v?Object.defineProperty(v,o,{value:f,enumerable:!0,configurable:!0,writable:!0}):v[o]=f,v}var h=pe(),g=K(),s=(function(v){C(f,v);var o=R(f);function f(n){var u;return F(this,f),u=o.call(this),m(p(u),"_blob",void 0),m(p(u),"_fileData",void 0),u._blob=n,u._fileData=new h,u}return I(f,[{key:"_init",value:function(u){this._size=this._blob.size,setTimeout(u.onSuccess,1)}},{key:"loadRange",value:function(u,r){var c=this,y=this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice,w=y.call(this._blob,u[0],u[1]+1),A=new FileReader;A.onloadend=function(B){var O=new Uint8Array(A.result);c._fileData.addData(u[0],O),r.onSuccess()},A.onerror=A.onabort=function(B){r.onError&&r.onError({type:"blob",info:A.error})},A.readAsArrayBuffer(w)}},{key:"getByteAt",value:function(u){return this._fileData.getByteAt(u)}}],[{key:"canReadFile",value:function(u){return typeof Blob<"u"&&u instanceof Blob||typeof File<"u"&&u instanceof File}}]),f})(g);return Se=s,Se}var we,He;function tt(){if(He)return we;He=1;function E(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(o){return typeof o}:E=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},E(s)}function F(s,v){if(!(s instanceof v))throw new TypeError("Cannot call a class as a function")}function k(s,v){for(var o=0;o<v.length;o++){var f=v[o];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(s,f.key,f)}}function I(s,v,o){return v&&k(s.prototype,v),o&&k(s,o),s}function C(s,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(v&&v.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),v&&x(s,v)}function x(s,v){return x=Object.setPrototypeOf||function(f,n){return f.__proto__=n,f},x(s,v)}function R(s){var v=S();return function(){var f=_(s),n;if(v){var u=_(this).constructor;n=Reflect.construct(f,arguments,u)}else n=f.apply(this,arguments);return i(this,n)}}function i(s,v){return v&&(E(v)==="object"||typeof v=="function")?v:p(s)}function p(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(s){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_(s)}function m(s,v,o){return v in s?Object.defineProperty(s,v,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[v]=o,s}var h=K(),g=(function(s){C(o,s);var v=R(o);function o(f){var n;return F(this,o),n=v.call(this),m(p(n),"_array",void 0),m(p(n),"_size",void 0),n._array=f,n._size=f.length,n._isInitialized=!0,n}return I(o,[{key:"init",value:function(n){setTimeout(n.onSuccess,0)}},{key:"loadRange",value:function(n,u){setTimeout(u.onSuccess,0)}},{key:"getByteAt",value:function(n){if(n>=this._array.length)throw new Error("Offset "+n+" hasn't been loaded yet.");return this._array[n]}}],[{key:"canReadFile",value:function(n){return Array.isArray(n)||typeof Buffer=="function"&&Buffer.isBuffer(n)}}]),o})(h);return we=g,we}var Te,qe;function oe(){if(qe)return Te;qe=1;function E(x,R){if(!(x instanceof R))throw new TypeError("Cannot call a class as a function")}function F(x,R){for(var i=0;i<R.length;i++){var p=R[i];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(x,p.key,p)}}function k(x,R,i){return R&&F(x.prototype,R),i&&F(x,i),x}function I(x,R,i){return R in x?Object.defineProperty(x,R,{value:i,enumerable:!0,configurable:!0,writable:!0}):x[R]=i,x}K();var C=(function(){function x(R){E(this,x),I(this,"_mediaFileReader",void 0),I(this,"_tags",void 0),this._mediaFileReader=R,this._tags=null}return k(x,[{key:"setTagsToRead",value:function(i){return this._tags=i,this}},{key:"read",value:function(i){var p=this;this._mediaFileReader.init({onSuccess:function(){p._loadData(p._mediaFileReader,{onSuccess:function(){try{var m=p._parseData(p._mediaFileReader,p._tags)}catch(h){if(i.onError){i.onError({type:"parseData",info:h.message});return}}i.onSuccess(m)},onError:i.onError})},onError:i.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(i,p){throw new Error("Must implement _loadData function")}},{key:"_parseData",value:function(i,p){throw new Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(i){if(!i)return null;for(var p=[],S=this.getShortcuts(),_=0,m;m=i[_];_++)p=p.concat(S[m]||[m]);return p}}],[{key:"getTagIdentifierByteRange",value:function(){throw new Error("Must implement")}},{key:"canReadTagFormat",value:function(i){throw new Error("Must implement")}}]),x})();return Te=C,Te}var Ae,We;function lt(){if(We)return Ae;We=1;function E(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(o){return typeof o}:E=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},E(s)}function F(s,v){if(!(s instanceof v))throw new TypeError("Cannot call a class as a function")}function k(s,v){for(var o=0;o<v.length;o++){var f=v[o];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(s,f.key,f)}}function I(s,v,o){return v&&k(s.prototype,v),o&&k(s,o),s}function C(s,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(v&&v.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),v&&x(s,v)}function x(s,v){return x=Object.setPrototypeOf||function(f,n){return f.__proto__=n,f},x(s,v)}function R(s){var v=S();return function(){var f=_(s),n;if(v){var u=_(this).constructor;n=Reflect.construct(f,arguments,u)}else n=f.apply(this,arguments);return i(this,n)}}function i(s,v){return v&&(E(v)==="object"||typeof v=="function")?v:p(s)}function p(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(s){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_(s)}var m=oe();K();var h=(function(s){C(o,s);var v=R(o);function o(){return F(this,o),v.apply(this,arguments)}return I(o,[{key:"_loadData",value:function(n,u){var r=n.getSize();n.loadRange([r-128,r-1],u)}},{key:"_parseData",value:function(n,u){var r=n.getSize()-128,c=n.getStringWithCharsetAt(r+3,30).toString(),y=n.getStringWithCharsetAt(r+33,30).toString(),w=n.getStringWithCharsetAt(r+63,30).toString(),A=n.getStringWithCharsetAt(r+93,4).toString(),B=n.getByteAt(r+97+28),O=n.getByteAt(r+97+29);if(B==0&&O!=0)var P="1.1",D=n.getStringWithCharsetAt(r+97,28).toString();else{var P="1.0",D=n.getStringWithCharsetAt(r+97,30).toString();O=0}var M=n.getByteAt(r+97+30);if(M<255)var N=g[M];else var N="";var L={type:"ID3",version:P,tags:{title:c,artist:y,album:w,year:A,comment:D,genre:N}};return O&&(L.tags.track=O),L}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(n){var u=String.fromCharCode.apply(String,n.slice(0,3));return u==="TAG"}}]),o})(m),g=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","Acapella","Euro-House","Dance Hall"];return Ae=h,Ae}var be,Xe;function st(){if(Xe)return be;Xe=1;function E(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}function F(m,h){for(var g=0;g<h.length;g++){var s=h[g];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(m,s.key,s)}}function k(m,h,g){return g&&F(m,g),m}K();var I=et(),C=tt(),x={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},R=(function(){function m(){E(this,m)}return k(m,null,[{key:"getFrameReaderFunction",value:function(g){return g in i?i[g]:g[0]==="T"?i["T*"]:g[0]==="W"?i["W*"]:null}},{key:"readFrames",value:function(g,s,v,o,f){for(var n={},u=this._getFrameHeaderSize(o);g<s-u;){var r=this._readFrameHeader(v,g,o),c=r.id;if(!c)break;var y=r.flags,w=r.size,A=g+r.headerSize,B=v;if(g+=r.headerSize+r.size,!(f&&f.indexOf(c)===-1)){if(c==="MP3e"||c==="\0MP3"||c==="\0\0MP"||c===" MP3")break;y&&y.format.unsynchronisation&&!o.flags.unsynchronisation&&(B=this.getUnsyncFileReader(B,A,w),A=0,w=B.getSize()),y&&y.format.data_length_indicator&&(A+=4,w-=4);var O=m.getFrameReaderFunction(c),P=O?O.apply(this,[A,w,B,y,o]):null,D=this._getFrameDescription(c),M={id:c,size:w,description:D,data:P};c in n?(n[c].id&&(n[c]=[n[c]]),n[c].push(M)):n[c]=M}}return n}},{key:"_getFrameHeaderSize",value:function(g){var s=g.major;return s==2?6:s==3||s==4?10:0}},{key:"_readFrameHeader",value:function(g,s,v){var o=v.major,f=null,n=this._getFrameHeaderSize(v);switch(o){case 2:var u=g.getStringAt(s,3),r=g.getInteger24At(s+3,!0);break;case 3:var u=g.getStringAt(s,4),r=g.getLongAt(s+4,!0);break;case 4:var u=g.getStringAt(s,4),r=g.getSynchsafeInteger32At(s+4);break}return(u=="\0\0\0"||u=="\0\0\0\0")&&(u=""),u&&o>2&&(f=this._readFrameFlags(g,s+8)),{id:u||"",size:r||0,headerSize:n||0,flags:f}}},{key:"_readFrameFlags",value:function(g,s){return{message:{tag_alter_preservation:g.isBitSetAt(s,6),file_alter_preservation:g.isBitSetAt(s,5),read_only:g.isBitSetAt(s,4)},format:{grouping_identity:g.isBitSetAt(s+1,7),compression:g.isBitSetAt(s+1,3),encryption:g.isBitSetAt(s+1,2),unsynchronisation:g.isBitSetAt(s+1,1),data_length_indicator:g.isBitSetAt(s+1,0)}}}},{key:"_getFrameDescription",value:function(g){return g in x?x[g]:"Unknown"}},{key:"getUnsyncFileReader",value:function(g,s,v){for(var o=g.getBytesAt(s,v),f=0;f<o.length-1;f++)o[f]===255&&o[f+1]===0&&o.splice(f+1,1);return new C(o)}}]),m})(),i={};i.APIC=function(h,g,s,v,o){var f=h,n=p(s.getByteAt(h));switch(o&&o.major){case 2:var u=s.getStringAt(h+1,3);h+=4;break;case 3:case 4:var u=s.getStringWithCharsetAt(h+1,g-1);h+=1+u.bytesReadCount;break;default:throw new Error("Couldn't read ID3v2 major version.")}var r=s.getByteAt(h),c=_[r],y=s.getStringWithCharsetAt(h+1,g-(h-f)-1,n);return h+=1+y.bytesReadCount,{format:u.toString(),type:c,description:y.toString(),data:s.getBytesAt(h,f+g-h)}},i.CHAP=function(h,g,s,v,o){var f=h,n={},u=I.readNullTerminatedString(s.getBytesAt(h,g));n.id=u.toString(),h+=u.bytesReadCount,n.startTime=s.getLongAt(h,!0),h+=4,n.endTime=s.getLongAt(h,!0),h+=4,n.startOffset=s.getLongAt(h,!0),h+=4,n.endOffset=s.getLongAt(h,!0),h+=4;var r=g-(h-f);return n.subFrames=this.readFrames(h,h+r,s,o),n},i.CTOC=function(h,g,s,v,o){var f=h,n={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},u=I.readNullTerminatedString(s.getBytesAt(h,g));n.id=u.toString(),h+=u.bytesReadCount,n.topLevel=s.isBitSetAt(h,1),n.ordered=s.isBitSetAt(h,0),h++,n.entryCount=s.getByteAt(h),h++;for(var r=0;r<n.entryCount;r++){var c=I.readNullTerminatedString(s.getBytesAt(h,g-(h-f)));n.childElementIds.push(c.toString()),h+=c.bytesReadCount}var y=g-(h-f);return n.subFrames=this.readFrames(h,h+y,s,o),n},i.COMM=function(h,g,s,v,o){var f=h,n=p(s.getByteAt(h)),u=s.getStringAt(h+1,3),r=s.getStringWithCharsetAt(h+4,g-4,n);h+=4+r.bytesReadCount;var c=s.getStringWithCharsetAt(h,f+g-h,n);return{language:u,short_description:r.toString(),text:c.toString()}},i.COM=i.COMM,i.PIC=function(m,h,g,s,v){return i.APIC(m,h,g,s,v)},i.PCNT=function(h,g,s,v,o){return s.getLongAt(h,!1)},i.CNT=i.PCNT,i["T*"]=function(h,g,s,v,o){var f=p(s.getByteAt(h));return s.getStringWithCharsetAt(h+1,g-1,f).toString()},i.TXXX=function(h,g,s,v,o){var f=p(s.getByteAt(h));return S(h,g,s,f)},i.WXXX=function(h,g,s,v,o){if(g===0)return null;var f=p(s.getByteAt(h));return S(h,g,s,f)},i["W*"]=function(h,g,s,v,o){return g===0?null:s.getStringWithCharsetAt(h,g,"iso-8859-1").toString()},i.TCON=function(h,g,s,v){var o=i["T*"].apply(this,arguments);return o.replace(/^\(\d+\)/,"")},i.TCO=i.TCON,i.USLT=function(h,g,s,v,o){var f=h,n=p(s.getByteAt(h)),u=s.getStringAt(h+1,3),r=s.getStringWithCharsetAt(h+4,g-4,n);h+=4+r.bytesReadCount;var c=s.getStringWithCharsetAt(h,f+g-h,n);return{language:u,descriptor:r.toString(),lyrics:c.toString()}},i.ULT=i.USLT,i.UFID=function(h,g,s,v,o){var f=I.readNullTerminatedString(s.getBytesAt(h,g));h+=f.bytesReadCount;var n=s.getBytesAt(h,g-f.bytesReadCount);return{ownerIdentifier:f.toString(),identifier:n}};function p(m){var h;switch(m){case 0:h="iso-8859-1";break;case 1:h="utf-16";break;case 2:h="utf-16be";break;case 3:h="utf-8";break;default:h="iso-8859-1"}return h}function S(m,h,g,s){var v=g.getStringWithCharsetAt(m+1,h-1,s),o=g.getStringWithCharsetAt(m+1+v.bytesReadCount,h-1-v.bytesReadCount,s);return{user_description:v.toString(),data:o.toString()}}var _=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];return be=R,be}var Ee,je;function ht(){if(je)return Ee;je=1;function E(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(n){return typeof n}:E=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},E(o)}function F(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}function k(o,f){for(var n=0;n<f.length;n++){var u=f[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}function I(o,f,n){return f&&k(o.prototype,f),n&&k(o,n),o}function C(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),f&&x(o,f)}function x(o,f){return x=Object.setPrototypeOf||function(u,r){return u.__proto__=r,u},x(o,f)}function R(o){var f=S();return function(){var u=_(o),r;if(f){var c=_(this).constructor;r=Reflect.construct(u,arguments,c)}else r=u.apply(this,arguments);return i(this,r)}}function i(o,f){return f&&(E(f)==="object"||typeof f=="function")?f:p(o)}function p(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(o){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_(o)}var m=oe();K();var h=st(),g=10,s=(function(o){C(n,o);var f=R(n);function n(){return F(this,n),f.apply(this,arguments)}return I(n,[{key:"_loadData",value:function(r,c){r.loadRange([6,9],{onSuccess:function(){r.loadRange([0,g+r.getSynchsafeInteger32At(6)-1],c)},onError:c.onError})}},{key:"_parseData",value:function(r,c){var y=0,w=r.getByteAt(y+3);if(w>4)return{type:"ID3",version:">2.4",tags:{}};var A=r.getByteAt(y+4),B=r.isBitSetAt(y+5,7),O=r.isBitSetAt(y+5,6),P=r.isBitSetAt(y+5,5),D=r.getSynchsafeInteger32At(y+6);if(y+=10,O)if(w===4){var M=r.getSynchsafeInteger32At(y);y+=M}else{var M=r.getLongAt(y,!0);y+=M+4}var N={type:"ID3",version:"2."+w+"."+A,major:w,revision:A,flags:{unsynchronisation:B,extended_header:O,experimental_indicator:P,footer_present:!1},size:D,tags:{}};if(c)var L=this._expandShortcutTags(c);var X=D+10;N.flags.unsynchronisation&&(r=h.getUnsyncFileReader(r,y,D),y=0,X=r.getSize());var Y=h.readFrames(y,X,r,N,L);for(var V in v)if(v.hasOwnProperty(V)){var Q=this._getFrameData(Y,v[V]);Q&&(N.tags[V]=Q)}for(var $ in Y)Y.hasOwnProperty($)&&(N.tags[$]=Y[$]);return N}},{key:"_getFrameData",value:function(r,c){for(var y,w=0,A;A=c[w];w++)if(A in r)return r[A]instanceof Array?y=r[A][0]:y=r[A],y.data}},{key:"getShortcuts",value:function(){return v}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:g}}},{key:"canReadTagFormat",value:function(r){var c=String.fromCharCode.apply(String,r.slice(0,3));return c==="ID3"}}]),n})(m),v={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};return Ee=s,Ee}var xe,Ge;function yt(){if(Ge)return xe;Ge=1;function E(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(n){return typeof n}:E=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},E(o)}function F(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}function k(o,f){for(var n=0;n<f.length;n++){var u=f[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}function I(o,f,n){return f&&k(o.prototype,f),n&&k(o,n),o}function C(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),f&&x(o,f)}function x(o,f){return x=Object.setPrototypeOf||function(u,r){return u.__proto__=r,u},x(o,f)}function R(o){var f=S();return function(){var u=_(o),r;if(f){var c=_(this).constructor;r=Reflect.construct(u,arguments,c)}else r=u.apply(this,arguments);return i(this,r)}}function i(o,f){return f&&(E(f)==="object"||typeof f=="function")?f:p(o)}function p(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(o){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_(o)}var m=oe();K();var h=(function(o){C(n,o);var f=R(n);function n(){return F(this,n),f.apply(this,arguments)}return I(n,[{key:"_loadData",value:function(r,c){var y=this;r.loadRange([0,16],{onSuccess:function(){y._loadAtom(r,0,"",c)},onError:c.onError})}},{key:"_loadAtom",value:function(r,c,y,w){if(c>=r.getSize()){w.onSuccess();return}var A=this,B=r.getLongAt(c,!0);if(B==0||isNaN(B)){w.onSuccess();return}var O=r.getStringAt(c+4,4);if(this._isContainerAtom(O)){O=="meta"&&(c+=4);var P=(y?y+".":"")+O;P==="moov.udta.meta.ilst"?r.loadRange([c,c+B],w):r.loadRange([c+8,c+8+8],{onSuccess:function(){A._loadAtom(r,c+8,P,w)},onError:w.onError})}else r.loadRange([c+B,c+B+8],{onSuccess:function(){A._loadAtom(r,c+B,y,w)},onError:w.onError})}},{key:"_isContainerAtom",value:function(r){return["moov","udta","meta","ilst"].indexOf(r)>=0}},{key:"_canReadAtom",value:function(r){return r!=="----"}},{key:"_parseData",value:function(r,c){var y={};c=this._expandShortcutTags(c),this._readAtom(y,r,0,r.getSize(),c);for(var w in v)if(v.hasOwnProperty(w)){var A=y[v[w]];A&&(w==="track"?y[w]=A.data.track:y[w]=A.data)}return{type:"MP4",ftyp:r.getStringAt(8,4),version:r.getLongAt(12,!0),tags:y}}},{key:"_readAtom",value:function(r,c,y,w,A,B,O){O=O===void 0?"":O+"  ";for(var P=y;P<y+w;){var D=c.getLongAt(P,!0);if(D==0)return;var M=c.getStringAt(P+4,4);if(this._isContainerAtom(M)){M=="meta"&&(P+=4);var N=(B?B+".":"")+M;this._readAtom(r,c,P+8,D-8,A,N,O);return}(!A||A.indexOf(M)>=0)&&B==="moov.udta.meta.ilst"&&this._canReadAtom(M)&&(r[M]=this._readMetadataAtom(c,P)),P+=D}}},{key:"_readMetadataAtom",value:function(r,c){var y=16,w=r.getLongAt(c,!0),A=r.getStringAt(c+4,4),B=r.getInteger24At(c+y+1,!0),O=g[B],P,D=!0;if(A=="trkn")P={track:r.getShortAt(c+y+10,D),total:r.getShortAt(c+y+14,D)};else if(A=="disk")P={disk:r.getShortAt(c+y+10,D),total:r.getShortAt(c+y+14,D)};else{var M=y+4+4,N=c+M,L=w-M,P;switch(A==="covr"&&O==="uint8"&&(O="jpeg"),O){case"text":P=r.getStringWithCharsetAt(N,L,"utf-8").toString();break;case"uint8":P=r.getShortAt(N,!1);break;case"int":case"uint":var X=O=="int"?L==1?r.getSByteAt:L==2?r.getSShortAt:L==4?r.getSLongAt:r.getLongAt:L==1?r.getByteAt:L==2?r.getShortAt:r.getLongAt;P=X.call(r,N+(L==8?4:0),!0);break;case"jpeg":case"png":P={format:"image/"+O,data:r.getBytesAt(N,L)};break}}return{id:A,size:w,description:s[A]||"Unknown",data:P}}},{key:"getShortcuts",value:function(){return v}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(r){var c=String.fromCharCode.apply(String,r.slice(4,8));return c==="ftyp"}}]),n})(m),g={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},s={"©alb":"Album","©ART":"Artist",aART:"Album Artist","©day":"Release Date","©nam":"Title","©gen":"Genre",gnre:"Genre",trkn:"Track Number","©wrt":"Composer","©too":"Encoding Tool","©enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","©grp":"Grouping",keyw:"Keywords","©lyr":"Lyrics","©cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},v={title:"©nam",artist:"©ART",album:"©alb",year:"©day",comment:"©cmt",track:"trkn",genre:"©gen",picture:"covr",lyrics:"©lyr"};return xe=h,xe}var Fe,Ye;function pt(){if(Ye)return Fe;Ye=1;function E(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(r){return typeof r}:E=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},E(n)}function F(n,u){if(!(n instanceof u))throw new TypeError("Cannot call a class as a function")}function k(n,u){for(var r=0;r<u.length;r++){var c=u[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,c.key,c)}}function I(n,u,r){return u&&k(n.prototype,u),r&&k(n,r),n}function C(n,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(u&&u.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),u&&x(n,u)}function x(n,u){return x=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},x(n,u)}function R(n){var u=S();return function(){var c=_(n),y;if(u){var w=_(this).constructor;y=Reflect.construct(c,arguments,w)}else y=c.apply(this,arguments);return i(this,y)}}function i(n,u){return u&&(E(u)==="object"||typeof u=="function")?u:p(n)}function p(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(n){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_(n)}function m(n,u,r){return u in n?Object.defineProperty(n,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[u]=r,n}var h=oe(),g=4,s=[4,132],v=[6,134],o=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"],f=(function(n){C(r,n);var u=R(r);function r(){var c;F(this,r);for(var y=arguments.length,w=new Array(y),A=0;A<y;A++)w[A]=arguments[A];return c=u.call.apply(u,[this].concat(w)),m(p(c),"_commentOffset",void 0),m(p(c),"_pictureOffset",void 0),c}return I(r,[{key:"_loadData",value:function(y,w){var A=this;y.loadRange([4,7],{onSuccess:function(){A._loadBlock(y,4,w)}})}},{key:"_loadBlock",value:function(y,w,A){var B=this,O=y.getByteAt(w),P=y.getInteger24At(w+1,!0);if(s.indexOf(O)!==-1){var D=w+4;y.loadRange([D,D+P],{onSuccess:function(){B._commentOffset=D,B._nextBlock(y,w,O,P,A)}})}else if(v.indexOf(O)!==-1){var D=w+4;y.loadRange([D,D+P],{onSuccess:function(){B._pictureOffset=D,B._nextBlock(y,w,O,P,A)}})}else B._nextBlock(y,w,O,P,A)}},{key:"_nextBlock",value:function(y,w,A,B,O){var P=this;A>127?P._commentOffset?O.onSuccess():O.onError({type:"loadData",info:"Comment block could not be found."}):y.loadRange([w+4+B,w+4+4+B],{onSuccess:function(){P._loadBlock(y,w+4+B,O)}})}},{key:"_parseData",value:function(y,w){for(var A=y.getLongAt(this._commentOffset,!1),B=this._commentOffset+4,O=A+B,P=y.getLongAt(O,!1),D=O+4,M,N,L,X,Y,V,Q=0;Q<P;Q++){var $=y.getLongAt(D,!1),q=y.getStringWithCharsetAt(D+4,$,"utf-8").toString(),j=q.indexOf("="),Z=[q.slice(0,j),q.slice(j+1)];switch(Z[0].toUpperCase()){case"TITLE":M=Z[1];break;case"ARTIST":N=Z[1];break;case"ALBUM":L=Z[1];break;case"TRACKNUMBER":X=Z[1];break;case"GENRE":Y=Z[1];break}D+=4+$}if(this._pictureOffset){var ue=y.getLongAt(this._pictureOffset,!0),te=this._pictureOffset+4,fe=y.getLongAt(te,!0),ce=te+4,re=y.getStringAt(ce,fe),le=ce+fe,se=y.getLongAt(le,!0),ne=le+4,ee=y.getStringWithCharsetAt(ne,se,"utf-8").toString(),J=ne+se+16,ie=y.getLongAt(J,!0),ge=J+4,a=y.getBytesAt(ge,ie,!0);V={format:re,type:o[ue],description:ee,data:a}}var e={type:"FLAC",version:"1",tags:{title:M,artist:N,album:L,track:X,genre:Y,picture:V}};return e}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:g}}},{key:"canReadTagFormat",value:function(y){var w=String.fromCharCode.apply(String,y.slice(0,4));return w==="fLaC"}}]),r})(h);return Fe=f,Fe}var Ce={},ae={},Ve;function gt(){if(Ve)return ae;Ve=1,ae.byteLength=i,ae.toByteArray=S,ae.fromByteArray=h;for(var E=[],F=[],k=typeof Uint8Array<"u"?Uint8Array:Array,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,x=I.length;C<x;++C)E[C]=I[C],F[I.charCodeAt(C)]=C;F[45]=62,F[95]=63;function R(g){var s=g.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=s);var o=v===s?0:4-v%4;return[v,o]}function i(g){var s=R(g),v=s[0],o=s[1];return(v+o)*3/4-o}function p(g,s,v){return(s+v)*3/4-v}function S(g){var s,v=R(g),o=v[0],f=v[1],n=new k(p(g,o,f)),u=0,r=f>0?o-4:o,c;for(c=0;c<r;c+=4)s=F[g.charCodeAt(c)]<<18|F[g.charCodeAt(c+1)]<<12|F[g.charCodeAt(c+2)]<<6|F[g.charCodeAt(c+3)],n[u++]=s>>16&255,n[u++]=s>>8&255,n[u++]=s&255;return f===2&&(s=F[g.charCodeAt(c)]<<2|F[g.charCodeAt(c+1)]>>4,n[u++]=s&255),f===1&&(s=F[g.charCodeAt(c)]<<10|F[g.charCodeAt(c+1)]<<4|F[g.charCodeAt(c+2)]>>2,n[u++]=s>>8&255,n[u++]=s&255),n}function _(g){return E[g>>18&63]+E[g>>12&63]+E[g>>6&63]+E[g&63]}function m(g,s,v){for(var o,f=[],n=s;n<v;n+=3)o=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(g[n+2]&255),f.push(_(o));return f.join("")}function h(g){for(var s,v=g.length,o=v%3,f=[],n=16383,u=0,r=v-o;u<r;u+=n)f.push(m(g,u,u+n>r?r:u+n));return o===1?(s=g[v-1],f.push(E[s>>2]+E[s<<4&63]+"==")):o===2&&(s=(g[v-2]<<8)+g[v-1],f.push(E[s>>10]+E[s>>4&63]+E[s<<2&63]+"=")),f.join("")}return ae}var ye={};var Je;function vt(){return Je||(Je=1,ye.read=function(E,F,k,I,C){var x,R,i=C*8-I-1,p=(1<<i)-1,S=p>>1,_=-7,m=k?C-1:0,h=k?-1:1,g=E[F+m];for(m+=h,x=g&(1<<-_)-1,g>>=-_,_+=i;_>0;x=x*256+E[F+m],m+=h,_-=8);for(R=x&(1<<-_)-1,x>>=-_,_+=I;_>0;R=R*256+E[F+m],m+=h,_-=8);if(x===0)x=1-S;else{if(x===p)return R?NaN:(g?-1:1)*(1/0);R=R+Math.pow(2,I),x=x-S}return(g?-1:1)*R*Math.pow(2,x-I)},ye.write=function(E,F,k,I,C,x){var R,i,p,S=x*8-C-1,_=(1<<S)-1,m=_>>1,h=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=I?0:x-1,s=I?1:-1,v=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(i=isNaN(F)?1:0,R=_):(R=Math.floor(Math.log(F)/Math.LN2),F*(p=Math.pow(2,-R))<1&&(R--,p*=2),R+m>=1?F+=h/p:F+=h*Math.pow(2,1-m),F*p>=2&&(R++,p/=2),R+m>=_?(i=0,R=_):R+m>=1?(i=(F*p-1)*Math.pow(2,C),R=R+m):(i=F*Math.pow(2,m-1)*Math.pow(2,C),R=0));C>=8;E[k+g]=i&255,g+=s,i/=256,C-=8);for(R=R<<C|i,S+=C;S>0;E[k+g]=R&255,g+=s,R/=256,S-=8);E[k+g-s]|=v*128}),ye}var Ke;function dt(){return Ke||(Ke=1,(function(E){var F=gt(),k=vt(),I=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;E.Buffer=i,E.SlowBuffer=n,E.INSPECT_MAX_BYTES=50;var C=2147483647;E.kMaxLength=C,i.TYPED_ARRAY_SUPPORT=x(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function x(){try{var a=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(a,e),a.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function R(a){if(a>C)throw new RangeError('The value "'+a+'" is invalid for option "size"');var e=new Uint8Array(a);return Object.setPrototypeOf(e,i.prototype),e}function i(a,e,t){if(typeof a=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(a)}return p(a,e,t)}i.poolSize=8192;function p(a,e,t){if(typeof a=="string")return h(a,e);if(ArrayBuffer.isView(a))return s(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(J(a,ArrayBuffer)||a&&J(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(a,SharedArrayBuffer)||a&&J(a.buffer,SharedArrayBuffer)))return v(a,e,t);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var l=a.valueOf&&a.valueOf();if(l!=null&&l!==a)return i.from(l,e,t);var d=o(a);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return i.from(a[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}i.from=function(a,e,t){return p(a,e,t)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function S(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function _(a,e,t){return S(a),a<=0?R(a):e!==void 0?typeof t=="string"?R(a).fill(e,t):R(a).fill(e):R(a)}i.alloc=function(a,e,t){return _(a,e,t)};function m(a){return S(a),R(a<0?0:f(a)|0)}i.allocUnsafe=function(a){return m(a)},i.allocUnsafeSlow=function(a){return m(a)};function h(a,e){if((typeof e!="string"||e==="")&&(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=u(a,e)|0,l=R(t),d=l.write(a,e);return d!==t&&(l=l.slice(0,d)),l}function g(a){for(var e=a.length<0?0:f(a.length)|0,t=R(e),l=0;l<e;l+=1)t[l]=a[l]&255;return t}function s(a){if(J(a,Uint8Array)){var e=new Uint8Array(a);return v(e.buffer,e.byteOffset,e.byteLength)}return g(a)}function v(a,e,t){if(e<0||a.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var l;return e===void 0&&t===void 0?l=new Uint8Array(a):t===void 0?l=new Uint8Array(a,e):l=new Uint8Array(a,e,t),Object.setPrototypeOf(l,i.prototype),l}function o(a){if(i.isBuffer(a)){var e=f(a.length)|0,t=R(e);return t.length===0||a.copy(t,0,0,e),t}if(a.length!==void 0)return typeof a.length!="number"||ie(a.length)?R(0):g(a);if(a.type==="Buffer"&&Array.isArray(a.data))return g(a.data)}function f(a){if(a>=C)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+C.toString(16)+" bytes");return a|0}function n(a){return+a!=a&&(a=0),i.alloc(+a)}i.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==i.prototype},i.compare=function(e,t){if(J(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var l=e.length,d=t.length,T=0,b=Math.min(l,d);T<b;++T)if(e[T]!==t[T]){l=e[T],d=t[T];break}return l<d?-1:d<l?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return i.alloc(0);var l;if(t===void 0)for(t=0,l=0;l<e.length;++l)t+=e[l].length;var d=i.allocUnsafe(t),T=0;for(l=0;l<e.length;++l){var b=e[l];if(J(b,Uint8Array))T+b.length>d.length?i.from(b).copy(d,T):Uint8Array.prototype.set.call(d,b,T);else if(i.isBuffer(b))b.copy(d,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=b.length}return d};function u(a,e){if(i.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||J(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var t=a.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&t===0)return 0;for(var d=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return re(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return ne(a).length;default:if(d)return l?-1:re(a).length;e=(""+e).toLowerCase(),d=!0}}i.byteLength=u;function r(a,e,t){var l=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(a||(a="utf8");;)switch(a){case"hex":return Q(this,e,t);case"utf8":case"utf-8":return N(this,e,t);case"ascii":return Y(this,e,t);case"latin1":case"binary":return V(this,e,t);case"base64":return M(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,t);default:if(l)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),l=!0}}i.prototype._isBuffer=!0;function c(a,e,t){var l=a[e];a[e]=a[t],a[t]=l}i.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?N(this,0,e):r.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:i.compare(this,e)===0},i.prototype.inspect=function(){var e="",t=E.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},I&&(i.prototype[I]=i.prototype.inspect),i.prototype.compare=function(e,t,l,d,T){if(J(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),l===void 0&&(l=e?e.length:0),d===void 0&&(d=0),T===void 0&&(T=this.length),t<0||l>e.length||d<0||T>this.length)throw new RangeError("out of range index");if(d>=T&&t>=l)return 0;if(d>=T)return-1;if(t>=l)return 1;if(t>>>=0,l>>>=0,d>>>=0,T>>>=0,this===e)return 0;for(var b=T-d,U=l-t,z=Math.min(b,U),H=this.slice(d,T),G=e.slice(t,l),W=0;W<z;++W)if(H[W]!==G[W]){b=H[W],U=G[W];break}return b<U?-1:U<b?1:0};function y(a,e,t,l,d){if(a.length===0)return-1;if(typeof t=="string"?(l=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,ie(t)&&(t=d?0:a.length-1),t<0&&(t=a.length+t),t>=a.length){if(d)return-1;t=a.length-1}else if(t<0)if(d)t=0;else return-1;if(typeof e=="string"&&(e=i.from(e,l)),i.isBuffer(e))return e.length===0?-1:w(a,e,t,l,d);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(a,e,t):Uint8Array.prototype.lastIndexOf.call(a,e,t):w(a,[e],t,l,d);throw new TypeError("val must be string, number or Buffer")}function w(a,e,t,l,d){var T=1,b=a.length,U=e.length;if(l!==void 0&&(l=String(l).toLowerCase(),l==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(a.length<2||e.length<2)return-1;T=2,b/=2,U/=2,t/=2}function z(ke,Pe){return T===1?ke[Pe]:ke.readUInt16BE(Pe*T)}var H;if(d){var G=-1;for(H=t;H<b;H++)if(z(a,H)===z(e,G===-1?0:H-G)){if(G===-1&&(G=H),H-G+1===U)return G*T}else G!==-1&&(H-=H-G),G=-1}else for(t+U>b&&(t=b-U),H=t;H>=0;H--){for(var W=!0,he=0;he<U;he++)if(z(a,H+he)!==z(e,he)){W=!1;break}if(W)return H}return-1}i.prototype.includes=function(e,t,l){return this.indexOf(e,t,l)!==-1},i.prototype.indexOf=function(e,t,l){return y(this,e,t,l,!0)},i.prototype.lastIndexOf=function(e,t,l){return y(this,e,t,l,!1)};function A(a,e,t,l){t=Number(t)||0;var d=a.length-t;l?(l=Number(l),l>d&&(l=d)):l=d;var T=e.length;l>T/2&&(l=T/2);for(var b=0;b<l;++b){var U=parseInt(e.substr(b*2,2),16);if(ie(U))return b;a[t+b]=U}return b}function B(a,e,t,l){return ee(re(e,a.length-t),a,t,l)}function O(a,e,t,l){return ee(le(e),a,t,l)}function P(a,e,t,l){return ee(ne(e),a,t,l)}function D(a,e,t,l){return ee(se(e,a.length-t),a,t,l)}i.prototype.write=function(e,t,l,d){if(t===void 0)d="utf8",l=this.length,t=0;else if(l===void 0&&typeof t=="string")d=t,l=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(l)?(l=l>>>0,d===void 0&&(d="utf8")):(d=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var T=this.length-t;if((l===void 0||l>T)&&(l=T),e.length>0&&(l<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var b=!1;;)switch(d){case"hex":return A(this,e,t,l);case"utf8":case"utf-8":return B(this,e,t,l);case"ascii":case"latin1":case"binary":return O(this,e,t,l);case"base64":return P(this,e,t,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,l);default:if(b)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),b=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(a,e,t){return e===0&&t===a.length?F.fromByteArray(a):F.fromByteArray(a.slice(e,t))}function N(a,e,t){t=Math.min(a.length,t);for(var l=[],d=e;d<t;){var T=a[d],b=null,U=T>239?4:T>223?3:T>191?2:1;if(d+U<=t){var z,H,G,W;switch(U){case 1:T<128&&(b=T);break;case 2:z=a[d+1],(z&192)===128&&(W=(T&31)<<6|z&63,W>127&&(b=W));break;case 3:z=a[d+1],H=a[d+2],(z&192)===128&&(H&192)===128&&(W=(T&15)<<12|(z&63)<<6|H&63,W>2047&&(W<55296||W>57343)&&(b=W));break;case 4:z=a[d+1],H=a[d+2],G=a[d+3],(z&192)===128&&(H&192)===128&&(G&192)===128&&(W=(T&15)<<18|(z&63)<<12|(H&63)<<6|G&63,W>65535&&W<1114112&&(b=W))}}b===null?(b=65533,U=1):b>65535&&(b-=65536,l.push(b>>>10&1023|55296),b=56320|b&1023),l.push(b),d+=U}return X(l)}var L=4096;function X(a){var e=a.length;if(e<=L)return String.fromCharCode.apply(String,a);for(var t="",l=0;l<e;)t+=String.fromCharCode.apply(String,a.slice(l,l+=L));return t}function Y(a,e,t){var l="";t=Math.min(a.length,t);for(var d=e;d<t;++d)l+=String.fromCharCode(a[d]&127);return l}function V(a,e,t){var l="";t=Math.min(a.length,t);for(var d=e;d<t;++d)l+=String.fromCharCode(a[d]);return l}function Q(a,e,t){var l=a.length;(!e||e<0)&&(e=0),(!t||t<0||t>l)&&(t=l);for(var d="",T=e;T<t;++T)d+=ge[a[T]];return d}function $(a,e,t){for(var l=a.slice(e,t),d="",T=0;T<l.length-1;T+=2)d+=String.fromCharCode(l[T]+l[T+1]*256);return d}i.prototype.slice=function(e,t){var l=this.length;e=~~e,t=t===void 0?l:~~t,e<0?(e+=l,e<0&&(e=0)):e>l&&(e=l),t<0?(t+=l,t<0&&(t=0)):t>l&&(t=l),t<e&&(t=e);var d=this.subarray(e,t);return Object.setPrototypeOf(d,i.prototype),d};function q(a,e,t){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+e>t)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,l){e=e>>>0,t=t>>>0,l||q(e,t,this.length);for(var d=this[e],T=1,b=0;++b<t&&(T*=256);)d+=this[e+b]*T;return d},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,l){e=e>>>0,t=t>>>0,l||q(e,t,this.length);for(var d=this[e+--t],T=1;t>0&&(T*=256);)d+=this[e+--t]*T;return d},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e=e>>>0,t||q(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||q(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||q(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||q(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,l){e=e>>>0,t=t>>>0,l||q(e,t,this.length);for(var d=this[e],T=1,b=0;++b<t&&(T*=256);)d+=this[e+b]*T;return T*=128,d>=T&&(d-=Math.pow(2,8*t)),d},i.prototype.readIntBE=function(e,t,l){e=e>>>0,t=t>>>0,l||q(e,t,this.length);for(var d=t,T=1,b=this[e+--d];d>0&&(T*=256);)b+=this[e+--d]*T;return T*=128,b>=T&&(b-=Math.pow(2,8*t)),b},i.prototype.readInt8=function(e,t){return e=e>>>0,t||q(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){e=e>>>0,t||q(e,2,this.length);var l=this[e]|this[e+1]<<8;return l&32768?l|4294901760:l},i.prototype.readInt16BE=function(e,t){e=e>>>0,t||q(e,2,this.length);var l=this[e+1]|this[e]<<8;return l&32768?l|4294901760:l},i.prototype.readInt32LE=function(e,t){return e=e>>>0,t||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e=e>>>0,t||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e=e>>>0,t||q(e,4,this.length),k.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e=e>>>0,t||q(e,4,this.length),k.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||q(e,8,this.length),k.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||q(e,8,this.length),k.read(this,e,!1,52,8)};function j(a,e,t,l,d,T){if(!i.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>d||e<T)throw new RangeError('"value" argument is out of bounds');if(t+l>a.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,l,d){if(e=+e,t=t>>>0,l=l>>>0,!d){var T=Math.pow(2,8*l)-1;j(this,e,t,l,T,0)}var b=1,U=0;for(this[t]=e&255;++U<l&&(b*=256);)this[t+U]=e/b&255;return t+l},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,l,d){if(e=+e,t=t>>>0,l=l>>>0,!d){var T=Math.pow(2,8*l)-1;j(this,e,t,l,T,0)}var b=l-1,U=1;for(this[t+b]=e&255;--b>=0&&(U*=256);)this[t+b]=e/U&255;return t+l},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,1,255,0),this[t]=e&255,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},i.prototype.writeIntLE=function(e,t,l,d){if(e=+e,t=t>>>0,!d){var T=Math.pow(2,8*l-1);j(this,e,t,l,T-1,-T)}var b=0,U=1,z=0;for(this[t]=e&255;++b<l&&(U*=256);)e<0&&z===0&&this[t+b-1]!==0&&(z=1),this[t+b]=(e/U>>0)-z&255;return t+l},i.prototype.writeIntBE=function(e,t,l,d){if(e=+e,t=t>>>0,!d){var T=Math.pow(2,8*l-1);j(this,e,t,l,T-1,-T)}var b=l-1,U=1,z=0;for(this[t+b]=e&255;--b>=0&&(U*=256);)e<0&&z===0&&this[t+b+1]!==0&&(z=1),this[t+b]=(e/U>>0)-z&255;return t+l},i.prototype.writeInt8=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},i.prototype.writeInt16LE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},i.prototype.writeInt32LE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,l){return e=+e,t=t>>>0,l||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Z(a,e,t,l,d,T){if(t+l>a.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ue(a,e,t,l,d){return e=+e,t=t>>>0,d||Z(a,e,t,4),k.write(a,e,t,l,23,4),t+4}i.prototype.writeFloatLE=function(e,t,l){return ue(this,e,t,!0,l)},i.prototype.writeFloatBE=function(e,t,l){return ue(this,e,t,!1,l)};function te(a,e,t,l,d){return e=+e,t=t>>>0,d||Z(a,e,t,8),k.write(a,e,t,l,52,8),t+8}i.prototype.writeDoubleLE=function(e,t,l){return te(this,e,t,!0,l)},i.prototype.writeDoubleBE=function(e,t,l){return te(this,e,t,!1,l)},i.prototype.copy=function(e,t,l,d){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(l||(l=0),!d&&d!==0&&(d=this.length),t>=e.length&&(t=e.length),t||(t=0),d>0&&d<l&&(d=l),d===l||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),e.length-t<d-l&&(d=e.length-t+l);var T=d-l;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,l,d):Uint8Array.prototype.set.call(e,this.subarray(l,d),t),T},i.prototype.fill=function(e,t,l,d){if(typeof e=="string"){if(typeof t=="string"?(d=t,t=0,l=this.length):typeof l=="string"&&(d=l,l=this.length),d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!i.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(e.length===1){var T=e.charCodeAt(0);(d==="utf8"&&T<128||d==="latin1")&&(e=T)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<l)throw new RangeError("Out of range index");if(l<=t)return this;t=t>>>0,l=l===void 0?this.length:l>>>0,e||(e=0);var b;if(typeof e=="number")for(b=t;b<l;++b)this[b]=e;else{var U=i.isBuffer(e)?e:i.from(e,d),z=U.length;if(z===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(b=0;b<l-t;++b)this[b+t]=U[b%z]}return this};var fe=/[^+/0-9A-Za-z-_]/g;function ce(a){if(a=a.split("=")[0],a=a.trim().replace(fe,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function re(a,e){e=e||1/0;for(var t,l=a.length,d=null,T=[],b=0;b<l;++b){if(t=a.charCodeAt(b),t>55295&&t<57344){if(!d){if(t>56319){(e-=3)>-1&&T.push(239,191,189);continue}else if(b+1===l){(e-=3)>-1&&T.push(239,191,189);continue}d=t;continue}if(t<56320){(e-=3)>-1&&T.push(239,191,189),d=t;continue}t=(d-55296<<10|t-56320)+65536}else d&&(e-=3)>-1&&T.push(239,191,189);if(d=null,t<128){if((e-=1)<0)break;T.push(t)}else if(t<2048){if((e-=2)<0)break;T.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;T.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;T.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return T}function le(a){for(var e=[],t=0;t<a.length;++t)e.push(a.charCodeAt(t)&255);return e}function se(a,e){for(var t,l,d,T=[],b=0;b<a.length&&!((e-=2)<0);++b)t=a.charCodeAt(b),l=t>>8,d=t%256,T.push(d),T.push(l);return T}function ne(a){return F.toByteArray(ce(a))}function ee(a,e,t,l){for(var d=0;d<l&&!(d+t>=e.length||d>=a.length);++d)e[d+t]=a[d];return d}function J(a,e){return a instanceof e||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===e.name}function ie(a){return a!==a}var ge=(function(){for(var a="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var l=t*16,d=0;d<16;++d)e[l+d]=a[t]+a[d];return e})()})(Ce)),Ce}var Be,Ze;function _t(){if(Ze)return Be;Ze=1;function E(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(r){return typeof r}:E=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},E(n)}function F(n,u){if(!(n instanceof u))throw new TypeError("Cannot call a class as a function")}function k(n,u){for(var r=0;r<u.length;r++){var c=u[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,c.key,c)}}function I(n,u,r){return u&&k(n.prototype,u),r&&k(n,r),n}function C(n,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(u&&u.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),u&&x(n,u)}function x(n,u){return x=Object.setPrototypeOf||function(c,y){return c.__proto__=y,c},x(n,u)}function R(n){var u=S();return function(){var c=_(n),y;if(u){var w=_(this).constructor;y=Reflect.construct(c,arguments,w)}else y=c.apply(this,arguments);return i(this,y)}}function i(n,u){return u&&(E(u)==="object"||typeof u=="function")?u:p(n)}function p(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(n){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_(n)}function m(n,u,r){return u in n?Object.defineProperty(n,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[u]=r,n}var h=at,g=dt(),s=g.Buffer,v=pe(),o=K(),f=(function(n){C(r,n);var u=R(r);function r(c){var y;return F(this,r),y=u.call(this),m(p(y),"_path",void 0),m(p(y),"_fileData",void 0),y._path=c,y._fileData=new v,y}return I(r,[{key:"getByteAt",value:function(y){return this._fileData.getByteAt(y)}},{key:"_init",value:function(y){var w=this;h.stat(w._path).then(function(A){w._size=A.size,y.onSuccess()}).catch(function(A){y.onError({type:"fs",info:A})})}},{key:"loadRange",value:function(y,w){var A=this._fileData,B=y[1]-y[0]+1,O=w.onSuccess,P=w.onError||function(D){};h.read(this._path,B,y[0],{encoding:"base64"}).then(function(D){var M=new s(D,"base64"),N=Array.prototype.slice.call(M,0,B);A.addData(y[0],N),O()}).catch(function(D){P({type:"fs",info:D})})}}],[{key:"canReadFile",value:function(y){return typeof y=="string"&&!/^[a-z]+:\/\//i.test(y)}}]),r})(o);return Be=f,Be}const mt={},Rt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"})),St=nt(Rt);var Oe,$e;function wt(){if($e)return Oe;$e=1;function E(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(n){return typeof n}:E=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},E(o)}function F(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")}function k(o,f){for(var n=0;n<f.length;n++){var u=f[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}function I(o,f,n){return f&&k(o.prototype,f),n&&k(o,n),o}function C(o,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(f&&f.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),f&&x(o,f)}function x(o,f){return x=Object.setPrototypeOf||function(u,r){return u.__proto__=r,u},x(o,f)}function R(o){var f=S();return function(){var u=_(o),r;if(f){var c=_(this).constructor;r=Reflect.construct(u,arguments,c)}else r=u.apply(this,arguments);return i(this,r)}}function i(o,f){return f&&(E(f)==="object"||typeof f=="function")?f:p(o)}function p(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(o){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_(o)}function m(o,f,n){return f in o?Object.defineProperty(o,f,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[f]=n,o}var h=St,g=pe(),s=K(),v=(function(o){C(n,o);var f=R(n);function n(u){var r;return F(this,n),r=f.call(this),m(p(r),"_path",void 0),m(p(r),"_fileData",void 0),r._path=u,r._fileData=new g,r}return I(n,[{key:"getByteAt",value:function(r){return this._fileData.getByteAt(r)}},{key:"_init",value:function(r){var c=this;h.stat(c._path,function(y,w){y?r.onError&&r.onError({type:"fs",info:y}):(c._size=w.size,r.onSuccess())})}},{key:"loadRange",value:function(r,c){var y=-1,w=this._fileData,A=r[1]-r[0]+1,B=c.onSuccess,O=c.onError||function(N){};if(w.hasDataRange(r[0],r[1])){process.nextTick(B);return}var P=function(L,X){if(L){O({type:"fs",info:L});return}y=X;var Y=new Buffer(A);h.read(X,Y,0,A,r[0],D)},D=function(L,X,Y){if(h.close(y,function(V){V&&console.error(V)}),L){O({type:"fs",info:L});return}M(Y),B()},M=function(L){var X=Array.prototype.slice.call(L,0,A);w.addData(r[0],X)};h.open(this._path,"r",void 0,P)}}],[{key:"canReadFile",value:function(r){return typeof r=="string"&&!/^[a-z]+:\/\//i.test(r)}}]),n})(s);return Oe=v,Oe}var Ie,Qe;function Tt(){if(Qe)return Ie;Qe=1;function E(u,r){if(!(u instanceof r))throw new TypeError("Cannot call a class as a function")}function F(u,r){for(var c=0;c<r.length;c++){var y=r[c];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(u,y.key,y)}}function k(u,r,c){return r&&F(u.prototype,r),c&&F(u,c),u}function I(u,r,c){return r in u?Object.defineProperty(u,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[r]=c,u}K();var C=ft(),x=ct(),R=tt();oe();var i=lt(),p=ht(),S=yt(),_=pt(),m=[],h=[];function g(u,r){new v(u).read(r)}function s(u,r){var c=u.offset>=0&&u.offset+u.length>=r,y=u.offset<0&&(-u.offset>r||u.offset+u.length>0);return!(c||y)}var v=(function(){function u(r){E(this,u),I(this,"_file",void 0),I(this,"_tagsToRead",void 0),I(this,"_fileReader",void 0),I(this,"_tagReader",void 0),this._file=r}return k(u,[{key:"setTagsToRead",value:function(c){return this._tagsToRead=c,this}},{key:"setFileReader",value:function(c){return this._fileReader=c,this}},{key:"setTagReader",value:function(c){return this._tagReader=c,this}},{key:"read",value:function(c){var y=this._getFileReader(),w=new y(this._file),A=this;w.init({onSuccess:function(){A._getTagReader(w,{onSuccess:function(P){new P(w).setTagsToRead(A._tagsToRead).read(c)},onError:c.onError})},onError:c.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var c=0;c<m.length;c++)if(m[c].canReadFile(this._file))return m[c];throw new Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(c,y){if(this._tagReader){var w=this._tagReader;setTimeout(function(){y.onSuccess(w)},1)}else this._findTagReader(c,y)}},{key:"_findTagReader",value:function(c,y){for(var w=[],A=[],B=c.getSize(),O=0;O<h.length;O++){var P=h[O].getTagIdentifierByteRange();s(P,B)&&(P.offset>=0&&P.offset<B/2||P.offset<0&&P.offset<-B/2?w.push(h[O]):A.push(h[O]))}var D=!1,M={onSuccess:function(){if(!D){D=!0;return}for(var L=0;L<h.length;L++){var X=h[L].getTagIdentifierByteRange();if(s(X,B)){try{var Y=c.getBytesAt(X.offset>=0?X.offset:X.offset+B,X.length)}catch(V){y.onError&&y.onError({type:"fileReader",info:V.message});return}if(h[L].canReadTagFormat(Y)){y.onSuccess(h[L]);return}}}y.onError&&y.onError({type:"tagFormat",info:"No suitable tag reader found"})},onError:y.onError};this._loadTagIdentifierRanges(c,w,M),this._loadTagIdentifierRanges(c,A,M)}},{key:"_loadTagIdentifierRanges",value:function(c,y,w){if(y.length===0){setTimeout(w.onSuccess,1);return}for(var A=[Number.MAX_VALUE,0],B=c.getSize(),O=0;O<y.length;O++){var P=y[O].getTagIdentifierByteRange(),D=P.offset>=0?P.offset:P.offset+B,M=D+P.length-1;A[0]=Math.min(D,A[0]),A[1]=Math.max(M,A[1])}c.loadRange(A,w)}}]),u})(),o=(function(){function u(){E(this,u)}return k(u,null,[{key:"addFileReader",value:function(c){return m.push(c),u}},{key:"addTagReader",value:function(c){return h.push(c),u}},{key:"removeTagReader",value:function(c){var y=h.indexOf(c);return y>=0&&h.splice(y,1),u}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){C.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(c){C.setConfig({disallowedXhrHeaders:c})}},{key:"setXhrTimeoutInSec",value:function(c){C.setConfig({timeoutInSec:c})}}]),u})();if(o.addFileReader(C).addFileReader(x).addFileReader(R).addTagReader(p).addTagReader(i).addTagReader(S).addTagReader(_),typeof process<"u"&&!process.browser)if(typeof navigator<"u"&&navigator.product==="ReactNative"){var f=_t();o.addFileReader(f)}else{var n=wt();o.addFileReader(n)}return Ie={read:g,Reader:v,Config:o},Ie}var rt=Tt();const At=it(rt),xt=ot({__proto__:null,default:At},[rt]);export{xt as j};
