import{r as u,I as W,d as G,e as U,f as X}from"./iframe-BIFQF2Gn.js";import{s as Y}from"./index-CVo6b5oP.js";const $=(e,n,a,l)=>{const i=[a,{code:n,...l||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);g(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)},T={},P=(e,n,a,l)=>{g(a)&&T[a]||(g(a)&&(T[a]=new Date),$(e,n,a,l))},j=(e,n)=>()=>{if(e.isInitialized)n();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),n()};e.on("initialized",a)}},C=(e,n,a)=>{e.loadNamespaces(n,j(e,a))},E=(e,n,a,l)=>{if(g(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(n)>-1)return C(e,a,l);a.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(n,j(e,l))},q=(e,n,a={})=>!n.languages||!n.languages.length?(P(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(e,{lng:a.lng,precheck:(l,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&l.services.backendConnector.backend&&l.isLanguageChangingTo&&!i(l.isLanguageChangingTo,e))return!1}}),g=e=>typeof e=="string",B=e=>typeof e=="object"&&e!==null,H=(e,n)=>g(n)?n:B(n)&&g(n.defaultValue)?n.defaultValue:Array.isArray(e)?e[e.length-1]:e,J={t:H,ready:!1},K=()=>()=>{},D=(e,n={})=>{const{i18n:a}=n,{i18n:l,defaultNS:i}=u.useContext(W)||{},t=a||l||X();t&&!t.reportNamespaces&&(t.reportNamespaces=new G),t||P(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const d=u.useMemo(()=>({...U(),...t?.options?.react,...n}),[t,n]),{useSuspense:h,keyPrefix:m}=d,x=e||i||t?.options?.defaultNS,O=g(x)?[x]:x||["translation"],f=u.useMemo(()=>O,O);t?.reportNamespaces?.addUsedNamespaces?.(f);const R=u.useRef(0),k=u.useCallback(s=>{if(!t)return K;const{bindI18n:r,bindI18nStore:o}=d,c=()=>{R.current+=1,s()};return r&&t.on(r,c),o&&t.store.on(o,c),()=>{r&&r.split(" ").forEach(w=>t.off(w,c)),o&&o.split(" ").forEach(w=>t.store.off(w,c))}},[t,d]),_=u.useRef(),L=u.useCallback(()=>{if(!t)return J;const s=!!(t.isInitialized||t.initializedStoreOnce)&&f.every(M=>q(M,t,d)),r=n.lng||t.language,o=R.current,c=_.current;if(c&&c.ready===s&&c.lng===r&&c.keyPrefix===m&&c.revision===o)return c;const I={t:t.getFixedT(r,d.nsMode==="fallback"?f:f[0],m),ready:s,lng:r,keyPrefix:m,revision:o};return _.current=I,I},[t,f,m,d,n.lng]),[z,A]=u.useState(0),{t:N,ready:p}=Y.useSyncExternalStore(k,L,L);u.useEffect(()=>{if(t&&!p&&!h){const s=()=>A(r=>r+1);n.lng?E(t,n.lng,f,s):C(t,f,s)}},[t,n.lng,f,p,h,z]);const y=t||{},b=u.useRef(null),S=u.useRef(),v=s=>{const r=Object.getOwnPropertyDescriptors(s);r.__original&&delete r.__original;const o=Object.create(Object.getPrototypeOf(s),r);if(!Object.prototype.hasOwnProperty.call(o,"__original"))try{Object.defineProperty(o,"__original",{value:s,writable:!1,enumerable:!1,configurable:!1})}catch{}return o},F=u.useMemo(()=>{const s=y,r=s?.language;let o=s;s&&(b.current&&b.current.__original===s?S.current!==r?(o=v(s),b.current=o,S.current=r):o=b.current:(o=v(s),b.current=o,S.current=r));const c=[N,o,p];return c.t=N,c.i18n=o,c.ready=p,c},[N,y,p,y.resolvedLanguage,y.language,y.languages]);if(t&&h&&!p)throw new Promise(s=>{const r=()=>s();n.lng?E(t,n.lng,f,r):C(t,f,r)});return F};export{D as u};
