import{j as o}from"./jsx-runtime-u17CrQMm.js";import{r as t}from"./iframe-Bvmj2LPw.js";import{c as N}from"./index-BwPY9p3m.js";const C=({value:i,defaultValue:x=0,min:r=0,max:n=100,step:m=1,disabled:l=!1,onChange:h,onAfterChange:D,className:I,name:R,label:w,id:X,...A})=>{const u=i!==void 0,[M,k]=t.useState(x),c=u?i:M,T=t.useRef(null),V=t.useRef(!1),B=t.useId(),E=`wim-slider-label-${X||B}`,S=t.useCallback((e,a,s)=>Math.max(a,Math.min(e,s)),[]),j=t.useCallback(e=>{const a=Math.round((e-r)/m);return S(r+a*m,r,n)},[S,r,n,m]),_=t.useCallback(e=>{if(!T.current)return r;const a=T.current.getBoundingClientRect(),s=S((e-a.left)/a.width,0,1),K=r+s*(n-r);return j(K)},[j,S,n,r]),q=e=>{if(l)return;V.current=!0;const a="touches"in e?e.touches[0].clientX:e.clientX,s=_(a);u||k(s),h?.(s),e.preventDefault()},p=t.useCallback(e=>{if(!V.current||l)return;const a="touches"in e?e.touches[0].clientX:e.clientX,s=_(a);u||k(s),h?.(s)},[l,u,h,_]),f=t.useCallback(()=>{V.current&&(V.current=!1,D?.(u?i:M))},[u,i,M,D]);t.useEffect(()=>(document.addEventListener("mousemove",p),document.addEventListener("mouseup",f),document.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("touchend",f),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",f)}),[p,f]);const O=e=>{if(l)return;let a=c;if(e.key==="ArrowLeft"||e.key==="ArrowDown")a=Math.max(r,c-m);else if(e.key==="ArrowRight"||e.key==="ArrowUp")a=Math.min(n,c+m);else if(e.key==="Home")a=r;else if(e.key==="End")a=n;else return;u||k(a),h?.(a),e.preventDefault()},L=(c-r)/(n-r)*100,{"aria-label":P,"aria-labelledby":$,...G}=A;return o.jsxs("div",{className:N("wim-slider-container",I),children:[w&&o.jsx("span",{id:E,className:"wim-label",style:{display:"block",marginBottom:"8px"},children:w}),o.jsxs("div",{className:N("wim-slider",l&&"wim-slider--disabled"),onMouseDown:q,onTouchStart:q,...G,children:[o.jsxs("div",{className:"wim-slider__track-container",ref:T,children:[o.jsx("div",{className:"wim-slider__track",style:{width:`${L}%`}}),o.jsx("div",{className:"wim-slider__thumb",style:{left:`${L}%`},role:"slider","aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":c,"aria-disabled":l,"aria-labelledby":w?E:$,"aria-label":w?void 0:P,tabIndex:l?-1:0,onKeyDown:O})]}),o.jsx("input",{type:"hidden",name:R,value:c})]})]})};C.__docgenInfo={description:"ユーザーが値の範囲から1つの値を選択するためのスライダーコンポーネント。",methods:[],displayName:"Slider",props:{value:{required:!1,tsType:{name:"number"},description:"現在の値"},defaultValue:{required:!1,tsType:{name:"number"},description:"デフォルトの値（非制御時）",defaultValue:{value:"0",computed:!1}},min:{required:!1,tsType:{name:"number"},description:"最小値",defaultValue:{value:"0",computed:!1}},max:{required:!1,tsType:{name:"number"},description:"最大値",defaultValue:{value:"100",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"ステップ値",defaultValue:{value:"1",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"無効化フラグ",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"値変更時のコールバック"},onAfterChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:"ドラッグ終了時のコールバック"},className:{required:!1,tsType:{name:"string"},description:"追加のクラス名"},name:{required:!1,tsType:{name:"string"},description:"名前の属性"},label:{required:!1,tsType:{name:"string"},description:"アクセシビリティ用のラベル"},id:{required:!1,tsType:{name:"string"},description:"カスタムID"}}};const U={title:"Component/Pickers & Sliders/Slider",component:C,argTypes:{onChange:{action:"changed"},onAfterChange:{action:"afterChanged"}}},v={args:{defaultValue:50}},g={args:{defaultValue:30,disabled:!0}},y={args:{min:-50,max:50,defaultValue:0}},b={args:{min:0,max:100,step:10,defaultValue:20}},d=()=>{const[i,x]=t.useState(25);return o.jsx(C,{value:i,onChange:x})};d.__docgenInfo={description:"",methods:[],displayName:"Controlled"};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  args: {
    defaultValue: 50
  }
}`,...v.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  args: {
    defaultValue: 30,
    disabled: true
  }
}`,...g.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  args: {
    min: -50,
    max: 50,
    defaultValue: 0
  }
}`,...y.parameters?.docs?.source}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  args: {
    min: 0,
    max: 100,
    step: 10,
    defaultValue: 20
  }
}`,...b.parameters?.docs?.source}}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`() => {
  const [val, setVal] = useState(25);
  return <Slider value={val} onChange={setVal} />;
}`,...d.parameters?.docs?.source}}};const z=["Default","Disabled","MinMax","Step","Controlled"],W=Object.freeze(Object.defineProperty({__proto__:null,Controlled:d,Default:v,Disabled:g,MinMax:y,Step:b,__namedExportsOrder:z,default:U},Symbol.toStringTag,{value:"Module"}));export{d as C,g as D,y as M,W as S,b as a};
