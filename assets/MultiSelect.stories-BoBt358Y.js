import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as o}from"./iframe-Dgvn1YDu.js";import{c as g}from"./index-CZyd2_qg.js";import{I as O}from"./Icon--zs9NUy0.js";import{C as $}from"./Chip-On5mloSo.js";const C=({options:x=[],value:j,onChange:p,placeholder:D="Select options...",label:n,className:E,disabled:l=!1,defaultValue:M=[],id:_,...A})=>{const[r,f]=o.useState(!1),[L,I]=o.useState(M),v=o.useRef(null),z=o.useId(),y=_||z,k=`wim-multiselect-list-${y}`,w=`wim-multiselect-label-${y}`,q=`wim-multiselect-trigger-${y}`,h=j!==void 0,i=h?j:L;o.useEffect(()=>{const e=a=>{v.current&&!v.current.contains(a.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const T=e=>{l||e.target.closest(".wim-multiselect-badge-remove")||f(!r)},V=e=>{if(l)return;let a;i?.includes(e)?a=i.filter(s=>s!==e):a=[...i||[],e],h||I(a),p&&p(a)},R=(e,a)=>{if(e.stopPropagation(),l)return;const s=(i||[]).filter(W=>W!==a);h||I(s),p&&p(s)},S=x.filter(e=>i?.includes(e.value)),{"aria-label":B,"aria-labelledby":N,"aria-describedby":F,...P}=A;return t.jsxs("div",{className:g("wim-multiselect",E),ref:v,...P,children:[n&&t.jsx("label",{id:w,htmlFor:q,className:"wim-label",children:n}),t.jsxs("div",{id:q,className:g("wim-multiselect-trigger",r&&"wim-multiselect-trigger--open",l&&"wim-multiselect-trigger--disabled"),onClick:T,tabIndex:l?-1:0,role:"combobox","aria-expanded":r,"aria-haspopup":"listbox","aria-controls":r?k:void 0,"aria-disabled":l,"aria-labelledby":n?w:N,"aria-label":n?void 0:B||D,"aria-describedby":F,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),T(e)),e.key==="ArrowDown"&&!r&&(e.preventDefault(),f(!0)),e.key==="Escape"&&r&&(e.preventDefault(),f(!1))},children:[t.jsx("div",{className:g("wim-multiselect-value",S.length===0&&"wim-multiselect-value--placeholder"),children:S.length>0?S.map(e=>t.jsx($,{label:e.label,size:"small",color:"neutral",variant:"solid",onDelete:l?void 0:a=>R(a,e.value),className:"wim-multiselect-badge"},e.value)):D}),t.jsx("div",{className:"wim-multiselect-icon",children:t.jsx(O,{name:"ChevronDownIcon",size:"small"})})]}),r&&!l&&t.jsx("ul",{id:k,className:"wim-multiselect-list",role:"listbox","aria-multiselectable":"true","aria-labelledby":n?w:N||void 0,children:x.map(e=>{const a=i?.includes(e.value);return t.jsxs("li",{className:g("wim-multiselect-option",a&&"wim-multiselect-option--selected",e.disabled&&"wim-multiselect-option--disabled"),onClick:()=>!e.disabled&&V(e.value),role:"option","aria-selected":a,"aria-disabled":e.disabled,tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&!e.disabled&&(s.preventDefault(),V(e.value))},children:[t.jsx("span",{children:e.label}),a&&t.jsx(O,{name:"CheckIcon",size:"small"})]},e.value)})})]})};C.__docgenInfo={description:"ユーザーが定義済みの選択肢から複数を選択するためのドロップダウンメニュー。",methods:[],displayName:"MultiSelect",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"MultiSelectOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},value:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select options..."',computed:!1}},label:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultValue:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},id:{required:!1,tsType:{name:"string"},description:""}}};const K={title:"Components/Selection Controls/MultiSelect",component:C,parameters:{layout:"centered",docs:{description:{component:"ユーザーが定義済みの選択肢から複数を選択するためのドロップダウンメニュー。"}}},tags:[],argTypes:{onChange:{action:"changed"}}},b=[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"},{label:"Orange",value:"orange"},{label:"Grape",value:"grape"},{label:"Disabled Option",value:"disabled",disabled:!0}],c={args:{options:b,placeholder:"Select fruits..."}},u={args:{label:"Favorites",options:b,placeholder:"Select..."}},d={args:{options:b,defaultValue:["apple","orange"]}},m={args:{options:b,disabled:!0,defaultValue:["banana"]}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    placeholder: "Select fruits..."
  }
}`,...c.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    label: "Favorites",
    options: options,
    placeholder: "Select..."
  }
}`,...u.parameters?.docs?.source}}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    defaultValue: ["apple", "orange"]
  }
}`,...d.parameters?.docs?.source}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    disabled: true,
    defaultValue: ["banana"]
  }
}`,...m.parameters?.docs?.source}}};const G=["Default","WithLabel","MultipleSelected","Disabled"],Y=Object.freeze(Object.defineProperty({__proto__:null,Default:c,Disabled:m,MultipleSelected:d,WithLabel:u,__namedExportsOrder:G,default:K},Symbol.toStringTag,{value:"Module"}));export{c as D,Y as M,u as W,d as a,m as b};
