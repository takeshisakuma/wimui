import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as a}from"./iframe-n4D-bytZ.js";import{r as _}from"./index-DsCNz1Ak.js";import{c as q}from"./index-PgZOI6Ef.js";import{I as w}from"./Icon-MCh7-02j.js";import{F as A}from"./FocusTrap-Dh6sWHAq.js";const I=a.createContext(void 0),j=()=>{const t=a.useContext(I);if(!t)throw new Error("CommandPalette sub-components must be used within a CommandPalette");return t},C=({children:t,open:n,onOpenChange:l})=>{const[p,d]=a.useState(!1),[u,h]=a.useState(""),[r,s]=a.useState(0),c=a.useRef(0),f=n!==void 0,i=f?n:p,x=a.useCallback(o=>{f||d(o),l?.(o),o||(h(""),s(0))},[f,l]),T=a.useCallback(()=>{const o=c.current;return c.current+=1,o},[]),E=a.useCallback(()=>{c.current-=1},[]);return c.current=0,a.useEffect(()=>{const o=m=>{(m.metaKey||m.ctrlKey)&&m.key==="k"&&(m.preventDefault(),x(!i)),m.key==="Escape"&&i&&x(!1)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[i,x]),i?_.createPortal(e.jsx(I.Provider,{value:{open:i,onOpenChange:x,search:u,setSearch:h,activeIndex:r,setActiveIndex:s,itemCount:c.current,registerItem:T,unregisterItem:E},children:e.jsx("div",{className:"wim-command-palette-overlay",onClick:()=>x(!1),children:e.jsx(A,{active:i,autoFocus:!0,children:e.jsx("div",{className:"wim-command-palette-content",onClick:o=>o.stopPropagation(),onKeyDown:o=>{o.key==="ArrowDown"?(o.preventDefault(),s(m=>(m+1)%c.current)):o.key==="ArrowUp"&&(o.preventDefault(),s(m=>(m-1+c.current)%c.current))},children:t})})})}),document.body):null},b=({placeholder:t="Search commands...",value:n,onChange:l})=>{const{search:p,setSearch:d,setActiveIndex:u}=j(),h=r=>{const s=r.target.value;d(s),u(0),l?.(s)};return e.jsxs("div",{className:"wim-command-palette-input-wrapper",children:[e.jsx(w,{name:"SearchIcon",size:"small"}),e.jsx("input",{className:"wim-command-palette-input",placeholder:t,value:n??p,onChange:h,autoFocus:!0})]})},k=({children:t})=>e.jsx("div",{className:"wim-command-palette-list",children:t}),N=({children:t,heading:n})=>e.jsxs("div",{className:"wim-command-palette-group",children:[n&&e.jsx("div",{className:"wim-command-palette-group-heading",children:n}),t]}),y=({children:t,onSelect:n,icon:l,shortcut:p,disabled:d})=>{const{activeIndex:u,setActiveIndex:h,registerItem:r,onOpenChange:s}=j(),[c]=a.useState(()=>r()),f=u===c;return a.useEffect(()=>{if(f&&!d){const i=x=>{x.key==="Enter"&&(n?.(),s(!1))};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)}},[f,d,n,s]),e.jsxs("div",{className:q("wim-command-palette-item",{"wim-command-palette-item--active":f,"wim-command-palette-item--disabled":d}),onMouseEnter:()=>!d&&h(c),onClick:()=>{d||(n?.(),s(!1))},children:[l&&e.jsx("div",{className:"wim-command-palette-item-icon",children:l}),e.jsx("div",{className:"wim-command-palette-item-label",children:t}),p&&e.jsx("div",{className:"wim-command-palette-item-shortcut",children:p.map(i=>e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:i},i))})]})},S=({children:t="No results found."})=>{const{itemCount:n}=j();return n>0?null:e.jsx("div",{className:"wim-command-palette-empty",children:t})},P=({children:t})=>e.jsx("div",{className:"wim-command-palette-footer",children:t});b.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteInput",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Search commands..."',computed:!1}},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};k.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteList",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};N.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteGroup",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},heading:{required:!1,tsType:{name:"string"},description:""}}};y.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteItem",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},shortcut:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};S.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteEmpty",props:{children:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'"No results found."',computed:!1}}}};P.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteFooter",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const D={title:"Component/Overlays/CommandPalette",component:C,parameters:{layout:"fullscreen"}},L=()=>{const[t,n]=a.useState(!1),[l,p]=a.useState(""),u=[{id:"1",label:"New Project",icon:"CheckIcon",group:"Actions",shortcut:["⌘","N"]},{id:"2",label:"Open Project",icon:"ChevronRightIcon",group:"Actions",shortcut:["⌘","O"]},{id:"3",label:"Save File",icon:"UploadIcon",group:"Actions",shortcut:["⌘","S"]},{id:"4",label:"Settings",icon:"SquareIcon",group:"Settings",shortcut:["⌘",","]},{id:"5",label:"Profile",icon:"CircleIcon",group:"Settings"},{id:"6",label:"Theme: Dark",icon:"EyeOffIcon",group:"Preferences"},{id:"7",label:"Theme: Light",icon:"EyeIcon",group:"Preferences"}].filter(r=>r.label.toLowerCase().includes(l.toLowerCase())),h=Array.from(new Set(u.map(r=>r.group)));return e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>n(!0),style:{padding:"10px 20px",background:"var(--wim-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Open Command Palette (⌘K)"}),e.jsxs(C,{open:t,onOpenChange:n,children:[e.jsx(b,{placeholder:"Type a command or search...",onChange:p}),e.jsxs(k,{children:[e.jsx(S,{}),h.map(r=>e.jsx(N,{heading:r,children:u.filter(s=>s.group===r).map(s=>e.jsx(y,{onSelect:()=>console.log(`Selected: ${s.label}`),shortcut:s.shortcut,icon:e.jsx(w,{name:s.icon,size:"small"}),children:s.label},s.id))},r))]}),e.jsxs(P,{children:[e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↵"})," to select"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↑"}),e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↓"})," to navigate"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"esc"})," to close"]})]})]})]})},g={render:()=>e.jsx(L,{})},O=()=>{const[t,n]=a.useState(!1);return e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>n(!0),style:{padding:"10px 20px",background:"var(--wim-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Simple Palette"}),e.jsxs(C,{open:t,onOpenChange:n,children:[e.jsx(b,{placeholder:"Search..."}),e.jsx(k,{children:e.jsxs(N,{heading:"Quick Links",children:[e.jsx(y,{onSelect:()=>{},icon:e.jsx(w,{name:"SearchIcon",size:"small"}),children:"Search Docs"}),e.jsx(y,{onSelect:()=>{},icon:e.jsx(w,{name:"CopyIcon",size:"small"}),children:"Copy Link"}),e.jsx(y,{onSelect:()=>{},icon:e.jsx(w,{name:"StarIcon",size:"small"}),children:"Add to Favorites"})]})})]})]})},v={render:()=>e.jsx(O,{})};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultTemplate />
}`,...g.parameters?.docs?.source}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: () => <LucideIconsTemplate />
}`,...v.parameters?.docs?.source}}};const R=["Default","WithIcons"],V=Object.freeze(Object.defineProperty({__proto__:null,Default:g,WithIcons:v,__namedExportsOrder:R,default:D},Symbol.toStringTag,{value:"Module"}));export{V as C};
