import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as i,R as S}from"./iframe-DoMdGbb4.js";import{r as D}from"./index-Q5gDbRYB.js";import{c as w}from"./index-C2GV6LgO.js";import{I as x}from"./Icon-BBRs4CHx.js";import{F as O}from"./FocusTrap-BtnCN8eM.js";const P=i.createContext(void 0),j=()=>{const t=i.useContext(P);if(!t)throw new Error("CommandPalette sub-components must be used within a CommandPalette");return t},N=({children:t,open:n,onOpenChange:r})=>{const[c,a]=i.useState(!1),[o,s]=i.useState(""),[d,m]=i.useState(0),p=i.useRef(0),h=n!==void 0,l=h?n:c,f=i.useCallback(u=>{h||a(u),r?.(u),u||(s(""),m(0))},[h,r]),A=i.useCallback(()=>{const u=p.current;return p.current+=1,u},[]),R=i.useCallback(()=>{p.current-=1},[]);return p.current=0,i.useEffect(()=>{const u=g=>{(g.metaKey||g.ctrlKey)&&g.key==="k"&&(g.preventDefault(),f(!l)),g.key==="Escape"&&l&&f(!1)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[l,f]),e.jsx(P.Provider,{value:{open:l,onOpenChange:f,search:o,setSearch:s,activeIndex:d,setActiveIndex:m,itemCount:p.current,registerItem:A,unregisterItem:R},children:t})},T=({children:t,asChild:n,className:r})=>{const{onOpenChange:c}=j(),a=o=>{c(!0)};return n&&S.isValidElement(t)?S.cloneElement(t,{onClick:o=>{t.props.onClick?.(o),a()},className:w(r,t.props.className)}):e.jsx("button",{className:w("wim-command-palette-trigger",r),onClick:a,children:t})},_=({children:t,className:n})=>{const{open:r,onOpenChange:c,setActiveIndex:a,itemCount:o}=j();return r?D.createPortal(e.jsx("div",{className:"wim-command-palette-overlay",onClick:()=>c(!1),children:e.jsx(O,{active:r,autoFocus:!0,children:e.jsx("div",{className:w("wim-command-palette-content",n),onClick:s=>s.stopPropagation(),onKeyDown:s=>{s.key==="ArrowDown"?(s.preventDefault(),a(d=>(d+1)%o)):s.key==="ArrowUp"&&(s.preventDefault(),a(d=>(d-1+o)%o))},children:t})})}),document.body):null},b=({placeholder:t="Search commands...",value:n,onChange:r})=>{const{search:c,setSearch:a,setActiveIndex:o}=j(),s=d=>{const m=d.target.value;a(m),o(0),r?.(m)};return e.jsxs("div",{className:"wim-command-palette-input-wrapper",children:[e.jsx(x,{name:"SearchIcon",size:"small"}),e.jsx("input",{className:"wim-command-palette-input",placeholder:t,value:n??c,onChange:s,autoFocus:!0})]})},k=({children:t})=>e.jsx("div",{className:"wim-command-palette-list",children:t}),I=({children:t,heading:n})=>e.jsxs("div",{className:"wim-command-palette-group",children:[n&&e.jsx("div",{className:"wim-command-palette-group-heading",children:n}),t]}),v=({children:t,onSelect:n,icon:r,shortcut:c,disabled:a})=>{const{activeIndex:o,setActiveIndex:s,registerItem:d,onOpenChange:m}=j(),[p]=i.useState(()=>d()),h=o===p;return i.useEffect(()=>{if(h&&!a){const l=f=>{f.key==="Enter"&&(n?.(),m(!1))};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)}},[h,a,n,m]),e.jsxs("div",{className:w("wim-command-palette-item",{"wim-command-palette-item--active":h,"wim-command-palette-item--disabled":a}),onMouseEnter:()=>!a&&s(p),onClick:()=>{a||(n?.(),m(!1))},children:[r&&e.jsx("div",{className:"wim-command-palette-item-icon",children:r}),e.jsx("div",{className:"wim-command-palette-item-label",children:t}),c&&e.jsx("div",{className:"wim-command-palette-item-shortcut",children:c.map(l=>e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:l},l))})]})},q=({children:t="No results found."})=>{const{itemCount:n}=j();return n>0?null:e.jsx("div",{className:"wim-command-palette-empty",children:t})},E=({children:t})=>e.jsx("div",{className:"wim-command-palette-footer",children:t});N.__docgenInfo={description:"",methods:[],displayName:"CommandPalette",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onOpenChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""}}};T.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteTrigger",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},asChild:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};b.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteInput",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Search commands..."',computed:!1}},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};k.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteList",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};I.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteGroup",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},heading:{required:!1,tsType:{name:"string"},description:""}}};v.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteItem",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},shortcut:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};q.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteEmpty",props:{children:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:'"No results found."',computed:!1}}}};E.__docgenInfo={description:"",methods:[],displayName:"CommandPaletteFooter",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const L={title:"Component/Overlays/CommandPalette",component:N,parameters:{layout:"fullscreen"}},z=()=>{const[t,n]=i.useState(""),c=[{id:"1",label:"New Project",icon:"CheckIcon",group:"Actions",shortcut:["⌘","N"]},{id:"2",label:"Open Project",icon:"ChevronRightIcon",group:"Actions",shortcut:["⌘","O"]},{id:"3",label:"Save File",icon:"UploadIcon",group:"Actions",shortcut:["⌘","S"]},{id:"4",label:"Settings",icon:"SquareIcon",group:"Settings",shortcut:["⌘",","]},{id:"5",label:"Profile",icon:"CircleIcon",group:"Settings"},{id:"6",label:"Theme: Dark",icon:"EyeOffIcon",group:"Preferences"},{id:"7",label:"Theme: Light",icon:"EyeIcon",group:"Preferences"}].filter(o=>o.label.toLowerCase().includes(t.toLowerCase())),a=Array.from(new Set(c.map(o=>o.group)));return e.jsx("div",{style:{padding:"100px",textAlign:"center"},children:e.jsxs(N,{children:[e.jsxs(T,{children:[e.jsx(x,{name:"SearchIcon",size:"small"}),e.jsx("span",{children:"Search Commands..."}),e.jsx("kbd",{style:{marginLeft:"12px",fontSize:"0.8em",opacity:.6},children:"⌘K"})]}),e.jsxs(_,{children:[e.jsx(b,{placeholder:"Type a command or search...",onChange:n}),e.jsxs(k,{children:[e.jsx(q,{}),a.map(o=>e.jsx(I,{heading:o,children:c.filter(s=>s.group===o).map(s=>e.jsx(v,{onSelect:()=>console.log(`Selected: ${s.label}`),shortcut:s.shortcut,icon:e.jsx(x,{name:s.icon,size:"small"}),children:s.label},s.id))},o))]}),e.jsxs(E,{children:[e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↵"})," to select"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↑"}),e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"↓"})," to navigate"]}),e.jsxs("div",{className:"wim-command-palette-shortcut-hint",children:[e.jsx("kbd",{className:"wim-kbd wim-kbd--sm",children:"esc"})," to close"]})]})]})]})})},C={render:()=>e.jsx(z,{})},F=()=>{const[t,n]=i.useState(!1);return e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx("button",{onClick:()=>n(!0),style:{padding:"10px 20px",background:"var(--color-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Open Controlled Palette"}),e.jsx(N,{open:t,onOpenChange:n,children:e.jsxs(_,{children:[e.jsx(b,{placeholder:"Search..."}),e.jsx(k,{children:e.jsxs(I,{heading:"Quick Links",children:[e.jsx(v,{onSelect:()=>{},icon:e.jsx(x,{name:"SearchIcon",size:"small"}),children:"Search Docs"}),e.jsx(v,{onSelect:()=>{},icon:e.jsx(x,{name:"CopyIcon",size:"small"}),children:"Copy Link"}),e.jsx(v,{onSelect:()=>{},icon:e.jsx(x,{name:"StarIcon",size:"small"}),children:"Add to Favorites"})]})})]})})]})},y={render:()=>e.jsx(F,{})};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  render: () => <DefaultTemplate />
}`,...C.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  render: () => <ControlledTemplate />
}`,...y.parameters?.docs?.source}}};const K=["Default","Controlled"],B=Object.freeze(Object.defineProperty({__proto__:null,Controlled:y,Default:C,__namedExportsOrder:K,default:L},Symbol.toStringTag,{value:"Module"}));export{B as C};
