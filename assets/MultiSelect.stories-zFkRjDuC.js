import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as n}from"./iframe-BpxzmZ_b.js";import{c as p}from"./index-CdxShSER.js";import{I as k}from"./Icon-HQ9_rTer.js";import{C as _}from"./Chip-Dxp1XHa8.js";const q=({options:y=[],value:h,onChange:d,placeholder:N="Select options...",label:w,className:T,disabled:s=!1,defaultValue:I=[],...M})=>{const[m,S]=n.useState(!1),[O,x]=n.useState(I),g=n.useRef(null),[j]=n.useState(()=>"wim-multiselect-list-"+Math.random().toString(36).substr(2,9)),b=h!==void 0,r=b?h:O;n.useEffect(()=>{const e=a=>{g.current&&!g.current.contains(a.target)&&S(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const D=e=>{s||e.target.closest(".wim-multiselect-badge-remove")||S(!m)},V=e=>{if(s)return;let a;r?.includes(e)?a=r.filter(l=>l!==e):a=[...r||[],e],b||x(a),d&&d(a)},C=(e,a)=>{if(e.stopPropagation(),s)return;const l=(r||[]).filter(E=>E!==a);b||x(l),d&&d(l)},v=y.filter(e=>r?.includes(e.value));return t.jsxs("div",{className:p("wim-multiselect",T),ref:g,...M,children:[w&&t.jsx("label",{className:"wim-label",children:w}),t.jsxs("div",{className:p("wim-multiselect-trigger",m&&"wim-multiselect-trigger--open",s&&"wim-multiselect-trigger--disabled"),onClick:D,tabIndex:s?-1:0,role:"combobox","aria-expanded":m,"aria-haspopup":"listbox","aria-controls":j,"aria-disabled":s,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),D(e))},children:[t.jsx("div",{className:p("wim-multiselect-value",v.length===0&&"wim-multiselect-value--placeholder"),children:v.length>0?v.map(e=>t.jsx(_,{label:e.label,size:"small",color:"neutral",variant:"solid",onDelete:s?void 0:a=>C(a,e.value),className:"wim-multiselect-badge"},e.value)):N}),t.jsx("div",{className:"wim-multiselect-icon",children:t.jsx(k,{name:"ChevronDownIcon",size:"small"})})]}),m&&!s&&t.jsx("ul",{id:j,className:"wim-multiselect-list",role:"listbox","aria-multiselectable":"true",children:y.map(e=>{const a=r?.includes(e.value);return t.jsxs("li",{className:p("wim-multiselect-option",a&&"wim-multiselect-option--selected",e.disabled&&"wim-multiselect-option--disabled"),onClick:()=>!e.disabled&&V(e.value),role:"option","aria-selected":a,"aria-disabled":e.disabled,tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&!e.disabled&&(l.preventDefault(),V(e.value))},children:[t.jsx("span",{children:e.label}),a&&t.jsx(k,{name:"CheckIcon",size:"small"})]},e.value)})})]})};q.__docgenInfo={description:"ユーザーが定義済みの選択肢から複数を選択するためのドロップダウンメニュー。",methods:[],displayName:"MultiSelect",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
    label: string;\r
    value: string;\r
    disabled?: boolean;\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"MultiSelectOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},value:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select options..."',computed:!1}},label:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultValue:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}}}};const A={title:"Component/Selection Controls/MultiSelect",component:q,parameters:{layout:"centered",docs:{description:{component:"ユーザーが定義済みの選択肢から複数を選択するためのドロップダウンメニュー。"}}},tags:[],argTypes:{onChange:{action:"changed"}}},f=[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"},{label:"Orange",value:"orange"},{label:"Grape",value:"grape"},{label:"Disabled Option",value:"disabled",disabled:!0}],i={args:{options:f,placeholder:"Select fruits..."}},o={args:{label:"Favorites",options:f,placeholder:"Select..."}},c={args:{options:f,defaultValue:["apple","orange"]}},u={args:{options:f,disabled:!0,defaultValue:["banana"]}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    placeholder: "Select fruits..."
  }
}`,...i.parameters?.docs?.source}}};o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:`{
  args: {
    label: "Favorites",
    options: options,
    placeholder: "Select..."
  }
}`,...o.parameters?.docs?.source}}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    defaultValue: ["apple", "orange"]
  }
}`,...c.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    options: options,
    disabled: true,
    defaultValue: ["banana"]
  }
}`,...u.parameters?.docs?.source}}};const z=["Default","WithLabel","MultipleSelected","Disabled"],P=Object.freeze(Object.defineProperty({__proto__:null,Default:i,Disabled:u,MultipleSelected:c,WithLabel:o,__namedExportsOrder:z,default:A},Symbol.toStringTag,{value:"Module"}));export{i as D,P as M,o as W,c as a,u as b};
