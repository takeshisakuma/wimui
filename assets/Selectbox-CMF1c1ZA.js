import{j as r}from"./jsx-runtime-u17CrQMm.js";import{r as l,R as X}from"./iframe-BoXBO0MO.js";import{c as v}from"./index-DaS8FBbW.js";import{I as G}from"./Icon-BGLtcWFY.js";const Y=({options:u=[],value:F,onChange:y,placeholder:L="Select an option",label:w,className:M,disabled:p=!1,defaultValue:W,searchable:S=!1,searchPlaceholder:_="Search...",filterOption:V,grouped:j=!1,native:H=!1,...$})=>{const[i,f]=l.useState(!1),[U,A]=l.useState(W||""),[b,x]=l.useState(""),[d,o]=l.useState(-1),I=l.useRef(null),O=l.useRef(null),T=l.useRef(null),k=l.useRef([]),P=l.useRef("wim-selectbox-list-"+Math.random().toString(36).substr(2,9)).current,C=F!==void 0,g=C?F:U,q=l.useMemo(()=>j&&u.length>0&&"options"in u[0]?u.flatMap(a=>a.options):u,[u,j]),s=l.useMemo(()=>{if(!b)return q;const t=V||((e,c)=>e.type!=="separator"&&(e.label||"").toLowerCase().includes(c.toLowerCase()));return q.filter(e=>t(e,b))},[q,b,V]),E=q.find(a=>a.value===g);l.useEffect(()=>{const a=t=>{I.current&&!I.current.contains(t.target)&&(f(!1),x(""),o(-1))};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),l.useEffect(()=>{i&&S&&T.current&&T.current.focus()},[i,S]),l.useEffect(()=>{d>=0&&k.current[d]&&k.current[d]?.scrollIntoView({block:"nearest",behavior:"smooth"})},[d]);const B=()=>{p||(f(!i),i||(x(""),o(-1)))},D=a=>{a.type!=="separator"&&(a.disabled||(!C&&a.value!==void 0&&A(a.value),y&&a.value!==void 0&&y(a.value),f(!1),x(""),o(-1),O.current?.focus()))},K=a=>{if(!p)switch(a.key){case"Enter":case" ":i?d>=0&&s[d]&&D(s[d]):f(!0),a.preventDefault();break;case"Escape":f(!1),x(""),o(-1),O.current?.focus(),a.preventDefault();break;case"ArrowDown":a.preventDefault(),i?o(t=>{let e=t+1;for(e>=s.length&&(e=0);e<s.length&&(s[e]?.disabled||s[e]?.type==="separator");)e++;if(e>=s.length)for(e=0;e<t&&(s[e]?.disabled||s[e]?.type==="separator");)e++;return e<s.length?e:t}):f(!0);break;case"ArrowUp":a.preventDefault(),i&&o(t=>{let e=t-1;for(e<0&&(e=s.length-1);e>=0&&(s[e]?.disabled||s[e]?.type==="separator");)e--;if(e<0)for(e=s.length-1;e>t&&(s[e]?.disabled||s[e]?.type==="separator");)e--;return e>=0?e:t});break;case"Home":i&&(a.preventDefault(),o(0));break;case"End":i&&(a.preventDefault(),o(s.length-1));break}},J=()=>{let a=0;return j&&u.length>0&&"options"in u[0]?u.map((e,c)=>{const N=e.options.filter(n=>n.type==="separator"||!b||(V||((m,h)=>(m.label||"").toLowerCase().includes(h.toLowerCase())))(n,b));return N.length===0?null:r.jsxs(X.Fragment,{children:[r.jsx("li",{className:"wim-selectbox-group-label",role:"presentation",children:e.label}),N.map((n,m)=>{const h=a++;if(n.type==="separator")return r.jsx("li",{className:"wim-selectbox-separator",role:"presentation"},`sep-${c}-${m}`);const Q=h===d,z=g===n.value;return r.jsx("li",{ref:R=>{k.current[h]=R},className:v("wim-selectbox-option",z&&"wim-selectbox-option--selected",n.disabled&&"wim-selectbox-option--disabled",Q&&"wim-selectbox-option--focused"),onClick:R=>{R.stopPropagation(),D(n)},onMouseEnter:()=>o(h),role:"option","aria-selected":z,"aria-disabled":n.disabled,children:n.label},n.value)})]},c)}):s.map((t,e)=>{const c=a++;if(t.type==="separator")return r.jsx("li",{className:"wim-selectbox-separator",role:"presentation"},`sep-${e}`);const N=c===d,n=g===t.value;return r.jsx("li",{ref:m=>{k.current[c]=m},className:v("wim-selectbox-option",n&&"wim-selectbox-option--selected",t.disabled&&"wim-selectbox-option--disabled",N&&"wim-selectbox-option--focused"),onClick:m=>{m.stopPropagation(),D(t)},onMouseEnter:()=>o(c),role:"option","aria-selected":n,"aria-disabled":t.disabled,children:t.label},t.value)})};return H?r.jsxs("div",{className:v("wim-selectbox","wim-selectbox--native",M),children:[w&&r.jsx("label",{className:"wim-label",children:w}),r.jsxs("div",{className:"wim-selectbox-native-wrapper",children:[r.jsxs("select",{className:"wim-selectbox-select",value:g,disabled:p,onChange:a=>{y&&y(a.target.value),C||A(a.target.value)},...$,children:[!g&&r.jsx("option",{value:"",disabled:!0,children:L}),j?u.map((a,t)=>r.jsx("optgroup",{label:a.label,children:a.options.map((e,c)=>e.type==="separator"?r.jsx("hr",{},`hr-${t}-${c}`):r.jsx("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))},t)):u.map((a,t)=>a.type==="separator"?r.jsx("hr",{},`hr-${t}`):r.jsx("option",{value:a.value,disabled:a.disabled,children:a.label},a.value))]}),r.jsx("div",{className:"wim-selectbox-icon",children:r.jsx(G,{name:"ChevronDownIcon",size:"medium"})})]})]}):r.jsxs("div",{className:v("wim-selectbox",M),ref:I,...$,children:[w&&r.jsx("label",{className:"wim-label",children:w}),r.jsxs("div",{className:v("wim-selectbox-trigger",i&&"wim-selectbox-trigger--open",p&&"wim-selectbox-trigger--disabled"),onClick:B,onKeyDown:K,tabIndex:p?-1:0,role:"combobox","aria-expanded":i,"aria-haspopup":"listbox","aria-controls":P,"aria-disabled":p,ref:O,children:[r.jsx("div",{className:v("wim-selectbox-value",!E&&"wim-selectbox-value--placeholder"),children:E?E.label:L}),r.jsx("div",{className:"wim-selectbox-icon",children:r.jsx(G,{name:"ChevronDownIcon",size:"medium"})})]}),i&&!p&&r.jsxs("div",{className:"wim-selectbox-dropdown",children:[S&&r.jsx("div",{className:"wim-selectbox-search",children:r.jsx("input",{ref:T,type:"text",className:"wim-selectbox-search-input",placeholder:_,value:b,onChange:a=>{x(a.target.value),o(-1)},onClick:a=>a.stopPropagation(),onKeyDown:K})}),r.jsx("ul",{id:P,className:"wim-selectbox-list",role:"listbox",children:s.length===0?r.jsx("li",{className:"wim-selectbox-empty",children:"No options found"}):J()})]})]})};Y.__docgenInfo={description:"ユーザーが定義済みの選択肢から1つを選択するためのプルダウンメニュー。",methods:[],displayName:"Selectbox",props:{options:{required:!1,tsType:{name:"union",raw:"SelectboxOption[] | SelectboxOptionGroup[]",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
    label?: string;\r
    value?: string;\r
    disabled?: boolean;\r
    group?: string;\r
    type?: "option" | "separator";\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"group",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:'"option" | "separator"',elements:[{name:"literal",value:'"option"'},{name:"literal",value:'"separator"'}],required:!1}}]}}],raw:"SelectboxOption[]"},{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
    label: string;\r
    options: SelectboxOption[];\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
    label?: string;\r
    value?: string;\r
    disabled?: boolean;\r
    group?: string;\r
    type?: "option" | "separator";\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"group",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:'"option" | "separator"',elements:[{name:"literal",value:'"option"'},{name:"literal",value:'"separator"'}],required:!1}}]}}],raw:"SelectboxOption[]",required:!0}}]}}],raw:"SelectboxOptionGroup[]"}]},description:"",defaultValue:{value:"[]",computed:!1}},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select an option"',computed:!1}},label:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultValue:{required:!1,tsType:{name:"string"},description:""},searchable:{required:!1,tsType:{name:"boolean"},description:"Enable search/filtering functionality",defaultValue:{value:"false",computed:!1}},searchPlaceholder:{required:!1,tsType:{name:"string"},description:"Placeholder text for search input",defaultValue:{value:'"Search..."',computed:!1}},filterOption:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: SelectboxOption, searchValue: string) => boolean",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{\r
    label?: string;\r
    value?: string;\r
    disabled?: boolean;\r
    group?: string;\r
    type?: "option" | "separator";\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"group",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:'"option" | "separator"',elements:[{name:"literal",value:'"option"'},{name:"literal",value:'"separator"'}],required:!1}}]}},name:"option"},{type:{name:"string"},name:"searchValue"}],return:{name:"boolean"}}},description:"Custom filter function"},grouped:{required:!1,tsType:{name:"boolean"},description:"Whether options are grouped",defaultValue:{value:"false",computed:!1}},native:{required:!1,tsType:{name:"boolean"},description:"Whether to use a native select element",defaultValue:{value:"false",computed:!1}}}};export{Y as S};
