import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as d,R as f}from"./iframe-CAZkMdaF.js";import{P as i}from"./index-BoT4MqqS.js";import{I as c}from"./Icon-CAqJuTp2.js";const B=d.createContext(null),$=()=>{const s=d.useContext(B);if(!s)throw new Error("TreeView components must be used within a TreeView");return s},a=({children:s,className:I,multiSelect:b=!1,checkable:w=!1,searchable:_=!1,defaultExpandedValues:o=[],defaultSelectedValues:q=[],defaultCheckedValues:E=[],onCheckedChange:g,width:x})=>{const[h,z]=d.useState(o),[j,m]=d.useState(q),[n,R]=d.useState(E),[V,u]=d.useState(""),D=d.useCallback(t=>{z(l=>l.includes(t)?l.filter(p=>p!==t):[...l,t])},[]),C=d.useCallback(t=>{m(b?l=>l.includes(t)?l.filter(p=>p!==t):[...l,t]:[t])},[b]),N=d.useCallback(t=>{R(l=>{const p=l.includes(t)?l.filter(k=>k!==t):[...l,t];return g?.(p),p})},[g]),L=d.useMemo(()=>({expandedValues:h,selectedValues:j,checkedValues:n,toggleExpand:D,select:C,toggleCheck:N,multiSelect:b,checkable:w,searchQuery:V}),[h,j,n,D,C,N,b,w,V]);return e.jsx(B.Provider,{value:L,children:e.jsxs("div",{className:["wim-tree-view",I].filter(Boolean).join(" "),role:"tree",style:{width:x},children:[_&&e.jsx("div",{className:"wim-tree-view__search",children:e.jsx("input",{type:"text",className:"wim-tree-view__search-input",placeholder:"Search...",value:V,onChange:t=>u(t.target.value)})}),s]})})},S=({value:s,label:I,icon:b,children:w,className:_,disabled:o=!1})=>{const{expandedValues:q,selectedValues:E,checkedValues:g,toggleExpand:x,select:h,toggleCheck:z,checkable:j,searchQuery:m}=$(),n=q.includes(s),R=E.includes(s),V=g.includes(s),u=!!f.Children.count(w),C=!m||(typeof I=="string"?I:"").toLowerCase().includes(m.toLowerCase()),N=f.useMemo(()=>{if(!m||!w)return!1;const r=W=>f.Children.toArray(W).some(P=>{if(!f.isValidElement(P)||P.type!==S)return!1;const A=P.props,O=A.label;return(typeof O=="string"?O:"").toLowerCase().includes(m.toLowerCase())?!0:A.children?r(A.children):!1});return r(w)},[w,m]);if(m&&!C&&!N)return null;const[L,t]=f.useState(!1),[l,p]=f.useState(n),[k,M]=f.useState(n);f.useEffect(()=>{if(n){p(!0);const r=setTimeout(()=>{M(!0)},10);return()=>clearTimeout(r)}else M(!1),t(!0)},[n]);const Q=r=>{r.propertyName==="grid-template-rows"&&!n&&(p(!1),t(!1))},G=()=>{o||h(s)},J=r=>{r.stopPropagation(),!o&&u&&x(s)},K=r=>{r.stopPropagation(),o||z(s)},U=r=>{if(!o)switch(r.key){case"Enter":case" ":r.preventDefault(),h(s);break;case"ArrowRight":u&&!n&&(r.preventDefault(),x(s));break;case"ArrowLeft":u&&n&&(r.preventDefault(),x(s));break}};return e.jsxs("div",{className:["wim-tree-view-item",R&&"wim-tree-view-item--selected",o&&"wim-tree-view-item--disabled",_].filter(Boolean).join(" "),role:"treeitem","aria-selected":R,"aria-expanded":u?n:void 0,"aria-disabled":o,children:[e.jsxs("div",{className:"wim-tree-view-item__label-container",onClick:G,onKeyDown:U,tabIndex:o?-1:0,children:[u&&e.jsx("button",{type:"button",className:`wim-tree-view-item__expand-btn ${n?"wim-tree-view-item__expand-btn--expanded":""}`,onClick:J,disabled:o,"aria-label":n?"Collapse":"Expand",children:e.jsx(c,{name:"ChevronRightIcon",size:"small"})}),!u&&e.jsx("span",{className:"wim-tree-view-item__spacer"}),j&&e.jsx("input",{type:"checkbox",className:"wim-tree-view-item__checkbox",checked:V,onChange:K,disabled:o,onClick:r=>r.stopPropagation()}),b&&e.jsx("span",{className:"wim-tree-view-item__icon",children:b}),e.jsx("span",{className:"wim-tree-view-item__label",children:I})]}),u&&l&&e.jsx("div",{className:`wim-tree-view-item__children ${k?"wim-tree-view-item__children--expanded":""}`,onTransitionEnd:Q,style:{gridTemplateRows:k?"1fr":"0fr"},children:e.jsx("div",{className:"wim-tree-view-item__children-inner",children:w})})]})};a.Item=S;a.propTypes={children:i.node.isRequired,className:i.string,multiSelect:i.bool,defaultExpandedValues:i.arrayOf(i.string),defaultSelectedValues:i.arrayOf(i.string)};S.propTypes={value:i.string.isRequired,label:i.node.isRequired,icon:i.node,children:i.node,className:i.string,disabled:i.bool};a.__docgenInfo={description:"",methods:[{name:"Item",docblock:null,modifiers:["static"],params:[{name:`{\r
    value,\r
    label,\r
    icon,\r
    children,\r
    className,\r
    disabled = false,\r
}: TreeViewItemProps`,optional:!1,type:{name:"signature",type:"object",raw:`{\r
    value: string;\r
    label: React.ReactNode;\r
    icon?: React.ReactNode;\r
    children?: React.ReactNode;\r
    className?: string;\r
    disabled?: boolean;\r
}`,signature:{properties:[{key:"value",value:{name:"string",required:!0}},{key:"label",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"children",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"className",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}}]},alias:"TreeViewItemProps"}}],returns:null}],displayName:"TreeView",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",type:{name:"node"}},className:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},multiSelect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1},type:{name:"bool"}},checkable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultExpandedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"string"}}},defaultSelectedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"string"}}},defaultCheckedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onCheckedChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(checked: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"checked"}],return:{name:"void"}}},description:""},width:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""}}};S.__docgenInfo={description:"",methods:[],displayName:"TreeViewItem",props:{value:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",type:{name:"node"}},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",type:{name:"node"}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",type:{name:"node"}},className:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1},type:{name:"bool"}}}};const F={title:"Component/Data Display/TreeView",component:a,parameters:{layout:"centered"}},T={args:{width:"400px"},render:s=>e.jsxs(a,{...s,defaultExpandedValues:["1","2"],children:[e.jsxs(a.Item,{value:"1",label:"Documents",icon:e.jsx(c,{name:"CircleIcon",size:"small"}),children:[e.jsxs(a.Item,{value:"1-1",label:"Work",icon:e.jsx(c,{name:"SquareIcon",size:"small"}),children:[e.jsx(a.Item,{value:"1-1-1",label:"Project A.docx",icon:e.jsx(c,{name:"CopyIcon",size:"small"})}),e.jsx(a.Item,{value:"1-1-2",label:"Project B.docx",icon:e.jsx(c,{name:"CopyIcon",size:"small"})})]}),e.jsx(a.Item,{value:"1-2",label:"Personal",icon:e.jsx(c,{name:"SquareIcon",size:"small"}),children:e.jsx(a.Item,{value:"1-2-1",label:"Photos",icon:e.jsx(c,{name:"CircleIcon",size:"small"})})})]}),e.jsxs(a.Item,{value:"2",label:"Music",icon:e.jsx(c,{name:"CircleIcon",size:"small"}),children:[e.jsx(a.Item,{value:"2-1",label:"Rock",icon:e.jsx(c,{name:"SquareIcon",size:"small"})}),e.jsx(a.Item,{value:"2-2",label:"Jazz",icon:e.jsx(c,{name:"SquareIcon",size:"small"})})]}),e.jsx(a.Item,{value:"3",label:"Videos",icon:e.jsx(c,{name:"CircleIcon",size:"small"})})]})},y={render:()=>e.jsxs(a,{multiSelect:!0,defaultExpandedValues:["1"],children:[e.jsxs(a.Item,{value:"1",label:"System",children:[e.jsx(a.Item,{value:"1-1",label:"Logs"}),e.jsx(a.Item,{value:"1-2",label:"Config"})]}),e.jsxs(a.Item,{value:"2",label:"Users",children:[e.jsx(a.Item,{value:"2-1",label:"Admin"}),e.jsx(a.Item,{value:"2-2",label:"Guest"})]})]})},v={render:()=>e.jsxs(a,{defaultExpandedValues:["1"],children:[e.jsxs(a.Item,{value:"1",label:"Root (Enabled)",children:[e.jsx(a.Item,{value:"1-1",label:"Disabled Item",disabled:!0}),e.jsx(a.Item,{value:"1-2",label:"Enabled Item"})]}),e.jsx(a.Item,{value:"2",label:"Disabled Root",disabled:!0,children:e.jsx(a.Item,{value:"2-1",label:"Should not be reachable"})})]})};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:`{
  args: {
    width: "400px"
  },
  render: args => <TreeView {...args} defaultExpandedValues={["1", "2"]}>\r
            <TreeView.Item value="1" label="Documents" icon={<Icon name="CircleIcon" size="small" />}>\r
                <TreeView.Item value="1-1" label="Work" icon={<Icon name="SquareIcon" size="small" />}>\r
                    <TreeView.Item value="1-1-1" label="Project A.docx" icon={<Icon name="CopyIcon" size="small" />} />\r
                    <TreeView.Item value="1-1-2" label="Project B.docx" icon={<Icon name="CopyIcon" size="small" />} />\r
                </TreeView.Item>\r
                <TreeView.Item value="1-2" label="Personal" icon={<Icon name="SquareIcon" size="small" />}>\r
                    <TreeView.Item value="1-2-1" label="Photos" icon={<Icon name="CircleIcon" size="small" />} />\r
                </TreeView.Item>\r
            </TreeView.Item>\r
            <TreeView.Item value="2" label="Music" icon={<Icon name="CircleIcon" size="small" />}>\r
                <TreeView.Item value="2-1" label="Rock" icon={<Icon name="SquareIcon" size="small" />} />\r
                <TreeView.Item value="2-2" label="Jazz" icon={<Icon name="SquareIcon" size="small" />} />\r
            </TreeView.Item>\r
            <TreeView.Item value="3" label="Videos" icon={<Icon name="CircleIcon" size="small" />} />\r
        </TreeView>
}`,...T.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  render: () => <TreeView multiSelect defaultExpandedValues={["1"]}>\r
            <TreeView.Item value="1" label="System">\r
                <TreeView.Item value="1-1" label="Logs" />\r
                <TreeView.Item value="1-2" label="Config" />\r
            </TreeView.Item>\r
            <TreeView.Item value="2" label="Users">\r
                <TreeView.Item value="2-1" label="Admin" />\r
                <TreeView.Item value="2-2" label="Guest" />\r
            </TreeView.Item>\r
        </TreeView>
}`,...y.parameters?.docs?.source}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: () => <TreeView defaultExpandedValues={["1"]}>\r
            <TreeView.Item value="1" label="Root (Enabled)">\r
                <TreeView.Item value="1-1" label="Disabled Item" disabled />\r
                <TreeView.Item value="1-2" label="Enabled Item" />\r
            </TreeView.Item>\r
            <TreeView.Item value="2" label="Disabled Root" disabled>\r
                <TreeView.Item value="2-1" label="Should not be reachable" />\r
            </TreeView.Item>\r
        </TreeView>
}`,...v.parameters?.docs?.source}}};const H=["Default","MultiSelect","DisabledItems"],te=Object.freeze(Object.defineProperty({__proto__:null,Default:T,DisabledItems:v,MultiSelect:y,__namedExportsOrder:H,default:F},Symbol.toStringTag,{value:"Module"}));export{T as D,te as T};
