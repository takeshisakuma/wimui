import{j as x}from"./jsx-runtime-u17CrQMm.js";import{r as F,aE as ae,aF as q,aB as ne,aG as re,R as ie,aH as oe,aI as se,aJ as le,a4 as B,o as H,u as de,a as ue,e as L,a0 as he,h as _,L as O,aK as ce,S as me,X as ve,a1 as pe,aL as G,aM as fe,aD as ye,aN as ge,t as xe,p as V,v as Ee,C as be,x as Ie}from"./helpers-B5p77DOo.js";import{r as d}from"./iframe-uSE7GweJ.js";import{o as Te}from"./omit-BLTjUpYu.js";import{P as Ae}from"./Polygon-B6my_UeT.js";import{T as Me}from"./Tooltip-C1RfIh7g.js";import"./index-B4JNxt7s.js";import"./index-21ee6Z8I.js";import"./index-ClTsLOd1.js";import"./preload-helper-PPVm8Dsz.js";import"./isPlainObject-ClVMfR8O.js";var Ce={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}};function Pe(a){var t=F(a,Ce),{animationId:e,from:n,to:r,attributeName:i,isActive:o,canBegin:s,duration:l,easing:u,begin:m,onAnimationEnd:h,onAnimationStart:v,children:p}=t,y=o==="auto"?!re.isSsr:o,f=ae(e+i,t.animationManager),[g,b]=d.useState(()=>y?n:r),I=d.useRef(!1),T=d.useCallback(()=>{b(n),v()},[n,v]);if(d.useEffect(()=>{if(!y||!s)return q;I.current=!0;var P=f.subscribe(b);return f.start([T,m,r,l,h]),()=>{f.stop(),P&&P(),h()}},[y,s,l,u,m,T,h,f,r,n]),!y)return p({[i]:r});if(!s)return p({[i]:n});if(I.current){var C=ne([i],l,u);return p({transition:C,[i]:g})}return p({[i]:n})}var Ke=["width","height","className","style","children","type"];function Se(a,t){if(a==null)return{};var e,n,r=Ne(a,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(n=0;n<i.length;n++)e=i[n],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(a,e)&&(r[e]=a[e])}return r}function Ne(a,t){if(a==null)return{};var e={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(t.indexOf(n)!==-1)continue;e[n]=a[n]}return e}function E(){return E=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},E.apply(null,arguments)}function R(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),e.push.apply(e,n)}return e}function c(a){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?R(Object(e),!0).forEach(function(n){M(a,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):R(Object(e)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))})}return a}function M(a,t,e){return(t=Oe(t))in a?Object.defineProperty(a,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[t]=e,a}function Oe(a){var t=we(a,"string");return typeof t=="symbol"?t:t+""}function we(a,t){if(typeof a!="object"||!a)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var n=e.call(a,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var j="value";function ke(a){return a!=null&&typeof a=="object"&&"x"in a&&"y"in a&&"width"in a&&"height"in a&&typeof a.x=="number"&&typeof a.y=="number"&&typeof a.width=="number"&&typeof a.height=="number"}var U=(a,t)=>{if(!(!a||!t))return B(a,t)},je=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"".concat(e,"children[").concat(t,"]")},De={chartName:"Treemap",defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],tooltipPayloadSearcher:U,eventEmitter:void 0},S=a=>{var{depth:t,node:e,index:n,dataKey:r,nameKey:i,nestedActiveTooltipIndex:o}=a,s=t===0?"":je(n,o),{children:l}=e,u=t+1,m=l&&l.length?l.map((y,f)=>S({depth:u,node:y,index:f,dataKey:r,nameKey:i,nestedActiveTooltipIndex:s})):null,h;if(m&&m.length)h=m.reduce((y,f)=>y+f.value,0);else{var v=e[r],p=typeof v=="number"?v:0;h=G(p)||p<=0?0:p}return c(c({},e),{},{children:m,name:ve(e,i,""),[j]:h,depth:t,index:n,tooltipIndex:s})},Le=a=>({x:a.x,y:a.y,width:a.width,height:a.height}),_e=(a,t)=>{var e=t<0?0:t;return a.map(n=>{var r=n[j]*e;return c(c({},n),{},{area:G(r)||r<=0?0:r})})},Re=(a,t,e)=>{var n=t*t,r=a.area*a.area,{min:i,max:o}=a.reduce((s,l)=>({min:Math.min(s.min,l.area),max:Math.max(s.max,l.area)}),{min:1/0,max:0});return r?Math.max(n*o*e/r,r/(n*i*e)):1/0},We=(a,t,e,n)=>{var r=t?Math.round(a.area/t):0;(n||r>e.height)&&(r=e.height);for(var i=e.x,o,s=0,l=a.length;s<l;s++)o=a[s],o!=null&&(o.x=i,o.y=e.y,o.height=r,o.width=Math.min(r?Math.round(o.area/r):0,e.x+e.width-i),i+=o.width);return o!=null&&(o.width+=e.x+e.width-i),c(c({},e),{},{y:e.y+r,height:e.height-r})},Fe=(a,t,e,n)=>{var r=t?Math.round(a.area/t):0;(n||r>e.width)&&(r=e.width);for(var i=e.y,o,s=0,l=a.length;s<l;s++)o=a[s],o!=null&&(o.x=e.x,o.y=i,o.width=r,o.height=Math.min(r?Math.round(o.area/r):0,e.y+e.height-i),i+=o.height);return o&&(o.height+=e.y+e.height-i),c(c({},e),{},{x:e.x+r,width:e.width-r})},W=(a,t,e,n)=>t===e.width?We(a,t,e,n):Fe(a,t,e,n),N=(a,t)=>{var{children:e}=a;if(e&&e.length){var n=Le(a),r=[],i=1/0,o,s,l=Math.min(n.width,n.height),u=_e(e,n.width*n.height/a[j]),m=u.slice();for(r.area=0;m.length>0;)if([o]=m,o!=null)if(r.push(o),r.area+=o.area,s=Re(r,l,t),s<=i)m.shift(),i=s;else{var h,v;r.area-=(h=(v=r.pop())===null||v===void 0?void 0:v.area)!==null&&h!==void 0?h:0,n=W(r,l,n,!1),l=Math.min(n.width,n.height),r.length=r.area=0,i=1/0}return r.length&&(n=W(r,l,n,!0),r.length=r.area=0),c(c({},a),{},{children:u.map(p=>N(p,t))})}return a},k={aspectRatio:.5*(1+Math.sqrt(5)),dataKey:"value",nameKey:"name",type:"flat",isAnimationActive:"auto",isUpdateAnimationActive:"auto",animationBegin:0,animationDuration:1500,animationEasing:"linear"},qe={isAnimationFinished:!1,formatRoot:null,currentRoot:void 0,nestIndex:[],prevAspectRatio:k.aspectRatio,prevDataKey:k.dataKey};function Be(a){var{content:t,nodeProps:e,type:n,colorPanel:r,onMouseEnter:i,onMouseLeave:o,onClick:s}=a;if(d.isValidElement(t))return d.createElement(O,{onMouseEnter:i,onMouseLeave:o,onClick:s},d.cloneElement(t,e));if(typeof t=="function")return d.createElement(O,{onMouseEnter:i,onMouseLeave:o,onClick:s},t(e));var{x:l,y:u,width:m,height:h,index:v}=e,p=null;m>10&&h>10&&e.children&&n==="nest"&&(p=d.createElement(Ae,{points:[{x:l+2,y:u+h/2},{x:l+6,y:u+h/2+3},{x:l+2,y:u+h/2+6}]}));var y=null,f=fe(e.name);m>20&&h>20&&f.width<m&&f.height<h&&(y=d.createElement("text",{x:l+8,y:u+h/2+7,fontSize:14},e.name));var g=r||ge;return d.createElement("g",null,d.createElement(ye,E({fill:e.depth<2?g[v%g.length]:"rgba(255,255,255,0)",stroke:"#fff"},Te(e,["children"]),{onMouseEnter:i,onMouseLeave:o,onClick:s,"data-recharts-item-index":e.tooltipIndex})),p,y)}function He(a){var t=H(),e={x:a.nodeProps.x+a.nodeProps.width/2,y:a.nodeProps.y+a.nodeProps.height/2},n=()=>{t(V({activeIndex:a.nodeProps.tooltipIndex,activeDataKey:a.dataKey,activeCoordinate:e,activeGraphicalItemId:a.id}))},r=()=>{},i=()=>{t(xe({activeIndex:a.nodeProps.tooltipIndex,activeDataKey:a.dataKey,activeCoordinate:e,activeGraphicalItemId:a.id}))};return d.createElement(Be,E({},a,{onMouseEnter:n,onMouseLeave:r,onClick:i}))}var Ge=d.memo(a=>{var{dataKey:t,nameKey:e,stroke:n,fill:r,currentRoot:i,id:o}=a,s={dataDefinedOnItem:i,getPosition:q,settings:{stroke:n,strokeWidth:void 0,fill:r,dataKey:t,nameKey:e,name:void 0,hide:!1,type:void 0,color:r,unit:"",graphicalItemId:o}};return d.createElement(pe,{tooltipEntrySettings:s})}),Ve={top:0,right:0,bottom:0,left:0};function Ue(a){var{content:t,nodeProps:e,isLeaf:n,treemapProps:r,onNestClick:i}=a,{id:o,isAnimationActive:s,animationBegin:l,animationDuration:u,animationEasing:m,isUpdateAnimationActive:h,type:v,colorPanel:p,dataKey:y,onAnimationStart:f,onAnimationEnd:g,onMouseEnter:b,onClick:I,onMouseLeave:T}=r,{width:C,height:P,x:w,y:D}=e,J=-w-C,Q=0,Z=A=>{(n||v==="nest")&&typeof b=="function"&&b(e,A)},z=A=>{(n||v==="nest")&&typeof T=="function"&&T(e,A)},$=()=>{v==="nest"&&i(e),(n||v==="nest")&&typeof I=="function"&&I(e)},ee=d.useCallback(()=>{typeof g=="function"&&g()},[g]),te=d.useCallback(()=>{typeof f=="function"&&f()},[f]);return d.createElement(Pe,{animationId:"treemap-".concat(e.tooltipIndex),from:"translate(".concat(J,"px, ").concat(Q,"px)"),to:"translate(0, 0)",attributeName:"transform",begin:l,easing:m,isActive:s,duration:u,onAnimationStart:te,onAnimationEnd:ee},A=>d.createElement(O,{onMouseEnter:Z,onMouseLeave:z,onClick:$,style:c(c({},A),{},{transformOrigin:"".concat(w," ").concat(D)})},d.createElement(He,{id:o,content:t,dataKey:y,nodeProps:c(c({},e),{},{isAnimationActive:s,isUpdateAnimationActive:!h,width:C,height:P,x:w,y:D}),type:v,colorPanel:p})))}class X extends d.PureComponent{constructor(){super(...arguments),M(this,"state",c({},qe)),M(this,"handleClick",t=>{var{onClick:e,type:n}=this.props;if(n==="nest"&&t.children){var{width:r,height:i,dataKey:o,nameKey:s,aspectRatio:l}=this.props,u=S({depth:0,node:c(c({},t),{},{x:0,y:0,width:r,height:i}),index:0,dataKey:o,nameKey:s,nestedActiveTooltipIndex:t.tooltipIndex}),m=N(u,l),{nestIndex:h}=this.state;h.push(t),this.setState({formatRoot:m,currentRoot:u,nestIndex:h})}e&&e(t)}),M(this,"handleTouchMove",t=>{var e=t.touches[0];if(e!=null){var n=document.elementFromPoint(e.clientX,e.clientY);if(!(!n||!n.getAttribute||this.state.formatRoot==null)){var r=n.getAttribute("data-recharts-item-index"),i=U(this.state.formatRoot,r);if(ke(i)){var{dataKey:o,dispatch:s}=this.props,l={x:i.x+i.width/2,y:i.y+i.height/2};s(V({activeIndex:r,activeDataKey:o,activeCoordinate:l,activeGraphicalItemId:this.props.id}))}}}})}static getDerivedStateFromProps(t,e){if(t.data!==e.prevData||t.type!==e.prevType||t.width!==e.prevWidth||t.height!==e.prevHeight||t.dataKey!==e.prevDataKey||t.aspectRatio!==e.prevAspectRatio){var n=S({depth:0,node:{children:t.data,x:0,y:0,width:t.width,height:t.height},index:0,dataKey:t.dataKey,nameKey:t.nameKey}),r=N(n,t.aspectRatio);return c(c({},e),{},{formatRoot:r,currentRoot:n,nestIndex:[n],prevAspectRatio:t.aspectRatio,prevData:t.data,prevWidth:t.width,prevHeight:t.height,prevDataKey:t.dataKey,prevType:t.type})}return null}handleNestIndex(t,e){var{nestIndex:n}=this.state,{width:r,height:i,dataKey:o,nameKey:s,aspectRatio:l}=this.props,u=S({depth:0,node:c(c({},t),{},{x:0,y:0,width:r,height:i}),index:0,dataKey:o,nameKey:s,nestedActiveTooltipIndex:t.tooltipIndex}),m=N(u,l);n=n.slice(0,e+1),this.setState({formatRoot:m,currentRoot:t,nestIndex:n})}renderNode(t,e){var{content:n,type:r}=this.props,i=c(c(c({},_(this.props)),e),{},{root:t}),o=!e.children||!e.children.length,{currentRoot:s}=this.state,l=(s?.children||[]).filter(u=>u.depth===e.depth&&u.name===e.name);return!l.length&&t.depth&&r==="nest"?null:d.createElement(O,{key:"recharts-treemap-node-".concat(i.x,"-").concat(i.y,"-").concat(i.name),className:"recharts-treemap-depth-".concat(e.depth)},d.createElement(Ue,{isLeaf:o,content:n,nodeProps:i,treemapProps:this.props,onNestClick:this.handleClick}),e.children&&e.children.length?e.children.map(u=>this.renderNode(e,u)):null)}renderAllNodes(){var{formatRoot:t}=this.state;return t?this.renderNode(t,t):null}renderNestIndex(){var{nameKey:t,nestIndexContent:e}=this.props,{nestIndex:n}=this.state;return d.createElement("div",{className:"recharts-treemap-nest-index-wrapper",style:{marginTop:"8px",textAlign:"center"}},n.map((r,i)=>{var o=B(r,t,"root"),s=typeof o=="string"?o:"root",l;return d.isValidElement(e)&&(l=d.cloneElement(e,r,i)),typeof e=="function"?l=e(r,i):l=s,d.createElement("div",{onClick:this.handleNestIndex.bind(this,r,i),key:"nest-index-".concat(ce()),className:"recharts-treemap-nest-index-box",style:{cursor:"pointer",display:"inline-block",padding:"0 7px",background:"#000",color:"#fff",marginRight:"3px"}},l)}))}render(){var t=this.props,{width:e,height:n,className:r,style:i,children:o,type:s}=t,l=Se(t,Ke),u=_(l);return d.createElement(d.Fragment,null,d.createElement(Ge,{dataKey:this.props.dataKey,nameKey:this.props.nameKey,stroke:this.props.stroke,fill:this.props.fill,currentRoot:this.state.currentRoot,id:this.props.id}),d.createElement(me,E({},u,{width:e,height:s==="nest"?n-30:n,onTouchMove:this.handleTouchMove}),this.renderAllNodes(),o),s==="nest"&&this.renderNestIndex())}}M(X,"displayName","Treemap");function Xe(a){var t=H(),e=de(),n=ue();if(!L(e)||!L(n))return null;var{id:r}=a;return d.createElement(he,{id:r,type:"treemap"},i=>d.createElement(X,E({},a,{id:i,width:e,height:n,dispatch:t})))}function Ye(a){var t,e=F(a,k),{className:n,style:r,width:i,height:o}=e,[s,l]=d.useState(null);return d.createElement(ie,{preloadedState:{options:De},reduxStoreName:(t=e.className)!==null&&t!==void 0?t:"Treemap"},d.createElement(oe,{margin:Ve}),d.createElement(se,{dispatchTouchEvents:!1,className:n,style:r,width:i,height:o,responsive:!1,ref:u=>{s==null&&u!=null&&l(u)},onMouseEnter:void 0,onMouseLeave:void 0,onClick:void 0,onMouseMove:void 0,onMouseDown:void 0,onMouseUp:void 0,onContextMenu:void 0,onDoubleClick:void 0,onTouchStart:void 0,onTouchMove:void 0,onTouchEnd:void 0},d.createElement(le.Provider,{value:s},d.createElement(Xe,e))))}const Y=({data:a,dataKey:t,aspectRatio:e=4/3,height:n=300,width:r="100%",title:i})=>x.jsxs("div",{style:{width:r,height:"auto"},children:[i&&x.jsx("h3",{style:{fontSize:"16px",marginBottom:"16px"},children:i}),x.jsx("div",{style:{height:n},children:x.jsx(Ee,{width:"100%",height:"100%",children:x.jsx(Ye,{data:a,dataKey:t,aspectRatio:e,stroke:"#fff",fill:be[0],children:x.jsx(Me,{contentStyle:Ie.tooltip.contentStyle})})})})]});Y.__docgenInfo={description:"",methods:[],displayName:"Treemap",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},dataKey:{required:!0,tsType:{name:"string"},description:""},aspectRatio:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"4 / 3",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"300",computed:!1}},width:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},title:{required:!1,tsType:{name:"string"},description:""}}};const st={title:"Components/Visualization/Treemap",component:Y,tags:["autodocs"]},Je=[{name:"Category A",value:400},{name:"Category B",value:300},{name:"Category C",value:300},{name:"Category D",value:200},{name:"Category E",value:278},{name:"Category F",value:189}],K={args:{title:"Category Distribution",data:Je,dataKey:"value"}};K.parameters={...K.parameters,docs:{...K.parameters?.docs,source:{originalSource:`{
  args: {
    title: "Category Distribution",
    data,
    dataKey: "value"
  }
}`,...K.parameters?.docs?.source}}};const lt=["Default"];export{K as Default,lt as __namedExportsOrder,st as default};
