import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as o,R as m}from"./iframe-CSw8miVe.js";import{c as k}from"./index-DVluPYyD.js";import{I as G}from"./Icon-BhAkmYKE.js";const D=o.createContext(null),H=()=>{const a=o.useContext(D);if(!a)throw new Error("TreeView components must be used within a TreeView");return a},P=({children:a,className:h,multiSelect:p=!1,checkable:u=!1,searchable:b=!1,defaultExpandedValues:i=[],defaultSelectedValues:N=[],defaultCheckedValues:R=[],onCheckedChange:x,onSelectedChange:f,width:y})=>{const[T,v]=o.useState(i),[d,r]=o.useState(N),[g,q]=o.useState(R),[c,A]=o.useState(""),V=o.useCallback(s=>{v(e=>e.includes(s)?e.filter(l=>l!==s):[...e,s])},[]),C=o.useCallback(s=>{if(p)r(e=>{const l=e.includes(s)?e.filter(w=>w!==s):[...e,s];return f?.(l),l});else{const e=[s];r(e),f?.(e)}},[p,f]),E=o.useCallback(s=>{q(e=>{const l=e.includes(s)?e.filter(w=>w!==s):[...e,s];return x?.(l),l})},[x]),_=o.useMemo(()=>({expandedValues:T,selectedValues:d,checkedValues:g,toggleExpand:V,select:C,toggleCheck:E,multiSelect:p,checkable:u,searchQuery:c}),[T,d,g,V,C,E,p,u,c]);return n.jsx(D.Provider,{value:_,children:n.jsxs("div",{className:k("wim-tree-view",h),role:"tree",style:{width:y},children:[b&&n.jsx("div",{className:"wim-tree-view__search",children:n.jsx("input",{type:"text",className:"wim-tree-view__search-input",placeholder:"Search...",value:c,onChange:s=>A(s.target.value)})}),a]})})},I=({value:a,label:h,icon:p,children:u,className:b,disabled:i=!1})=>{const{expandedValues:N,selectedValues:R,checkedValues:x,toggleExpand:f,select:y,toggleCheck:T,checkable:v,searchQuery:d}=H(),r=N.includes(a),g=R.includes(a),q=x.includes(a),c=!!m.Children.count(u),V=!d||(typeof h=="string"?h:"").toLowerCase().includes(d.toLowerCase()),C=m.useMemo(()=>{if(!d||!u)return!1;const t=F=>m.Children.toArray(F).some(j=>{if(!m.isValidElement(j)||j.type!==I)return!1;const S=j.props,L=S.label;return(typeof L=="string"?L:"").toLowerCase().includes(d.toLowerCase())?!0:S.children?t(S.children):!1});return t(u)},[u,d]),[E,_]=m.useState(!1),[s,e]=m.useState(r),[l,w]=m.useState(r);if(m.useEffect(()=>{if(r){e(!0);const t=setTimeout(()=>{w(!0)},10);return()=>clearTimeout(t)}else w(!1),_(!0)},[r]),d&&!V&&!C)return null;const M=t=>{t.propertyName==="grid-template-rows"&&!r&&(e(!1),_(!1))},Q=()=>{i||y(a)},K=t=>{t.stopPropagation(),!i&&c&&f(a)},z=t=>{t.stopPropagation(),i||T(a)},B=t=>{if(!i)switch(t.key){case"Enter":case" ":t.preventDefault(),y(a);break;case"ArrowRight":c&&!r&&(t.preventDefault(),f(a));break;case"ArrowLeft":c&&r&&(t.preventDefault(),f(a));break}};return n.jsxs("div",{className:k("wim-tree-view-item",g&&"wim-tree-view-item--selected",i&&"wim-tree-view-item--disabled",b),role:"treeitem","aria-selected":g,"aria-expanded":c?r:void 0,"aria-disabled":i,onClick:Q,onKeyDown:B,tabIndex:i?-1:0,children:[n.jsxs("div",{className:"wim-tree-view-item__label-container",children:[c&&n.jsx("button",{type:"button",className:k("wim-tree-view-item__expand-btn",r&&"wim-tree-view-item__expand-btn--expanded"),onClick:K,disabled:i,"aria-label":r?"Collapse":"Expand",children:n.jsx(G,{name:"ChevronRightIcon",size:"small"})}),!c&&n.jsx("span",{className:"wim-tree-view-item__spacer"}),v&&n.jsx("input",{type:"checkbox",className:"wim-tree-view-item__checkbox",checked:q,onChange:z,disabled:i,onClick:t=>t.stopPropagation()}),p&&n.jsx("span",{className:"wim-tree-view-item__icon",children:p}),n.jsx("span",{className:"wim-tree-view-item__label",children:h})]}),c&&s&&n.jsx("div",{className:k("wim-tree-view-item__children",l&&"wim-tree-view-item__children--expanded"),onTransitionEnd:M,style:{gridTemplateRows:l?"1fr":"0fr"},children:n.jsx("div",{className:"wim-tree-view-item__children-inner",children:u})})]})},J=P;J.Item=I;I.__docgenInfo={description:"",methods:[],displayName:"TreeViewItem",props:{value:{required:!0,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};P.__docgenInfo={description:"",methods:[],displayName:"TreeView",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""},multiSelect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},checkable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},searchable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultExpandedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},defaultSelectedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},defaultCheckedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onCheckedChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(checked: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"checked"}],return:{name:"void"}}},description:""},onSelectedChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(selected: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"selected"}],return:{name:"void"}}},description:""},width:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""}}};export{J as T};
