import{j as s}from"./jsx-runtime-u17CrQMm.js";import{r as l}from"./iframe-Do2l9dU0.js";import{P as r}from"./index-JTmchYEG.js";import{I as N}from"./Input-DS5ttcA2.js";import"./preload-helper-PPVm8Dsz.js";import"./Icon-DQ8cAVv1.js";const b=({options:g=[],onSelect:h,placeholder:w="Select...",showSearchIcon:x=!0,allowClear:S=!0,defaultValue:I="",className:q="",disabled:C=!1,...O})=>{const[p,o]=l.useState(!1),[k,v]=l.useState(I),[t,T]=l.useState(g),[n,d]=l.useState(-1),m=l.useRef(null);l.useEffect(()=>{const e=a=>{m.current&&!m.current.contains(a.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const D=e=>{const a=e.target.value;v(a);const j=g.filter(E=>E.label.toLowerCase().includes(a.toLowerCase()));T(j),o(!0),d(-1)},y=e=>{v(e.label),o(!1),h&&h(e)},V=e=>{if(!p&&e.key==="ArrowDown"){o(!0);return}switch(e.key){case"ArrowDown":d(a=>a<t.length-1?a+1:a);break;case"ArrowUp":d(a=>a>0?a-1:a);break;case"Enter":n>=0&&n<t.length&&y(t[n]);break;case"Escape":o(!1);break}};return s.jsxs("div",{className:`wim-combobox ${q}`,ref:m,onKeyDown:V,children:[s.jsx(N,{placeholder:w,value:k,onChange:D,onFocus:()=>o(!0),leftIcon:x?"SearchIcon":void 0,rightIcon:"ChevronDownIcon",allowClear:S,disabled:C,autoComplete:"off",...O}),p&&t.length>0&&s.jsx("ul",{className:"wim-combobox-list",children:t.map((e,a)=>s.jsx("li",{className:`wim-combobox-option ${a===n?"wim-combobox-option--active":""}`,onClick:()=>y(e),children:e.label},e.value))}),p&&t.length===0&&s.jsx("div",{className:"wim-combobox-empty",children:"No results found"})]})};b.propTypes={options:r.arrayOf(r.shape({label:r.string.isRequired,value:r.string.isRequired})).isRequired,onSelect:r.func,placeholder:r.string,showSearchIcon:r.bool,allowClear:r.bool,disabled:r.bool};b.__docgenInfo={description:"入力とサジェストリストを組み合わせたコンボボックスコンポーネント。",methods:[],displayName:"Combobox",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
    label: string;\r
    value: string;\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"ComboboxOption[]"},description:"選択肢の配列。",defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},value:{name:"string",required:!0}}}}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: ComboboxOption) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{\r
    label: string;\r
    value: string;\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}},name:"option"}],return:{name:"void"}}},description:"項目が選択された時のコールバック。",type:{name:"func"}},placeholder:{required:!1,tsType:{name:"string"},description:"プレースホルダー。",defaultValue:{value:'"Select..."',computed:!1},type:{name:"string"}},label:{required:!1,tsType:{name:"string"},description:""},showSearchIcon:{required:!1,tsType:{name:"boolean"},description:"左側に検索アイコンを表示するかどうか。",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},allowClear:{required:!1,tsType:{name:"boolean"},description:"クリアボタンを表示するかどうか。",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},defaultValue:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"無効化。",defaultValue:{value:"false",computed:!1},type:{name:"bool"}}}};const W={title:"Component/Selection/Combobox",component:b,tags:["autodocs"],argTypes:{showSearchIcon:{control:"boolean"}}},f=[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"},{label:"Blueberry",value:"blueberry"},{label:"Cherry",value:"cherry"},{label:"Grape",value:"grape"},{label:"Kiwi",value:"kiwi"},{label:"Lemon",value:"lemon"},{label:"Mango",value:"mango"},{label:"Orange",value:"orange"},{label:"Peach",value:"peach"},{label:"Pear",value:"pear"},{label:"Pineapple",value:"pineapple"},{label:"Strawberry",value:"strawberry"},{label:"Watermelon",value:"watermelon"}],i={args:{options:f,placeholder:"Search fruits..."}},u={args:{options:f,placeholder:"Search fruits...",showSearchIcon:!0}},c={args:{options:f,placeholder:"Disabled combobox",disabled:!0}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Search fruits..."
  }
}`,...i.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Search fruits...",
    showSearchIcon: true
  }
}`,...u.parameters?.docs?.source}}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Disabled combobox",
    disabled: true
  }
}`,...c.parameters?.docs?.source}}};const B=["Default","WithIcon","Disabled"];export{i as Default,c as Disabled,u as WithIcon,B as __namedExportsOrder,W as default};
