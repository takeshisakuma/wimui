import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as l}from"./iframe-D-r_Glek.js";import{P as r}from"./index-9Xj8KF64.js";import{I as _}from"./Input-wpx98EHp.js";const b=({options:g=[],onSelect:h,placeholder:S="Select...",showSearchIcon:C=!0,allowClear:v=!0,defaultValue:I="",className:q="",disabled:O=!1,...k})=>{const[p,o]=l.useState(!1),[y,w]=l.useState(I),[t,D]=l.useState(g),[c,d]=l.useState(-1),m=l.useRef(null);l.useEffect(()=>{const e=a=>{m.current&&!m.current.contains(a.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const T=e=>{const a=e.target.value;w(a);const V=g.filter(E=>E.label.toLowerCase().includes(a.toLowerCase()));D(V),o(!0),d(-1)},x=e=>{w(e.label),o(!1),h&&h(e)},j=e=>{if(!p&&e.key==="ArrowDown"){o(!0);return}switch(e.key){case"ArrowDown":d(a=>a<t.length-1?a+1:a);break;case"ArrowUp":d(a=>a>0?a-1:a);break;case"Enter":c>=0&&c<t.length&&x(t[c]);break;case"Escape":o(!1);break}};return n.jsxs("div",{className:`wim-combobox ${q}`,ref:m,onKeyDown:j,children:[n.jsx(_,{placeholder:S,value:y,onChange:T,onFocus:()=>o(!0),leftIcon:C?"SearchIcon":void 0,rightIcon:v&&y?void 0:"ChevronDownIcon",allowClear:v,disabled:O,autoComplete:"off",...k}),p&&t.length>0&&n.jsx("ul",{className:"wim-combobox-list",children:t.map((e,a)=>n.jsx("li",{className:`wim-combobox-option ${a===c?"wim-combobox-option--active":""}`,onClick:()=>x(e),children:e.label},e.value))}),p&&t.length===0&&n.jsx("div",{className:"wim-combobox-empty",children:"No results found"})]})};b.propTypes={options:r.arrayOf(r.shape({label:r.string.isRequired,value:r.string.isRequired})).isRequired,onSelect:r.func,placeholder:r.string,showSearchIcon:r.bool,allowClear:r.bool,disabled:r.bool};b.__docgenInfo={description:"入力とサジェストリストを組み合わせたコンボボックスコンポーネント。",methods:[],displayName:"Combobox",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
    label: string;\r
    value: string;\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"ComboboxOption[]"},description:"選択肢の配列。",defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},value:{name:"string",required:!0}}}}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: ComboboxOption) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{\r
    label: string;\r
    value: string;\r
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}},name:"option"}],return:{name:"void"}}},description:"項目が選択された時のコールバック。",type:{name:"func"}},placeholder:{required:!1,tsType:{name:"string"},description:"プレースホルダー。",defaultValue:{value:'"Select..."',computed:!1},type:{name:"string"}},label:{required:!1,tsType:{name:"string"},description:""},showSearchIcon:{required:!1,tsType:{name:"boolean"},description:"左側に検索アイコンを表示するかどうか。",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},allowClear:{required:!1,tsType:{name:"boolean"},description:"クリアボタンを表示するかどうか。",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},defaultValue:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"無効化。",defaultValue:{value:"false",computed:!1},type:{name:"bool"}}}};const N={title:"Component/Data Entry/Combobox",component:b,argTypes:{showSearchIcon:{control:"boolean"}}},f=[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"},{label:"Blueberry",value:"blueberry"},{label:"Cherry",value:"cherry"},{label:"Grape",value:"grape"},{label:"Kiwi",value:"kiwi"},{label:"Lemon",value:"lemon"},{label:"Mango",value:"mango"},{label:"Orange",value:"orange"},{label:"Peach",value:"peach"},{label:"Pear",value:"pear"},{label:"Pineapple",value:"pineapple"},{label:"Strawberry",value:"strawberry"},{label:"Watermelon",value:"watermelon"}],s={args:{options:f,placeholder:"Search fruits..."}},i={args:{options:f,placeholder:"Search fruits...",showSearchIcon:!0}},u={args:{options:f,placeholder:"Disabled combobox",disabled:!0}};s.parameters={...s.parameters,docs:{...s.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Search fruits..."
  }
}`,...s.parameters?.docs?.source}}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Search fruits...",
    showSearchIcon: true
  }
}`,...i.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Disabled combobox",
    disabled: true
  }
}`,...u.parameters?.docs?.source}}};const A=["Default","WithIcon","Disabled"],W=Object.freeze(Object.defineProperty({__proto__:null,Default:s,Disabled:u,WithIcon:i,__namedExportsOrder:A,default:N},Symbol.toStringTag,{value:"Module"}));export{W as C,s as D};
