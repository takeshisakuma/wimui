import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r}from"./iframe-3pJU0r9w.js";import{c as O}from"./index-DPeCJHdU.js";import{I as K}from"./Input-DU1Wg_n_.js";const k=({options:h=[],onSelect:y,placeholder:q="Select...",showSearchIcon:j=!0,allowClear:w=!0,defaultValue:D="",className:T,disabled:N=!1,label:d,id:V,...E})=>{const[t,s]=r.useState(!1),[x,I]=r.useState(D),[l,_]=r.useState(h),[o,m]=r.useState(-1),b=r.useRef(null),$=r.useId(),f=V||$,p=`wim-combobox-list-${f}`,g=`wim-combobox-label-${f}`,S=`wim-combobox-input-${f}`;r.useEffect(()=>{const a=e=>{b.current&&!b.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const A=a=>{const e=a.target.value;I(e);const P=h.filter(F=>F.label.toLowerCase().includes(e.toLowerCase()));_(P),s(!0),m(-1)},C=a=>{I(a.label),s(!1),y&&y(a)},L=a=>{if(!t&&a.key==="ArrowDown"){s(!0);return}switch(a.key){case"ArrowDown":m(e=>e<l.length-1?e+1:e);break;case"ArrowUp":m(e=>e>0?e-1:e);break;case"Enter":o>=0&&o<l.length&&C(l[o]);break;case"Escape":s(!1);break}};return n.jsxs("div",{className:O("wim-combobox",T),ref:b,children:[d&&n.jsx("label",{id:g,htmlFor:S,className:"wim-label",children:d}),n.jsx(K,{id:S,placeholder:q,value:x,onChange:A,onKeyDown:L,onFocus:()=>s(!0),leftIcon:j?"SearchIcon":void 0,rightIcon:w&&x?void 0:"ChevronDownIcon",allowClear:w,disabled:N,autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":t,"aria-controls":t?p:void 0,"aria-labelledby":d?g:void 0,"aria-activedescendant":t&&o>=0?`${p}-option-${o}`:void 0,...E}),t&&l.length>0&&n.jsx("ul",{id:p,className:"wim-combobox-list",role:"listbox","aria-labelledby":d?g:void 0,children:l.map((a,e)=>n.jsx("li",{id:`${p}-option-${e}`,className:O("wim-combobox-option",e===o&&"wim-combobox-option--active"),onClick:()=>C(a),role:"option","aria-selected":e===o,children:a.label},a.value))}),t&&l.length===0&&n.jsx("div",{className:"wim-combobox-empty",role:"region","aria-live":"polite",children:"No results found"})]})};k.__docgenInfo={description:"入力とサジェストリストを組み合わせたコンボボックスコンポーネント。",methods:[],displayName:"Combobox",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}}],raw:"ComboboxOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: ComboboxOption) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}},name:"option"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select..."',computed:!1}},label:{required:!1,tsType:{name:"string"},description:""},showSearchIcon:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},allowClear:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},defaultValue:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},id:{required:!1,tsType:{name:"string"},description:""}}};const R={title:"Components/Selection Controls/Combobox",component:k,argTypes:{showSearchIcon:{control:"boolean"}}},v=[{label:"Apple",value:"apple"},{label:"Banana",value:"banana"},{label:"Blueberry",value:"blueberry"},{label:"Cherry",value:"cherry"},{label:"Grape",value:"grape"},{label:"Kiwi",value:"kiwi"},{label:"Lemon",value:"lemon"},{label:"Mango",value:"mango"},{label:"Orange",value:"orange"},{label:"Peach",value:"peach"},{label:"Pear",value:"pear"},{label:"Pineapple",value:"pineapple"},{label:"Strawberry",value:"strawberry"},{label:"Watermelon",value:"watermelon"}],i={args:{options:v,placeholder:"Search fruits..."}},c={args:{options:v,placeholder:"Search fruits...",showSearchIcon:!0}},u={args:{options:v,placeholder:"Disabled combobox",disabled:!0}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Search fruits..."
  }
}`,...i.parameters?.docs?.source}}};c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Search fruits...",
    showSearchIcon: true
  }
}`,...c.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    options: sampleOptions,
    placeholder: "Disabled combobox",
    disabled: true
  }
}`,...u.parameters?.docs?.source}}};const W=["Default","WithIcon","Disabled"],U=Object.freeze(Object.defineProperty({__proto__:null,Default:i,Disabled:u,WithIcon:c,__namedExportsOrder:W,default:R},Symbol.toStringTag,{value:"Module"}));export{U as C,i as D};
