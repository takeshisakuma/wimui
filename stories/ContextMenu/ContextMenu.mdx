import { Meta, Primary, Controls, Story } from "@storybook/addon-docs/blocks";
import * as ContextMenuStories from "./ContextMenu.stories";
import { T } from "../T";

<Meta of={ContextMenuStories} />

# ContextMenu

<p
  style={{
    margin: "0 0 16px 0",
    fontSize: "18px",
    lineHeight: "28px",
    color: "#6c757d",
  }}
>
  <T k="doc_contextmenu_title" />
</p>

右クリック（コンテキストメニュー）で表示されるメニューコンポーネントです。
画像、テキスト、その他の要素に対して、追加のアクションを提供する際に使用します。

> **PCのみ**: このコンポーネントは「右クリック」操作を前提としているため、PC環境での利用を想定しています。ドロップダウンメニューなど、タッチデバイスで操作可能なコンポーネントでの代替を検討してください。

## Usage

```tsx
import { ContextMenu, ContextMenuItem, ContextMenuDivider } from "wimui";
import { T } from "../T";

<ContextMenu
  menu={
    <>
      <ContextMenuItem onClick={handleEdit}>Edit</ContextMenuItem>
      <ContextMenuItem onClick={handleCopy}>Copy</ContextMenuItem>
      <ContextMenuDivider />
      <ContextMenuItem danger onClick={handleDelete}>
        Delete
      </ContextMenuItem>
    </>
  }
>
  <div>Right-click this element</div>
</ContextMenu>;
```

<Primary />

## Components

### ContextMenu

ルートコンポーネント。子要素上で右クリックされたときにメニューを表示します。

Props:

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>menu</code></td>
      <td>表示するメニューの内容（ReactNode）</td>
    </tr>
    <tr>
      <td><code>disabled</code></td>
      <td>コンテキストメニューを無効化</td>
    </tr>
  </tbody>
</table>

### ContextMenuItem

メニューの個別項目です。クリックイベント、アイコン、danger状態を設定できます。

Props:

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>icon</code></td>
      <td>アイテムの左側に表示するアイコン</td>
    </tr>
    <tr>
      <td><code>danger</code></td>
      <td>危険なアクション（削除など）を示す赤色スタイル</td>
    </tr>
    <tr>
      <td><code>disabled</code></td>
      <td>アイテムを無効化</td>
    </tr>
  </tbody>
</table>

### ContextMenuDivider

メニュー項目間に区切り線を挿入します。

### ContextMenuGroup

メニュー項目をグループ化し、タイトルを表示します。

<Controls />

## Stories

### With Icons

アイコン付きのコンテキストメニューの例です。

<Story of={ContextMenuStories.WithIcons} />

### With Groups

メニュー項目をグループ化する例です。関連するアクションをまとめて表示できます。

<Story of={ContextMenuStories.WithGroups} />

### With Disabled Items

一部のアクションを無効化する例です。

<Story of={ContextMenuStories.WithDisabledItems} />

### On Image

画像に対するコンテキストメニューの実用的な例です。

<Story of={ContextMenuStories.OnImage} />

## Features

<table>
  <thead>
    <tr>
      <th>特徴</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>自動位置調整</strong></td>
      <td>メニューがビューポートの境界を超える場合、自動的に位置を調整します</td>
    </tr>
    <tr>
      <td><strong>Escキーで閉じる</strong></td>
      <td>Escキーを押すとメニューが閉じます</td>
    </tr>
    <tr>
      <td><strong>外側クリックで閉じる</strong></td>
      <td>メニューの外側をクリックすると閉じます</td>
    </tr>
    <tr>
      <td><strong>スクロール時に閉じる</strong></td>
      <td>ページをスクロールすると自動的に閉じます</td>
    </tr>
  </tbody>
</table>

## Accessibility

- `role="menu"` と `role="menuitem"` を適切に設定
- disabled 状態の項目には `aria-disabled` を設定
- キーボード操作のサポート（Escキーで閉じる）
