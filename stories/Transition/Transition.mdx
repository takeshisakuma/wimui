import { Meta, Canvas, Controls } from "@storybook/addon-docs/blocks";
import * as TransitionStories from "./Transition.stories";
import { T } from "../T";

<Meta of={TransitionStories} />

# Transition

<p
  style={{
    margin: "0 0 16px 0",
    fontSize: "18px",
    lineHeight: "28px",
    color: "#6c757d",
  }}
>
  <T k="doc_transition_title" />
</p>

`Transition` コンポーネントは、CSS クラスを使用してコンポーネントに遷移アニメーション（進入・退出）を簡単に追加するためのユーティリティです。遷移の各段階に応じて、適切なタイミングでクラスを適用・管理します。

## 特徴

<table>
  <thead>
    <tr>
      <th>特徴</th>
      <th>内容</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>段階的なクラス管理</strong></td>
      <td><code>enter</code> (遷移中), <code>enterFrom</code> (開始時), <code>enterTo</code> (終了時) および <code>leave</code> 系のクラスを連携させます。</td>
    </tr>
    <tr>
      <td><strong>アンマウント対応</strong></td>
      <td>退出アニメーションの完了後に、自動的に子要素をアンマウントすることができます。</td>
    </tr>
    <tr>
      <td><strong>SSR 対応</strong></td>
      <td>React のライフサイクルとハイドレーションに正しく対応しています。</td>
    </tr>
  </tbody>
</table>

## 使い方

```tsx
<Transition
  show={isOpen}
  enter="transition-opacity duration-300"
  enterFrom="opacity-0"
  enterTo="opacity-100"
  leave="transition-opacity duration-200"
  leaveFrom="opacity-100"
  leaveTo="opacity-0"
>
  <div>アニメーションするコンテンツ</div>
</Transition>
```

## 例

### フェードアニメーション

シンプルな不透明度の変化によるフェードイン・フェードアウトです。ボタンのラベル変更時の幅のアニメーションも組み込まれています。

<Canvas of={TransitionStories.Fade} />

### スライドアニメーション

不透明度と位置（transform）の遷移を組み合わせた例です。

<Canvas of={TransitionStories.Slide} />

## 遷移の各ステージ

<table>
  <thead>
    <tr>
      <th>ステージ</th>
      <th>適用タイミングと内容</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>enter</strong></td>
      <td>進入フェーズ全体を通して適用されます。</td>
    </tr>
    <tr>
      <td><strong>enterFrom</strong></td>
      <td>進入フェーズの開始時（最初のフレームの前）に適用されます。</td>
    </tr>
    <tr>
      <td><strong>enterTo</strong></td>
      <td>進入フェーズの終了時に適用されます。</td>
    </tr>
    <tr>
      <td><strong>leave</strong></td>
      <td>退出フェーズ全体を通して適用されます。</td>
    </tr>
    <tr>
      <td><strong>leaveFrom</strong></td>
      <td>退出フェーズの開始時に適用されます。</td>
    </tr>
    <tr>
      <td><strong>leaveTo</strong></td>
      <td>退出フェーズの終了時に適用されます。</td>
    </tr>
  </tbody>
</table>

## プロップ

<Controls />
