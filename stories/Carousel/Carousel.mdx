import { Meta, Primary, Controls, Canvas} from "@storybook/blocks";
import * as CarouselStories from "./Carousel.stories";
import { T } from "../T";

<Meta of={CarouselStories} />

# Carousel

<p style={{ margin: "0 0 16px 0", fontSize: "18px", lineHeight: "28px", color: "#6c757d" }}>
  <T k="doc_carousel_title" />
</p>

Carousel（カルーセル）は、複数のコンテンツをスライドさせて表示するためのコンポーネント<br />
シームレスなループ、レスポンシブな表示数設定に対応している

## 特徴

- 無限ループ: 最後のスライドから次に進むと、最初のスライドがスムーズに現れる
- 表示数のカスタマイズ: `slidesToShow` プロパティで、一度に表示するスライドの数を指定できる
- レスポンシブ対応: デバイスの幅に応じて表示数を自動的に切り替えることができる

## 使用例

### 基本的な使い方

`loop={true}`（デフォルト）により、シームレスな無限ループが有効

<Canvas of={CarouselStories.Basic} />

### 表示数の指定

`slidesToShow` で一度に表示するスライドの数を指定できる

<Canvas of={CarouselStories.MultipleItems} />

### レスポンシブ対応

ブレークポイントごとに表示数を指定できる

```tsx
<Carousel 
  slidesToShow={{
    base: 1,  // スマホ
    sm: 2,    // タブレット
    md: 3,    // PC
    lg: 4     // ワイド
  }}
>
  {/* slides */}
</Carousel>
```

<Canvas of={CarouselStories.Responsive} />

### 自動再生

`autoPlay` プロパティを `true` に設定すると、一定間隔で自動的にスライドが切り替わる

<Canvas of={CarouselStories.AutoPlay} />

### ループなし

`loop={false}` を設定すると、最初と最後のスライドで停止し、端のボタンが無効になります。

<Canvas of={CarouselStories.NoLoop} />

### 画像の使用例

実際の画像を使用した例です。

<Canvas of={CarouselStories.WithImage} />

## Props

<Controls />

## アクセシビリティ

- 前後ボタンには適切な `aria-label` が設定されている
- インジケーターには `aria-current` が設定され、現在表示中のスライドを示している
- `infinite loop` 実装では、クローンされた要素を使用してシームレスな遷移を実現している


## Carousel UIとは?

カルーセルUI (Carousel UI) は、限られたスペースで複数の画像やコンテンツをスライドショーのように切り替えて表示する手法です。
「カルーセル（carousel）」の語源は回転木馬（メリーゴーラウンド）に由来し、モバイルデバイスの普及とともに、省スペースで多くの情報を伝える手段として一般化しました。

### スライドショー・スライダーとの違い
厳密な定義はありませんが、以下のように使い分けられることがあります。

<table>
  <thead>
    <tr>
      <th>用語</th>
      <th>特徴</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>カルーセル</strong></td>
      <td>複数のコンテンツが回転するように表示され、ユーザーが手動で操作（スワイプ/クリック）できる。</td>
    </tr>
    <tr>
      <td><strong>スライドショー</strong></td>
      <td>自動的に切り替わる機能が主で、手動操作が限定的な場合が多い。</td>
    </tr>
    <tr>
      <td><strong>スライダー</strong></td>
      <td>自由度が高く、数値を調整するUI（レンジスライダー）を指すこともあるが、画像切り替えの意味ではカルーセルに近い。</td>
    </tr>
  </tbody>
</table>

---

## 導入のメリット

<table>
  <thead>
    <tr>
      <th>メリット</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>省スペース化</strong></td>
      <td>限られた領域（特にモバイル画面）に多くの情報を詰め込める。</td>
    </tr>
    <tr>
      <td><strong>注目を集めやすい</strong></td>
      <td>動きのあるUIは視覚的にユーザーの目を引く。</td>
    </tr>
    <tr>
      <td><strong>要素の強調</strong></td>
      <td>1つずつ大きく表示することで、個々のコンテンツに集中させることができる。</td>
    </tr>
  </tbody>
</table>

## 注意点とデメリット

<table>
  <thead>
    <tr>
      <th>課題</th>
      <th>説明</th>
      <th>対策</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>2枚目以降が見られにくい</strong></td>
      <td>ユーザーがスライド操作に気づかない場合がある。</td>
      <td>
        <ul>
          <li>次のスライドを少し見切れさせる（チラ見せ）</li>
          <li>インジケーターを設置する</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>パフォーマンスへの影響</strong></td>
      <td>大きな画像やスクリプトが読み込み速度を低下させる可能性がある。</td>
      <td>
        <ul>
          <li>画像の遅延読み込み (Lazy loading)</li>
          <li>スクリプトの軽量化</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><strong>ユーザーへのストレス</strong></td>
      <td>自動切り替えが速すぎたり、操作が直感的でないと離脱につながる。</td>
      <td>
        <ul>
          <li>停止ボタンの設置</li>
          <li>適切な切り替え速度</li>
          <li>手動操作の優先</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

---

## 機能要件 (Functional Requirements)

<table>
  <thead>
    <tr>
      <th>要件</th>
      <th>詳細</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>移動ボタン</strong></td>
      <td>左右の矢印ボタンやスワイプ操作で前後に移動できること。</td>
    </tr>
    <tr>
      <td><strong>インジケーター</strong></td>
      <td>現在位置を示し、特定のスライドへ直接ジャンプできること（ドットなど）。</td>
    </tr>
    <tr>
      <td><strong>自動回転の制御</strong></td>
      <td>ユーザーが操作中は一時停止する、または停止ボタンを提供する。</td>
    </tr>
    <tr>
      <td><strong>ループ機能</strong></td>
      <td>最後のスライドから最初に戻るシームレスなループ。</td>
    </tr>
    <tr>
      <td><strong>キーボード操作</strong></td>
      <td>矢印キーで移動できるなど、アクセシビリティへの配慮。</td>
    </tr>
  </tbody>
</table>

## 実装・採用時のポイント

<table>
  <thead>
    <tr>
      <th>ポイント</th>
      <th>詳細</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>コンテンツの吟味</strong></td>
      <td>テーマを統一し、スライド枚数は3〜5枚程度に抑える。重要な情報は1枚目に。</td>
    </tr>
    <tr>
      <td><strong>レスポンシブ対応</strong></td>
      <td>PCでは複数カラム、SPでは1カラムなど、デバイスに応じた表示。</td>
    </tr>
    <tr>
      <td><strong>直感的な操作性</strong></td>
      <td>「スワイプできそう」「クリックできそう」な視覚的アフォーダンスを提供する。</td>
    </tr>
  </tbody>
</table>
