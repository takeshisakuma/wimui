import { Meta, Primary, Controls, Story} from "@storybook/blocks";
import * as DropdownStories from "./Dropdown.stories";
import { T } from "../T";

<Meta of={DropdownStories} />

# Dropdown

<p style={{ margin: "0 0 16px 0", fontSize: "18px", lineHeight: "28px", color: "#6c757d" }}>
  <T k="doc_dropdown_title" />
</p>

一般的なアクションメニューやナビゲーションメニューを表示するためのコンポーネントです。
あらかじめ用意された選択肢の中からユーザーが項目を選択するUIパーツとして、特に画面スペースが限られている場合に効率的です。
WebやアプリのUIにおいても頻繁に使用され、特にWebデザインでは重宝されます。

## 使用ガイドライン

### メリット
- 利便性向上: クリックやタップだけで選択でき、直感的な操作が可能。入力の手間や心理的ハードルを減らします。
- 入力間違いの防止: 定義された選択肢から選ぶため、誤字脱字や表記ゆれを防ぎ、データの整合性を保ちます。
- データ管理の効率化: 入力内容が統一されるため、後の集計や分析が容易になります。
- 省スペース: 長いリストを画面内に直接配置する必要がなく、情報量を抑えられます。

### デメリット
- 操作コスト: リストを開いて項目を探すため、最低でも2回の操作が必要です。
- 一覧性: 選択肢が隠れているため、スクロール量や頻度によってはユーザビリティが低下します。特に長いリストでは目的の項目を探しにくくなります。

---

## ベストプラクティス

### 1. 目的の項目に素早くアクセスできる設計
- わかりやすい順序や分類で整理してください。
- 選択肢が10個以上の場合は、カテゴリー分けや検索機能（Combobox）の導入を検討してください。

### 2. 視覚的なフィードバック
- ホバー時や選択時に色を変えるなど、現在地や操作対象を明確にします。
- デスクトップではキーボード操作にも対応させます。

### 3. レイアウトと配置の最適化
- モバイル: 画面スペースが限られているため、ドロップダウンではなく「半モーダル（BottomSheet）」や別画面でのリスト表示を検討してください。

---

## 他の選択式フォームとの比較

### vs ラジオボタン (Radio)
- ラジオボタン: 全ての選択肢が常に表示されています。選択肢が少ない（3個以下）場合や、一覧性が重要な場合に適しています。
- ドロップダウン: 画面スペースの節約に優れています。選択肢が多い（4個以上）場合にWebでは適していますが、モバイルでは操作性に注意が必要です。

### vs チェックボックス (Checkbox)
- チェックボックス: 複数選択が可能で、画面上に選択肢が並びます。
- ドロップダウン: 通常は単一選択ですが、リスト内にチェックボックスを組み込むことで、省スペースな複数選択UIとしても機能します。

### vs コンボボックス (Combobox)
- コンボボックス: 自由入力やフィルタリング（検索）が可能です。選択肢が多い場合や、ユーザーが独自の値を入力する必要がある場合に適しています。
- ドロップダウン: 選択肢が固定されており、入力はできません。

### vs マルチセレクト (MultiSelect)
- マルチセレクト: タグ形式などで複数の項目を同時に選ぶことに特化しています。
- ドロップダウン: 基本は単一選択です。

---

## 使い分けの判断基準

| 条件 | 推奨UI | 理由 |
| :--- | :--- | :--- |
| 項目が少ない (〜3個) | Radio / Checkbox | ワンタップで選択でき、一覧性が高い。 |
| 項目が多い (4個〜) | Dropdown (Web)<br/>BottomSheet (Mobile) | 省スペース。モバイルではスクロールしやすいUIを選ぶ。 |
| 複数選択が必要 | Checkbox / MultiSelect | 複数の値を同時に扱うための専用UI。 |
| 自由入力が必要 | Text Input | 日付や数値など、明確な値が決まっている場合。 |

## Usage

```tsx
import { Dropdown, DropdownTrigger, DropdownMenu, DropdownItem } from "wimui";
import { T } from "../T";

<Dropdown>
  <DropdownTrigger>
    <Button label="Open Menu" />
  </DropdownTrigger>
  <DropdownMenu>
    <DropdownItem onClick={handleProfile}>Profile</DropdownItem>
    <DropdownItem onClick={handleSettings}>Settings</DropdownItem>
  </DropdownMenu>
</Dropdown>
```

<Primary />

## Components

### Dropdown
ルートコンポーネント。開閉状態を管理します。

### DropdownTrigger
メニューを開閉するトリガーとなる要素をラップします。通常は `Button` や `Icon` などを含めます。

### DropdownMenu
ドロップダウンのメニュー本体です。`align` プロパティで表示位置（左寄せ/右寄せ）を制御できます。

### DropdownItem
メニュー内の各項目です。`onClick` ハンドラを設定したり、Disabled状態にすることができます。

<Controls />

## Stories

### With Icons
アイコンを含めたメニュー項目の例です。

<Story of={DropdownStories.WithIcons} />

### Right Alignment
メニューを右寄せにする例です。画面の右端にあるトリガーに適しています。

<Story of={DropdownStories.AlignmentRight} />

