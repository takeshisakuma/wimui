import { Meta, Primary, Controls, Story } from "@storybook/blocks";
import * as DropdownStories from "./Dropdown.stories";
import { T } from "../T";

<Meta of={DropdownStories} />

# Dropdown

<p
  style={{
    margin: "0 0 16px 0",
    fontSize: "18px",
    lineHeight: "28px",
    color: "#6c757d",
  }}
>
  <T k="doc_dropdown_title" />
</p>

一般的なアクションメニューやナビゲーションメニューを表示するためのコンポーネントです。
あらかじめ用意された選択肢の中からユーザーが項目を選択するUIパーツとして、特に画面スペースが限られている場合に効率的です。
WebやアプリのUIにおいても頻繁に使用され、特にWebデザインでは重宝されます。

## 使用ガイドライン

### メリット

<table>
  <thead>
    <tr>
      <th>メリット</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>利便性向上</strong></td>
      <td>クリックやタップだけで選択でき、直感的な操作が可能。入力の手間や心理的ハードルを減らします。</td>
    </tr>
    <tr>
      <td><strong>入力間違いの防止</strong></td>
      <td>定義された選択肢から選ぶため、誤字脱字や表記ゆれを防ぎ、データの整合性を保ちます。</td>
    </tr>
    <tr>
      <td><strong>データ管理の効率化</strong></td>
      <td>入力内容が統一されるため、後の集計や分析が容易になります。</td>
    </tr>
    <tr>
      <td><strong>省スペース</strong></td>
      <td>長いリストを画面内に直接配置する必要がなく、情報量を抑えられます。</td>
    </tr>
  </tbody>
</table>

### デメリット

<table>
  <thead>
    <tr>
      <th>デメリット</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>操作コスト</strong></td>
      <td>リストを開いて項目を探すため、最低でも2回の操作が必要です。</td>
    </tr>
    <tr>
      <td><strong>一覧性</strong></td>
      <td>選択肢が隠れているため、スクロール量や頻度によってはユーザビリティが低下します。特に長いリストでは目的の項目を探しにくくなります。</td>
    </tr>
  </tbody>
</table>

---

## ベストプラクティス

<table>
  <thead>
    <tr>
      <th>ベストプラクティス</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>目的の項目に素早くアクセスできる設計</strong></td>
      <td>
        わかりやすい順序や分類で整理してください。<br />
        選択肢が10個以上の場合は、カテゴリー分けや検索機能（Combobox）の導入を検討してください。
      </td>
    </tr>
    <tr>
      <td><strong>視覚的なフィードバック</strong></td>
      <td>
        ホバー時や選択時に色を変えるなど、現在地や操作対象を明確にします。<br />
        デスクトップではキーボード操作にも対応させます。
      </td>
    </tr>
    <tr>
      <td><strong>レイアウトと配置の最適化</strong></td>
      <td>
        モバイル: 画面スペースが限られているため、ドロップダウンではなく「半モーダル（BottomSheet）」や別画面でのリスト表示を検討してください。
      </td>
    </tr>
  </tbody>
</table>

---

## 他の選択式フォームとの比較

### vs ラジオボタン (Radio)

<table>
  <thead>
    <tr>
      <th>UI</th>
      <th>特徴・適正</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ラジオボタン</strong></td>
      <td>全ての選択肢が常に表示されています。選択肢が少ない（3個以下）場合や、一覧性が重要な場合に適しています。</td>
    </tr>
    <tr>
      <td><strong>ドロップダウン</strong></td>
      <td>画面スペースの節約に優れています。選択肢が多い（4個以上）場合にWebでは適していますが、モバイルでは操作性に注意が必要です。</td>
    </tr>
  </tbody>
</table>

### vs チェックボックス (Checkbox)

<table>
  <thead>
    <tr>
      <th>UI</th>
      <th>特徴・適正</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>チェックボックス</strong></td>
      <td>複数選択が可能で、画面上に選択肢が並びます。</td>
    </tr>
    <tr>
      <td><strong>ドロップダウン</strong></td>
      <td>通常は単一選択ですが、リスト内にチェックボックスを組み込むことで、省スペースな複数選択UIとしても機能します。</td>
    </tr>
  </tbody>
</table>

### vs コンボボックス (Combobox)

<table>
  <thead>
    <tr>
      <th>UI</th>
      <th>特徴・適正</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>コンボボックス</strong></td>
      <td>自由入力やフィルタリング（検索）が可能です。選択肢が多い場合や、ユーザーが独自の値を入力する必要がある場合に適しています。</td>
    </tr>
    <tr>
      <td><strong>ドロップダウン</strong></td>
      <td>選択肢が固定されており、入力はできません。</td>
    </tr>
  </tbody>
</table>

### vs マルチセレクト (MultiSelect)

<table>
  <thead>
    <tr>
      <th>UI</th>
      <th>特徴・適正</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>マルチセレクト</strong></td>
      <td>タグ形式などで複数の項目を同時に選ぶことに特化しています。</td>
    </tr>
    <tr>
      <td><strong>ドロップダウン</strong></td>
      <td>基本は単一選択です。</td>
    </tr>
  </tbody>
</table>

---

## 使い分けの判断基準

<table>
  <thead>
    <tr>
      <th>条件</th>
      <th>推奨UI</th>
      <th>理由</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>項目が少ない (〜3個)</td>
      <td>Radio / Checkbox</td>
      <td>ワンタップで選択でき、一覧性が高い。</td>
    </tr>
    <tr>
      <td>項目が多い (4個〜)</td>
      <td>Dropdown (Web)<br/>BottomSheet (Mobile)</td>
      <td>省スペース。モバイルではスクロールしやすいUIを選ぶ。</td>
    </tr>
    <tr>
      <td>複数選択が必要</td>
      <td>Checkbox / MultiSelect</td>
      <td>複数の値を同時に扱うための専用UI。</td>
    </tr>
    <tr>
      <td>自由入力が必要</td>
      <td>Text Input</td>
      <td>日付や数値など、明確な値が決まっている場合。</td>
    </tr>
  </tbody>
</table>

## Usage

```tsx
import { Dropdown, DropdownTrigger, DropdownMenu, DropdownItem } from "wimui";
import { T } from "../T";

<Dropdown>
  <DropdownTrigger>
    <Button label="Open Menu" />
  </DropdownTrigger>
  <DropdownMenu>
    <DropdownItem onClick={handleProfile}>Profile</DropdownItem>
    <DropdownItem onClick={handleSettings}>Settings</DropdownItem>
  </DropdownMenu>
</Dropdown>;
```

<Primary />

## Components

<table>
  <thead>
    <tr>
      <th>コンポーネント</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dropdown</code></td>
      <td>ルートコンポーネント。開閉状態を管理します。</td>
    </tr>
    <tr>
      <td><code>DropdownTrigger</code></td>
      <td>メニューを開閉するトリガーとなる要素をラップします。通常は <code>Button</code> や <code>Icon</code> などを含めます。</td>
    </tr>
    <tr>
      <td><code>DropdownMenu</code></td>
      <td>ドロップダウンのメニュー本体です。<code>align</code> プロパティで表示位置（左寄せ/右寄せ）を制御できます。</td>
    </tr>
    <tr>
      <td><code>DropdownItem</code></td>
      <td>メニュー内の各項目です。<code>onClick</code> ハンドラを設定したり、Disabled状態にすることができます。</td>
    </tr>
  </tbody>
</table>

<Controls />

## Stories

### With Icons

アイコンを含めたメニュー項目の例です。

<Story of={DropdownStories.WithIcons} />

### Right Alignment

メニューを右寄せにする例です。画面の右端にあるトリガーに適しています。

<Story of={DropdownStories.AlignmentRight} />
