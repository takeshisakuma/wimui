import { Meta, Canvas, Controls, Story} from "@storybook/blocks";
import { T } from "../T";
import * as VideoStories from "./Video.stories";

<Meta of={VideoStories} />

# Video

<p style={{ margin: "0 0 16px 0", fontSize: "18px", lineHeight: "28px", color: "#6c757d" }}>
  <T k="doc_video_title" />
</p>

`Video` コンポーネントは、動画ファイルを簡単に埋め込むためのコンポーネントです。
自動再生、ループ、コントロールの表示切り替え、角丸、影などのスタイリングをサポートしています。

## 特徴

- 直感的なコントロール: `controls` プロパティで再生UIの表示/非表示を切り替え可能。
- 自動再生とループ: `autoPlay`、`loop`、`muted` を組み合わせて背景動画などの演出に対応。
- スタイリング: `radius`、`shadow`、`border` プロパティでデザインに合わせた外観に変更可能。

## Usage

```tsx
import { Video } from "@/components/Video/Video";

<Video
  src="path/to/video.mp4"
  width={600}
  autoPlay
  muted
  loop
  radius="medium"
  caption="背景動画のサンプル"
/>
```

## 高度なコントロールと拡張機能
`advancedControls={true}` を利用することで、モダンな動画プレイヤーに必要な様々な機能を利用できます。

<table>
  <thead>
    <tr>
      <th>機能名</th>
      <th>関連プロパティ</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>画質切り替え</strong></td>
      <td><code>qualities</code></td>
      <td>1080p, 720pなどの画質プルダウンを選択でき、シームレスに途中から再生を切り替えます。</td>
    </tr>
    <tr>
      <td><strong>再生速度コントロール</strong></td>
      <td>-</td>
      <td>0.25倍から2.0倍まで、ユーザーが自由に再生速度を変更できるUIです。</td>
    </tr>
    <tr>
      <td><strong>アスペクト比の変更</strong></td>
      <td><code>fit</code></td>
      <td><code>contain</code>, <code>cover</code> など、画面にどうフィットさせるかをユーザーが選択できます。</td>
    </tr>
    <tr>
      <td><strong>プレイリスト・自動再生</strong></td>
      <td><code>playlist</code>, <code>autoPlayNext</code></td>
      <td>複数の動画をリストとして扱い、リスト選択UIの提供や、終了時の自動遷移機能を利用できます。</td>
    </tr>
    <tr>
      <td><strong>高度なレジューム再生</strong></td>
      <td><code>videoId</code>, <code>resumePlayback</code></td>
      <td><code>videoId</code> と共に指定することで、動画の再生位置を自動で保存し、次回アクセス時に続きから再生します。</td>
    </tr>
    <tr>
      <td><strong>10秒スキップ &amp; ダブルタップ</strong></td>
      <td>-</td>
      <td>操作バーにスキップボタンを備え、モバイルでは画面の左右をダブルタップすることでもスキップ動作が行われます。</td>
    </tr>
    <tr>
      <td><strong>ピクチャーインピクチャー (PiP)</strong></td>
      <td>-</td>
      <td>動画を画面の隅にフロート表示させるPiPモードの切り替えボタンを備えています。</td>
    </tr>
    <tr>
      <td><strong>キーボードショートカット</strong></td>
      <td>-</td>
      <td><code>Space</code> / <code>K</code> (再生), <code>M</code> (ミュート), <code>F</code> (最大化), <code>P</code> (PiP), <code>←</code> <code>→</code> (スキップ), <code>↑</code> <code>↓</code> (音量) に対応しています。</td>
    </tr>
  </tbody>
</table>

## モバイルでの挙動

カスタムコントロール使用時、**画面幅 576px 以下のモバイル環境では音量スライダーが非表示**になります。
ミュート／アンミュートのトグルボタンは引き続き表示されます。

この設計判断の理由は以下の通りです：

- **操作性の問題**: 狭いコントロールバー内に音量スライダーを展開すると、シークバー・設定アイコン等の他の要素と必ず重なってしまいます。
- **モバイルの慣例に従う**: YouTube・Netflix・Prime Video などの主要な動画プラットフォームのモバイルアプリは、いずれも音量スライダーを持ちません。モバイルでは**デバイスのハードウェアボタン（音量大・小キー）**で音量を調節するのが標準的な UX です。
- **ミュート操作は可能**: 音量スライダーが隠れていても、ミュートボタンで音のオン・オフは切り替えられます。

## Props

<Controls />

## Variants

### Default
標準的なビデオプレイヤーです。

<Canvas of={VideoStories.Default} />

### AutoPlay & Loop
`autoPlay`、`muted`、`loop` を有効にした状態です。

<Canvas of={VideoStories.AutoPlay} />

### Rounded with Shadow
角丸と影を適用したデザインです。

<Canvas of={VideoStories.Rounded} />

### Custom Controls
wimui独自のカスタムコントロールUIを適用した状態です。

<Canvas of={VideoStories.CustomControls} />

### Full Features (全部盛り)
すべての高度な機能（プレイリスト、アスペクト比、画質、レジューム再生、ショートカット等）を有効にした完全なプレイヤーです。

<Canvas of={VideoStories.FullFeatured} />

