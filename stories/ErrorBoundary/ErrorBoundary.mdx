import { Meta, Canvas, Controls } from "@storybook/addon-docs/blocks";
import * as ErrorBoundaryStories from "./ErrorBoundary.stories";
import { T } from "../T";

<Meta of={ErrorBoundaryStories} />

# ErrorBoundary

<p
  style={{
    margin: "0 0 16px 0",
    fontSize: "18px",
    lineHeight: "28px",
    color: "#6c757d",
  }}
>
  <T k="doc_errorboundary_title" />
</p>

`ErrorBoundary` コンポーネントは、子コンポーネントツリー内のどこかで発生した JavaScript エラーをキャッチし、そのエラーをログに記録した上で、クラッシュしたコンポーネントツリーの代わりにフォールバック UI を表示します。

## 特徴

<table>
  <thead>
    <tr>
      <th>特徴</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>優雅なリカバリ</strong></td>
      <td>単一のコンポーネントの失敗によってアプリ全体がクラッシュするのを防ぎます。</td>
    </tr>
    <tr>
      <td><strong>カスタマイズ可能なフォールバック</strong></td>
      <td>独自のフォールバック UI を提供することも、デフォルトのものを使用することも可能です。</td>
    </tr>
    <tr>
      <td><strong>復旧サポート</strong></td>
      <td>子要素のレンダリングを再試行するためのリセットメカニズムが含まれています。</td>
    </tr>
    <tr>
      <td><strong>エラーフック</strong></td>
      <td><code>onError</code> や <code>onReset</code> などのコールバックを提供します。</td>
    </tr>
  </tbody>
</table>

## 使い方

```tsx
<ErrorBoundary
  fallback={<div>問題が発生しました</div>}
  onError={(error) => console.log(error)}
>
  <MyBuggyComponent />
</ErrorBoundary>
```

## 例

### デフォルトのエラー境界

"Try again" ボタンを備えたデフォルトのエラー UI を表示します。

<Canvas of={ErrorBoundaryStories.Default} />

### カスタムフォールバック UI

関数として `fallback` を提供することで、エラーメッセージやリセットボタンを自由にカスタマイズできます。

<Canvas of={ErrorBoundaryStories.CustomFallback} />

## プロップ

<Controls />
