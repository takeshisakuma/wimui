import { Canvas, Meta, Controls, Primary } from "@storybook/blocks";
import * as CommandPaletteStories from "./CommandPalette.stories";
import { T } from "../T";

<Meta of={CommandPaletteStories} />

# Command Palette

<p
  style={{
    margin: "0 0 16px 0",
    fontSize: "18px",
    lineHeight: "28px",
    color: "#6c757d",
  }}
>
  <T k="doc_commandpalette_title" />
</p>

`CommandPalette`は、アプリケーション全体での検索、コマンド実行、ナビゲーションを提供するためのモーダルインターフェースです。

モバイルやタブレットでも使いやすいように、画面上部への固定やタップしやすいサイズ調整が自動的に行われます。

## 特徴

<table>
  <thead>
    <tr>
      <th>特徴</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>マルチデバイス対応</strong></td>
      <td>デスクトップでは中央、モバイルでは画面上部に最適化されたレイアウト。</td>
    </tr>
    <tr>
      <td><strong>ショートカット & トリガー</strong></td>
      <td><code>Cmd+K</code> ショートカットに加え、UI上のボタン（<code>Trigger</code>）からも起動可能。</td>
    </tr>
    <tr>
      <td><strong>キーボードナビゲーション</strong></td>
      <td>矢印キーでの選択、Enterでの実行。</td>
    </tr>
  </tbody>
</table>

## 構成

<table>
  <thead>
    <tr>
      <th>コンポーネント</th>
      <th>役割</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>CommandPalette</code></td>
      <td>ルートコンポーネント（Provider）</td>
    </tr>
    <tr>
      <td><code>CommandPaletteTrigger</code></td>
      <td>起動用ボタン（任意）</td>
    </tr>
    <tr>
      <td><code>CommandPaletteContent</code></td>
      <td>モーダルコンテンツ本体</td>
    </tr>
    <tr>
      <td><code>CommandPaletteInput</code></td>
      <td>検索入力</td>
    </tr>
    <tr>
      <td><code>CommandPaletteList</code></td>
      <td>アイテム一覧のコンテナ</td>
    </tr>
    <tr>
      <td><code>CommandPaletteGroup</code></td>
      <td>アイテムをグループ化</td>
    </tr>
    <tr>
      <td><code>CommandPaletteItem</code></td>
      <td>各コマンドアイテム</td>
    </tr>
    <tr>
      <td><code>CommandPaletteEmpty</code></td>
      <td>検索結果がない時の表示</td>
    </tr>
    <tr>
      <td><code>CommandPaletteFooter</code></td>
      <td>操作ヒントフッター</td>
    </tr>
  </tbody>
</table>

## 使い方

### 基本パターン（Triggerを使用）

```tsx
<CommandPalette>
  <CommandPaletteTrigger>
    <span>コマンドを開く</span>
    <kbd>⌘K</kbd>
  </CommandPaletteTrigger>

  <CommandPaletteContent>
    <CommandPaletteInput />
    <CommandPaletteList>
      <CommandPaletteItem onSelect={() => {}}>Action 1</CommandPaletteItem>
    </CommandPaletteList>
  </CommandPaletteContent>
</CommandPalette>
```

### 制御パターン（状態を外部で管理）

```tsx
const [open, setOpen] = useState(false);

return (
  <>
    <button onClick={() => setOpen(true)}>Open</button>
    <CommandPalette open={open} onOpenChange={setOpen}>
      <CommandPaletteContent>{/* ... */}</CommandPaletteContent>
    </CommandPalette>
  </>
);
```

## プレビュー

<Primary />

## プロパティ

<Controls />
