import {
  Meta,
  Title,
  Description,
  Primary,
  Controls,
  Stories,
  Canvas,
} from "@storybook/addon-docs/blocks";
import * as PaginationStories from "./Pagination.stories";
import { T } from "../T";

<Meta of={PaginationStories} />

<Title />
<p
  style={{
    margin: "0 0 16px 0",
    fontSize: "18px",
    lineHeight: "28px",
    color: "#6c757d",
  }}
>
  <T k="doc_pagination_title" />
</p>
<Description />

<Primary />

<h2>Props</h2>
<Controls />

<h2>考慮点</h2>
<table>
  <thead>
    <tr>
      <th>項目</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>視認性</td>
      <td>現在のページが一目でわかるように、アクティブなボタンを強調する。</td>
    </tr>
    <tr>
      <td>アクセシビリティ</td>
      <td>
        各ボタンに適切なaria-label（「次へ」「前のページへ」「○ページ目へ」など）を付与する。
      </td>
    </tr>
    <tr>
      <td>省スペース</td>
      <td>
        ページ数が多い場合は、省略記号（...）を使用して全てのページボタンを表示しないように制御する。
      </td>
    </tr>
    <tr>
      <td>操作性</td>
      <td>
        「前へ」「次へ」ボタンを配置し、連続したページ移動を容易にする。1ページ目や最終ページではボタンを無効化する。
      </td>
    </tr>
  </tbody>
</table>

<h2>バリエーション</h2>

<h3>基本</h3>
最も標準的なページネーションです。

<Canvas of={PaginationStories.Default} />

<h3>多数のページ</h3>
ページ数が多い場合、自動的に省略記号が表示されます。

<Canvas of={PaginationStories.ManyPages} />

<h3>周辺ページ数の調整</h3>
`siblingCount`
プロパティを使用して、現在のページの前後に表示するページ数を変更できます。

<Canvas of={PaginationStories.LargeSiblingCount} />

<h3>インタラクティブな例</h3>
実際にページを切り替えることができる例です。

<Canvas of={PaginationStories.Interactive} />

<h2>高度な機能</h2>

<h3>簡易モード (Simple Mode)</h3>
`simple`
プロパティを使用すると、コンパクトな表示形式に切り替わります。ページ番号の代わりに「現在のページ
/ 総ページ数」が表示されます。

```jsx
<Pagination
  total={100}
  pageSize={10}
  current={1}
  simple
  onChange={(page, pageSize) => console.log(page, pageSize)}
/>
```

<h3>ページサイズ変更機能</h3>
`showSizeChanger`
プロパティを有効にすると、ユーザーが1ページあたりの表示件数を変更できるようになります。

```jsx
<Pagination
  total={500}
  pageSize={10}
  current={1}
  showSizeChanger
  pageSizeOptions={[10, 20, 50, 100]}
  onChange={(page, pageSize) => console.log(page, pageSize)}
  onPageSizeChange={(newSize) => console.log("Page size changed to:", newSize)}
/>
```

プロパティ:

- `showSizeChanger` - ページサイズセレクタを表示するか
- `pageSizeOptions` - 選択可能なページサイズの配列（デフォルト: `[10, 20, 50, 100]`）
- `onPageSizeChange` - ページサイズが変更された時のコールバック

<h3>総件数表示</h3>
`showTotal`
プロパティを使用して、総件数や現在表示中のアイテム範囲を表示できます。

```jsx
<Pagination
  total={500}
  pageSize={20}
  current={1}
  showTotal={(total, range) => `${range[0]}-${range[1]} of ${total} items`}
  onChange={(page, pageSize) => console.log(page, pageSize)}
/>
```

<h3>クイックジャンパー</h3>
`showQuickJumper`
プロパティを有効にすると、特定のページに直接ジャンプできる入力フィールドが表示されます。

```jsx
<Pagination
  total={1000}
  pageSize={10}
  current={1}
  showQuickJumper
  onChange={(page, pageSize) => console.log(page, pageSize)}
/>
```

<h3>全機能を組み合わせ</h3>
すべての機能を同時に使用することも可能です。

```jsx
<Pagination
  total={1000}
  pageSize={20}
  current={1}
  showSizeChanger
  showQuickJumper
  showTotal={(total, range) => `${range[0]}-${range[1]} / ${total}`}
  pageSizeOptions={[10, 20, 50, 100]}
  onChange={(page, pageSize) => {
    console.log("Page:", page, "Size:", pageSize);
  }}
  onPageSizeChange={(newSize) => {
    console.log("New page size:", newSize);
  }}
/>
```

<h2>onChange シグネチャの変更</h2>

`onChange` コールバックは、ページ番号とページサイズの両方を受け取るようになりました：

```typescript
type OnChange = (page: number, pageSize: number) => void;
```

これにより、ページサイズが変更された際も同じコールバックで処理できます。

<Stories />
