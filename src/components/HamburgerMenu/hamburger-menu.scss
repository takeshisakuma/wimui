@use "../../tokens/semantic-colors" as colors;
@use "../../tokens/typography" as typography;
@use "../../tokens/spacings" as spacings;
@use "../../tokens/effects" as effects;
@use "../../tokens/breakpoints" as breakpoints;

$hamburger-layer-width: 32px !default;
$hamburger-layer-height: 2px !default;
$hamburger-layer-spacing: 6px !default;
$hamburger-layer-color: colors.$text-black !default;
$hamburger-layer-border-radius: 4px !default;
$hamburger-hover-opacity: 0.7 !default;
$hamburger-active-hover-opacity: 1 !default;

@layer component {
    .wim-hamburger-menu {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: spacings.$spacing-sm;
        margin: 0;
        overflow: visible;
        font: inherit;
        color: inherit;
        text-transform: none;
        cursor: pointer;
        background-color: transparent;
        border: none;
        transition-timing-function: linear;
        transition-duration: 0.15s;
        transition-property: opacity, filter;

        &:hover {
            opacity: $hamburger-hover-opacity;
        }



        &__box {
            position: relative;
            display: inline-block;
            width: $hamburger-layer-width;
            height: $hamburger-layer-width * 0.75; // Approx aspect ratio
        }

        &__inner {
            top: 50%;
            display: block;
            margin-top: $hamburger-layer-height * -0.5;
            transition-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);

            // Default state animation logic
            transition-duration: 0.1s;

            &,
            &::before,
            &::after {
                position: absolute;
                width: $hamburger-layer-width;
                height: $hamburger-layer-height;
                background-color: var(--wim-hamburger-color, #{$hamburger-layer-color});
                border-radius: $hamburger-layer-border-radius;
                transition-timing-function: ease;
                transition-duration: 0.15s;
                transition-property: transform;
            }

            &::before,
            &::after {
                display: block;
                content: "";
            }

            &::before {
                top: ($hamburger-layer-spacing + $hamburger-layer-height) * -1;
                transition: top 0.1s 0.14s ease-in, opacity 0.1s ease-in;
            }

            &::after {
                top: ($hamburger-layer-spacing + $hamburger-layer-height);
                transition: top 0.1s 0.14s ease-in, transform 0.1s cubic-bezier(0.55, 0.055, 0.675, 0.19);
            }

            // When open, we override the transitions in the --open block above
            // But we need to handle the closing animation too.
            // The default state logic above handles the closing transition.
        }

        // Size variants
        &--sm {
            .wim-hamburger-menu__box {
                width: 24px;
                height: 18px;
            }

            .wim-hamburger-menu__inner,
            .wim-hamburger-menu__inner::before,
            .wim-hamburger-menu__inner::after {
                width: 24px;
                height: 2px;
            }

            .wim-hamburger-menu__inner::before {
                top: -6px;
            }

            .wim-hamburger-menu__inner::after {
                top: 6px;
            }
        }

        &--lg {
            .wim-hamburger-menu__box {
                width: 40px;
                height: 30px;
            }

            .wim-hamburger-menu__inner,
            .wim-hamburger-menu__inner::before,
            .wim-hamburger-menu__inner::after {
                width: 40px;
                height: 3px;
            }

            .wim-hamburger-menu__inner::before {
                top: -10px;
            }

            .wim-hamburger-menu__inner {
                margin-top: -1.5px;
            }

            .wim-hamburger-menu__inner::after {
                top: 10px;
            }
        }

        // Open state transition for the main element needs to be coordinated
        &--open {
            &:hover {
                opacity: $hamburger-active-hover-opacity;
            }

            .wim-hamburger-menu__inner {
                transform: rotate(-45deg);
                transition-delay: 0.14s;
                transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);

                &::before {
                    top: 0;
                    opacity: 0;
                    transition: top 0.1s ease-out, opacity 0.1s 0.14s ease-out;
                }

                &::after {
                    top: 0;
                    transform: rotate(-90deg);
                    transition: top 0.1s ease-out, transform 0.1s 0.14s cubic-bezier(0.215, 0.61, 0.355, 1);
                }
            }
        }
    }
}